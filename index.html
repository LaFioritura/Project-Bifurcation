<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="description" content="An interactive exploration of humanity's two paths to cosmic survival: matter and information.">
    <title>CLASSIFIED: Project BIFURCATION</title>
    
    <!-- Three.js for 3D Globe -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Orbitron:wght@400;700;900&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #00ff41;
            --secondary: #ff0080;
            --accent: #00d4ff;
            --warning: #ffaa00;
            --danger: #ff3333;
            --dark: #0a0e27;
            --darker: #050714;
        }

        html {
            overflow-x: hidden;
            width: 100%;
            max-width: 100vw;
            overscroll-behavior: none;
        }

        body {
            font-family: 'Share Tech Mono', monospace;
            background: var(--darker);
            color: var(--primary);
            overflow-x: hidden;
            cursor: crosshair;
            width: 100%;
            max-width: 100vw;
            overscroll-behavior: none;
            -webkit-overflow-scrolling: touch;
            position: relative;
        }

        .scanlines {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(
                0deg,
                rgba(0, 0, 0, 0.15),
                rgba(0, 0, 0, 0.15) 1px,
                transparent 1px,
                transparent 2px
            );
            pointer-events: none;
            z-index: 9999;
            animation: flicker 0.15s infinite;
        }

        @keyframes flicker {
            0% { opacity: 0.95; }
            50% { opacity: 1; }
            100% { opacity: 0.95; }
        }

        .matrix-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            opacity: 0.1;
        }

        .glitch {
            position: relative;
            animation: glitch-anim 5s infinite;
        }

        @keyframes glitch-anim {
            0%, 90%, 100% {
                transform: translate(0);
                text-shadow: none;
            }
            92% {
                transform: translate(-2px, 2px);
                text-shadow: 2px 0 var(--secondary), -2px 0 var(--accent);
            }
            94% {
                transform: translate(2px, -2px);
                text-shadow: -2px 0 var(--secondary), 2px 0 var(--accent);
            }
        }

        .terminal-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
            width: 100%;
            overflow-x: hidden;
        }

        .boot-sequence {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 40px;
            opacity: 1;
            transition: opacity 0.5s;
            width: 100%;
            max-width: 100%;
            overflow-x: hidden;
        }

        .boot-sequence.hidden {
            opacity: 0;
            pointer-events: none;
            display: none;
        }

        .prelude-screen {
            min-height: 100vh;
            padding: 60px 40px;
            max-width: 1000px;
            margin: 0 auto;
            opacity: 1;
            transition: opacity 0.5s;
            display: none;
        }

        .prelude-screen.active {
            display: block;
        }

        .prelude-screen.hidden {
            opacity: 0;
            pointer-events: none;
            display: none;
        }

        .prelude-content {
            line-height: 1.8;
        }

        .prelude-title {
            font-family: 'Orbitron', monospace;
            font-size: 2.5em;
            font-weight: 900;
            text-align: center;
            color: var(--primary);
            text-shadow: 0 0 20px var(--primary);
            letter-spacing: 5px;
            margin: 30px 0;
        }

        .prelude-separator {
            color: var(--primary);
            opacity: 0.3;
            text-align: center;
            font-size: 0.8em;
            margin: 30px 0;
            letter-spacing: 1px;
        }

        .prelude-paragraph {
            margin: 20px 0;
            font-size: 1.1em;
            color: rgba(0, 255, 65, 0.9);
            line-height: 1.9;
        }

        .prelude-paragraph.emphasized {
            font-size: 1.2em;
            color: var(--primary);
            font-weight: 500;
            margin: 30px 0;
        }

        .prelude-paragraph.center-text {
            text-align: center;
        }

        .prelude-list {
            list-style: none;
            margin: 25px 0;
            padding-left: 0;
        }

        .prelude-list li {
            margin: 15px 0;
            padding-left: 30px;
            position: relative;
            font-size: 1.05em;
            line-height: 1.7;
        }

        .prelude-list li::before {
            content: '‚ñ∏';
            position: absolute;
            left: 0;
            color: var(--primary);
            font-size: 1.2em;
        }

        .path-preview-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 40px 0;
        }

        .path-preview {
            border: 2px solid var(--primary);
            padding: 30px;
            background: rgba(0, 0, 0, 0.4);
            text-align: center;
            transition: all 0.3s;
        }

        .path-preview:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 40px rgba(0, 255, 65, 0.3);
        }

        .path-preview.matter-path {
            border-color: var(--accent);
        }

        .path-preview.info-path {
            border-color: var(--secondary);
        }

        .path-preview-icon {
            font-size: 3em;
            margin-bottom: 15px;
            filter: drop-shadow(0 0 10px currentColor);
        }

        .path-preview.matter-path .path-preview-icon {
            color: var(--accent);
        }

        .path-preview.info-path .path-preview-icon {
            color: var(--secondary);
        }

        .path-preview-label {
            font-family: 'Orbitron', monospace;
            font-size: 1.3em;
            font-weight: 700;
            margin-bottom: 15px;
        }

        .path-preview.matter-path .path-preview-label {
            color: var(--accent);
        }

        .path-preview.info-path .path-preview-label {
            color: var(--secondary);
        }

        .path-preview p {
            font-size: 0.95em;
            line-height: 1.6;
            color: rgba(0, 255, 65, 0.8);
        }

        @media (max-width: 768px) {
            .prelude-screen {
                padding: 40px 20px;
            }

            .prelude-title {
                font-size: 1.8em;
                letter-spacing: 2px;
            }

            .prelude-paragraph {
                font-size: 1.05em;
            }

            .path-preview-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
        }

        .boot-line {
            margin: 5px 0;
            opacity: 0;
            animation: bootFadeIn 0.1s forwards;
            font-size: 0.9em;
            color: var(--primary);
            text-shadow: 0 0 5px var(--primary);
        }

        @keyframes bootFadeIn {
            to { opacity: 1; }
        }

        .boot-title {
            font-family: 'Orbitron', monospace;
            font-size: 3em;
            font-weight: 900;
            margin: 30px 0;
            text-align: center;
            color: var(--primary);
            text-shadow: 
                0 0 10px var(--primary),
                0 0 20px var(--primary),
                0 0 30px var(--primary);
            letter-spacing: 8px;
        }

        .access-prompt {
            text-align: center;
            margin-top: 50px;
        }

        .access-input {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
            padding: 15px 30px;
            font-family: 'Share Tech Mono', monospace;
            font-size: 1.2em;
            width: 400px;
            max-width: 90%;
            text-align: center;
            outline: none;
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.3);
            transition: all 0.3s;
        }

        .access-input:focus {
            box-shadow: 0 0 30px rgba(0, 255, 65, 0.6);
            border-color: var(--accent);
        }

        .access-hint {
            margin-top: 20px;
            font-size: 0.8em;
            color: rgba(0, 255, 65, 0.5);
        }

        .access-button {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
            padding: 15px 40px;
            font-family: 'Share Tech Mono', monospace;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-top: 20px;
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.3);
        }

        .access-button:hover {
            background: var(--primary);
            color: var(--darker);
            box-shadow: 0 0 30px var(--primary);
            transform: translateY(-2px);
        }

        .access-button:active {
            transform: translateY(0);
        }

        .main-terminal {
            display: none;
            padding: 40px 20px;
        }

        .main-terminal.active {
            display: block;
        }

        .terminal-header {
            border: 2px solid var(--primary);
            padding: 10px 20px;
            margin-bottom: 20px;
            background: rgba(0, 255, 65, 0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.2);
        }

        .terminal-title {
            font-family: 'Orbitron', monospace;
            font-weight: 700;
            letter-spacing: 3px;
        }

        .terminal-status {
            display: flex;
            gap: 20px;
            font-size: 0.8em;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--primary);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        .data-block {
            border: 1px solid var(--primary);
            margin: 40px 0;
            padding: 40px;
            background: rgba(10, 14, 39, 0.8);
            position: relative;
            opacity: 0.3;
            transform: translateY(20px);
            transition: all 0.5s ease-out;
            box-shadow: 0 0 30px rgba(0, 255, 65, 0.1);
            width: 100%;
            max-width: 100%;
            overflow-x: hidden;
            word-wrap: break-word;
        }

        .data-block.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .data-block.warning {
            border-color: var(--warning);
        }

        .data-block.critical {
            border-color: var(--danger);
            animation: criticalPulse 2s infinite;
        }

        @keyframes criticalPulse {
            0%, 100% { box-shadow: 0 0 30px rgba(255, 51, 51, 0.3); }
            50% { box-shadow: 0 0 50px rgba(255, 51, 51, 0.6); }
        }

        .data-block::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--primary), transparent);
            animation: scan 3s linear infinite;
        }

        @keyframes scan {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .block-header {
            color: var(--accent);
            font-size: 0.8em;
            margin-bottom: 10px;
            letter-spacing: 2px;
            display: flex;
            justify-content: space-between;
        }

        .block-id {
            color: var(--secondary);
        }

        .block-title {
            font-family: 'Orbitron', monospace;
            font-size: 2em;
            font-weight: 700;
            margin-bottom: 30px;
            color: var(--primary);
            text-shadow: 0 0 10px var(--primary);
        }

        .block-content {
            line-height: 1.8;
            color: rgba(0, 255, 65, 0.8);
        }

        .block-content p {
            margin: 15px 0;
        }

        .encrypted-text {
            color: var(--secondary);
            cursor: pointer;
            transition: all 0.3s;
            display: inline-block;
            position: relative;
        }

        .encrypted-text:hover {
            color: var(--primary);
            text-shadow: 0 0 10px var(--primary);
        }

        .encrypted-text::after {
            content: 'üîì';
            position: absolute;
            right: -20px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .encrypted-text:hover::after {
            opacity: 1;
        }

        .doomsday-clock {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 40px 0;
            perspective: 1000px;
        }

        .clock-container {
            width: 300px;
            height: 300px;
            border-radius: 50%;
            border: 4px solid var(--danger);
            position: relative;
            background: radial-gradient(circle, rgba(255, 51, 51, 0.1), transparent);
            box-shadow: 0 0 50px rgba(255, 51, 51, 0.4);
            animation: clockPulse 3s infinite;
        }

        @keyframes clockPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .clock-hand {
            position: absolute;
            bottom: 50%;
            left: 50%;
            width: 4px;
            height: 40%;
            background: var(--danger);
            transform-origin: bottom center;
            transform: translateX(-50%) rotate(354deg);
            box-shadow: 0 0 20px var(--danger);
        }

        .clock-center {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 20px;
            height: 20px;
            background: var(--danger);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 30px var(--danger);
        }

        .clock-label {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-family: 'Orbitron', monospace;
            font-size: 2em;
            color: var(--danger);
            text-shadow: 0 0 20px var(--danger);
            font-weight: 900;
        }

        .stat-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat-card {
            background: rgba(0, 0, 0, 0.6);
            border: 1px solid var(--primary);
            padding: 20px;
            transition: all 0.3s;
        }

        .stat-card.warning {
            border-color: var(--warning);
        }

        .stat-card.critical {
            border-color: var(--danger);
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 255, 65, 0.3);
        }

        .stat-label {
            font-size: 0.8em;
            color: var(--accent);
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .stat-value {
            font-family: 'Orbitron', monospace;
            font-size: 2em;
            font-weight: 900;
            margin-bottom: 10px;
        }

        .stat-description {
            font-size: 0.85em;
            color: rgba(0, 255, 65, 0.6);
            line-height: 1.5;
        }

        .path-matrix {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 40px 0;
        }

        .path-node {
            border: 2px solid var(--primary);
            padding: 30px;
            background: rgba(0, 0, 0, 0.6);
            position: relative;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.4s;
        }

        .path-node::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: radial-gradient(circle, rgba(0, 255, 65, 0.2), transparent);
            transform: translate(-50%, -50%);
            transition: all 0.6s;
        }

        .path-node:hover::before {
            width: 300%;
            height: 300%;
        }

        .path-node.matter {
            border-color: var(--accent);
        }

        .path-node.information {
            border-color: var(--secondary);
        }

        .path-node:hover {
            transform: scale(1.05);
            box-shadow: 0 0 40px rgba(0, 255, 65, 0.4);
        }

        .path-icon {
            font-size: 3em;
            margin-bottom: 20px;
            display: block;
            filter: drop-shadow(0 0 10px currentColor);
        }

        .path-label {
            font-family: 'Orbitron', monospace;
            font-size: 1.5em;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .path-specs {
            list-style: none;
            margin-top: 20px;
        }

        .path-specs li {
            margin: 10px 0;
            padding-left: 20px;
            position: relative;
        }

        .path-specs li::before {
            content: '>';
            position: absolute;
            left: 0;
            color: var(--primary);
        }

        .hex-grid {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 60px 0;
            perspective: 1000px;
        }

        .hex-container {
            width: 300px;
            height: 300px;
            position: relative;
            transform-style: preserve-3d;
            animation: rotate3d 20s linear infinite;
        }

        @keyframes rotate3d {
            from { transform: rotateX(20deg) rotateY(0deg); }
            to { transform: rotateX(20deg) rotateY(360deg); }
        }

        .hex-particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: var(--primary);
            box-shadow: 0 0 10px var(--primary);
        }

        .code-quote {
            border-left: 4px solid var(--secondary);
            padding-left: 20px;
            margin: 30px 0;
            font-style: italic;
            color: var(--accent);
            background: rgba(255, 0, 128, 0.05);
            padding: 20px;
            font-size: 1.1em;
        }

        .timeline-graph {
            position: relative;
            padding: 60px 20px;
        }

        .timeline-axis {
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(
                180deg,
                transparent,
                var(--primary) 10%,
                var(--primary) 90%,
                transparent
            );
            transform: translateX(-50%);
        }

        .timeline-node {
            display: flex;
            margin: 50px 0;
            position: relative;
            align-items: center;
        }

        .timeline-node:nth-child(odd) .timeline-content {
            margin-right: 60%;
        }

        .timeline-node:nth-child(even) {
            flex-direction: row-reverse;
        }

        .timeline-node:nth-child(even) .timeline-content {
            margin-left: 60%;
        }

        .timeline-content {
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid var(--primary);
            padding: 25px;
            position: relative;
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.2);
        }

        .timeline-marker {
            position: absolute;
            left: 50%;
            width: 20px;
            height: 20px;
            background: var(--primary);
            border-radius: 50%;
            transform: translateX(-50%);
            box-shadow: 0 0 20px var(--primary);
            animation: pulse 2s infinite;
        }

        .paradox-box {
            background: rgba(255, 170, 0, 0.1);
            border: 2px solid var(--warning);
            padding: 25px;
            margin: 30px 0;
            position: relative;
        }

        .paradox-box::before {
            content: '‚ö† PARADOX DETECTED';
            position: absolute;
            top: -12px;
            left: 20px;
            background: var(--darker);
            padding: 0 10px;
            color: var(--warning);
            font-size: 0.8em;
            font-weight: 700;
        }

        .comparison-table {
            width: 100%;
            margin: 30px 0;
            border-collapse: collapse;
            display: block;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            max-width: 100%;
        }

        .comparison-table th,
        .comparison-table td {
            border: 1px solid var(--primary);
            padding: 15px;
            text-align: left;
            white-space: nowrap;
        }

        .comparison-table th {
            background: rgba(0, 255, 65, 0.1);
            font-family: 'Orbitron', monospace;
            color: var(--accent);
        }

        .comparison-table tr:hover {
            background: rgba(0, 255, 65, 0.05);
        }

        .final-protocol {
            text-align: center;
            padding: 100px 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .final-header {
            font-family: 'Orbitron', monospace;
            font-size: 3em;
            font-weight: 900;
            margin-bottom: 50px;
            color: var(--primary);
            text-shadow: 0 0 20px var(--primary);
            letter-spacing: 5px;
        }

        .final-message {
            font-size: 1.3em;
            line-height: 2;
            max-width: 900px;
            margin: 20px auto;
            color: rgba(0, 255, 65, 0.9);
        }

        .ascii-art {
            font-size: 0.6em;
            line-height: 1.2;
            color: var(--accent);
            margin: 40px 0;
            white-space: pre;
            text-align: center;
            overflow-x: auto;
            max-width: 100%;
            -webkit-overflow-scrolling: touch;
        }

        .command-btn {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
            padding: 15px 40px;
            font-family: 'Share Tech Mono', monospace;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-top: 30px;
        }

        .command-btn:hover {
            background: var(--primary);
            color: var(--darker);
            box-shadow: 0 0 30px var(--primary);
        }

        .hidden-counter {
            position: fixed;
            bottom: 20px;
            right: 20px;
            font-size: 0.8em;
            color: var(--secondary);
            opacity: 0.3;
            z-index: 100;
        }

        .easter-egg-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: rgba(0, 0, 0, 0.95);
            border: 2px solid var(--secondary);
            padding: 40px;
            max-width: 500px;
            z-index: 10000;
            box-shadow: 0 0 50px var(--secondary);
            transition: transform 0.3s;
        }

        .easter-egg-popup.active {
            transform: translate(-50%, -50%) scale(1);
        }

        .close-popup {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            color: var(--secondary);
            font-size: 1.5em;
            cursor: pointer;
        }

        .konami-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 10px;
            height: 10px;
            background: var(--darker);
            border: 1px solid var(--primary);
            opacity: 0.5;
            z-index: 100;
        }

        .konami-indicator.active {
            background: var(--primary);
            box-shadow: 0 0 20px var(--primary);
            animation: pulse 1s infinite;
        }

        .footer {
            border-top: 1px solid var(--primary);
            padding: 30px 20px;
            margin-top: 60px;
            text-align: center;
            background: rgba(10, 14, 39, 0.6);
            font-size: 0.85em;
            color: rgba(0, 255, 65, 0.6);
        }

        .footer-title {
            font-family: 'Orbitron', monospace;
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 1.1em;
            letter-spacing: 2px;
        }

        .footer-section {
            margin: 15px 0;
            line-height: 1.8;
        }

        .footer-link {
            color: var(--accent);
            text-decoration: none;
            transition: all 0.3s;
            border-bottom: 1px solid transparent;
        }

        .footer-link:hover {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .footer-disclaimer {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid rgba(0, 255, 65, 0.2);
            font-size: 0.9em;
            color: rgba(0, 255, 65, 0.4);
        }

        @media (max-width: 768px) {
            .footer {
                padding: 20px 15px;
                margin-top: 40px;
                font-size: 0.75em;
            }

            .footer-title {
                font-size: 1em;
            }

            .footer-section {
                margin: 10px 0;
            }
        }

        .progress-indicator {
            position: fixed;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 100;
        }

        .progress-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: rgba(0, 255, 65, 0.2);
            border: 1px solid var(--primary);
            transition: all 0.3s;
        }

        .progress-dot.active {
            background: var(--primary);
            box-shadow: 0 0 15px var(--primary);
        }

        @media (max-width: 768px) {
            body {
                font-size: 16px;
                position: relative;
                overflow-x: hidden;
            }

            html {
                position: relative;
                overflow-x: hidden;
            }

            .terminal-container {
                padding: 10px;
                overflow-x: hidden;
                max-width: 100vw;
            }

            .boot-sequence {
                padding: 20px;
                overflow-x: hidden;
            }

            .boot-line {
                font-size: 0.95em;
                line-height: 1.6;
            }

            .boot-title {
                font-size: 2em;
                letter-spacing: 3px;
                margin: 20px 0;
            }

            .access-input {
                width: 95%;
                padding: 16px 20px;
                font-size: 1.1em;
            }

            .access-button {
                width: 95%;
                padding: 18px 20px;
                font-size: 1.1em;
                margin-top: 15px;
            }

            .access-hint {
                font-size: 0.85em;
                padding: 0 10px;
                line-height: 1.5;
            }

            .main-terminal {
                padding: 20px 10px;
            }

            .terminal-header {
                flex-direction: column;
                gap: 10px;
                padding: 15px;
            }

            .terminal-title {
                font-size: 0.95em;
                letter-spacing: 1px;
                text-align: center;
            }

            .terminal-status {
                font-size: 0.8em;
                gap: 10px;
                justify-content: center;
            }

            .data-block {
                padding: 25px;
                margin: 20px 0;
                overflow-x: hidden;
                max-width: 100%;
            }

            .block-header {
                font-size: 0.8em;
                flex-direction: column;
                gap: 5px;
                overflow-x: hidden;
            }

            .block-title {
                font-size: 1.6em;
                margin-bottom: 20px;
                line-height: 1.3;
            }

            .block-content {
                font-size: 1.05em;
                line-height: 1.7;
            }

            .block-content p {
                margin: 15px 0;
            }

            .doomsday-clock {
                margin: 30px 0;
            }

            .clock-container {
                width: 220px;
                height: 220px;
            }

            .clock-label {
                font-size: 1.5em;
            }

            .stat-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .stat-card {
                padding: 18px;
            }

            .stat-label {
                font-size: 0.85em;
            }

            .stat-value {
                font-size: 1.8em;
            }

            .stat-description {
                font-size: 0.95em;
                line-height: 1.6;
            }

            .path-matrix {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .path-node {
                padding: 25px;
            }

            .path-icon {
                font-size: 2.8em;
            }

            .path-label {
                font-size: 1.4em;
            }

            .path-node p {
                font-size: 1.05em;
                line-height: 1.6;
            }

            .path-specs {
                font-size: 1em;
            }

            .path-specs li {
                margin: 10px 0;
                line-height: 1.5;
            }

            .hex-grid {
                margin: 40px 0;
            }

            .hex-container {
                width: 220px;
                height: 220px;
            }

            .code-quote {
                font-size: 1.05em;
                padding: 18px;
                margin: 20px 0;
                line-height: 1.7;
            }

            .timeline-graph {
                padding: 40px 10px;
            }

            .timeline-axis {
                left: 30px;
                transform: none;
            }

            .timeline-node {
                margin: 40px 0;
            }

            .timeline-node:nth-child(odd) .timeline-content,
            .timeline-node:nth-child(even) .timeline-content {
                margin: 0 0 0 50px;
            }

            .timeline-content {
                padding: 18px;
                font-size: 1em;
                line-height: 1.6;
            }

            .timeline-content h3 {
                font-size: 1.2em;
                margin-bottom: 12px;
            }

            .timeline-marker {
                left: 30px;
                transform: translateX(-50%);
                width: 16px;
                height: 16px;
            }

            .paradox-box {
                padding: 20px;
                margin: 20px 0;
            }

            .paradox-box::before {
                font-size: 0.75em;
                top: -10px;
            }

            .paradox-box h3 {
                font-size: 1.15em;
                margin-bottom: 12px;
            }

            .paradox-box p {
                font-size: 1em;
                line-height: 1.6;
            }

            .comparison-table {
                font-size: 0.85em;
                display: block;
                overflow-x: visible;
            }

            .comparison-table thead {
                display: none;
            }

            .comparison-table tbody {
                display: block;
            }

            .comparison-table tr {
                display: block;
                margin-bottom: 20px;
                border: 1px solid var(--primary);
                padding: 15px;
                background: rgba(0, 0, 0, 0.4);
            }

            .comparison-table th,
            .comparison-table td {
                display: block;
                padding: 8px 0;
                min-width: auto;
                font-size: 1em;
                border: none;
                text-align: left;
                white-space: normal;
                word-wrap: break-word;
            }

            .comparison-table td:before {
                content: attr(data-label);
                font-weight: bold;
                color: var(--accent);
                display: block;
                margin-bottom: 5px;
                font-size: 0.85em;
                text-transform: uppercase;
                letter-spacing: 1px;
            }

            .comparison-table td:not(:last-child) {
                border-bottom: 1px solid rgba(0, 255, 65, 0.2);
                padding-bottom: 12px;
                margin-bottom: 12px;
            }

            .final-protocol {
                padding: 60px 20px;
            }

            .final-header {
                font-size: 2.2em;
                letter-spacing: 3px;
                margin-bottom: 30px;
            }

            .final-message {
                font-size: 1.15em;
                line-height: 1.8;
                padding: 0 10px;
            }

            .ascii-art {
                font-size: 0.35em;
                overflow-x: visible;
                white-space: pre-wrap;
                word-break: break-all;
            }

            .command-btn {
                padding: 15px 35px;
                font-size: 1em;
                letter-spacing: 1px;
            }

            .hidden-counter {
                font-size: 0.8em;
                bottom: 10px;
                right: 10px;
            }

            .easter-egg-popup {
                width: 90%;
                max-width: 90%;
                padding: 30px;
                font-size: 1em;
                line-height: 1.6;
            }

            .easter-egg-popup.active {
                transform: translate(-50%, -50%) scale(0.95);
            }

            .konami-indicator {
                top: 10px;
                right: 10px;
            }

            .progress-indicator {
                display: none;
            }

            /* Touch-friendly adjustments */
            .encrypted-text {
                padding: 6px;
                margin: 0 3px;
                font-size: 1em;
            }

            .path-node,
            .stat-card,
            .command-btn {
                -webkit-tap-highlight-color: rgba(0, 255, 65, 0.2);
            }

            /* Improve readability on small screens */
            .block-content ul,
            .path-specs {
                padding-left: 20px;
            }

            /* Better spacing for mobile */
            .data-block.warning,
            .data-block.critical {
                margin: 25px 5px;
                overflow-x: hidden;
            }

            /* Ensure no horizontal overflow anywhere */
            * {
                max-width: 100%;
            }

            img, svg, video, canvas, iframe {
                max-width: 100%;
                height: auto;
            }

            /* Optimize table scrolling */
            .comparison-table {
                -webkit-overflow-scrolling: touch;
                margin: 20px -5px;
            }

            /* Make clickable areas larger for touch */
            .encrypted-text::after {
                right: -15px;
                font-size: 0.9em;
            }

            /* Adjust glitch effect for mobile performance */
            .glitch {
                animation: glitch-anim 8s infinite;
            }

            /* Better doomsday clock on mobile */
            .clock-hand {
                height: 35%;
            }

            /* Optimize timeline for mobile */
            .timeline-node:nth-child(even) {
                flex-direction: row;
            }

            /* Better quote formatting */
            .code-quote {
                border-left-width: 3px;
                padding-left: 18px;
            }

            /* Improve paradox boxes */
            .paradox-box ul {
                font-size: 1em;
                line-height: 1.6;
            }

            /* Better final protocol spacing */
            .final-protocol .doomsday-clock {
                margin: 40px 0;
            }

            .final-protocol .code-quote {
                font-size: 1.15em;
                max-width: 100%;
                line-height: 1.8;
            }

            /* Optimize status dots */
            .status-dot {
                width: 6px;
                height: 6px;
            }

            /* Better matrix background on mobile */
            .matrix-bg {
                opacity: 0.08;
            }

            /* Improve scanlines performance */
            .scanlines {
                background-size: 100% 2px;
            }

            .footer {
                padding: 25px 20px;
                margin-top: 40px;
                font-size: 0.9em;
            }

            .footer-title {
                font-size: 1.15em;
            }

            .footer-section {
                margin: 15px 0;
                line-height: 1.7;
            }
        }

        /* Extra small devices (phones in portrait, less than 576px) */
        @media (max-width: 576px) {
            body {
                font-size: 16px;
            }

            .boot-title {
                font-size: 1.8em;
                letter-spacing: 2px;
            }

            .block-title {
                font-size: 1.5em;
                line-height: 1.3;
            }

            .final-header {
                font-size: 2em;
                line-height: 1.2;
            }

            .clock-container {
                width: 200px;
                height: 200px;
            }

            .clock-label {
                font-size: 1.4em;
            }

            .path-icon {
                font-size: 2.5em;
            }

            .path-label {
                font-size: 1.3em;
            }

            .comparison-table th,
            .comparison-table td {
                font-size: 0.95em;
                padding: 10px 8px;
                min-width: 110px;
            }

            .terminal-title {
                font-size: 0.9em;
            }

            .stat-value {
                font-size: 1.7em;
            }

            .block-content {
                font-size: 1.05em;
                line-height: 1.7;
            }
        }

        /* Landscape mobile optimization */
        @media (max-width: 768px) and (orientation: landscape) {
            .boot-sequence,
            .final-protocol {
                min-height: auto;
                padding: 40px 20px;
            }

            .doomsday-clock {
                margin: 20px 0;
            }

            .clock-container {
                width: 150px;
                height: 150px;
            }
        }

        /* Prevent text selection on interactive elements (better for touch) */
        @media (max-width: 768px) {
            .path-node,
            .stat-card,
            .command-btn,
            .encrypted-text,
            .glitch {
                -webkit-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                user-select: none;
            }
        }
    </style>
</head>
<body>
    <div class="scanlines"></div>
    <canvas class="matrix-bg" id="matrixCanvas"></canvas>
    <div class="konami-indicator" id="konamiIndicator"></div>
    <div class="hidden-counter" id="secretCounter">SECRETS: <span id="secretCount">0</span>/7</div>

    <div class="progress-indicator" id="progressIndicator">
        <div class="progress-dot" data-section="0"></div>
        <div class="progress-dot" data-section="1"></div>
        <div class="progress-dot" data-section="2"></div>
        <div class="progress-dot" data-section="3"></div>
        <div class="progress-dot" data-section="4"></div>
        <div class="progress-dot" data-section="5"></div>
        <div class="progress-dot" data-section="6"></div>
        <div class="progress-dot" data-section="7"></div>
        <div class="progress-dot" data-section="8"></div>
    </div>

    <div class="terminal-container">
        <!-- Boot Sequence -->
        <div class="boot-sequence" id="bootSequence">
            <div class="boot-line" style="animation-delay: 0s;">[SYSTEM] Initializing quantum core...</div>
            <div class="boot-line" style="animation-delay: 0.1s;">[SYSTEM] Loading consciousness matrix...</div>
            <div class="boot-line" style="animation-delay: 0.2s;">[SYSTEM] Decrypting temporal coordinates...</div>
            <div class="boot-line" style="animation-delay: 0.3s;">[SYSTEM] Establishing neural link...</div>
            <div class="boot-line" style="animation-delay: 0.4s;">[SYSTEM] Calibrating reality filters...</div>
            <div class="boot-line" style="animation-delay: 0.45s;">[PRIVACY] No data collection - All processing local only</div>
            <div class="boot-line" style="animation-delay: 0.5s;">[OK] Systems operational</div>
            <div class="boot-line" style="animation-delay: 0.7s;"><br></div>
            <div class="boot-line" style="animation-delay: 0.8s;">[WARNING] Classified material detected</div>
            <div class="boot-line" style="animation-delay: 0.9s;">[WARNING] Clearance level required</div>
            
            <div class="boot-title glitch" style="animation-delay: 1.2s;">PROJECT BIFURCATION</div>
            
            <div class="access-prompt">
                <input 
                    type="text" 
                    class="access-input" 
                    id="accessCode" 
                    placeholder="ENTER ACCESS CODE"
                    autocomplete="off"
                />
                <button class="access-button" id="accessButton">
                    ACCESS >>
                </button>
                <div class="access-hint">HINT: The number of years humanity must survive (three digits)</div>
            </div>
        </div>

        <!-- Introduction/Prelude Screen -->
        <div class="prelude-screen" id="preludeScreen">
            <div class="prelude-content">
                <div class="prelude-separator">‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</div>
                <h1 class="prelude-title">PRELUDE: YOU ARE HERE</h1>
                <div class="prelude-separator">‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</div>

                <p class="prelude-paragraph">
                    You were born in a moment that will never repeat.
                </p>

                <p class="prelude-paragraph">
                    Not in the poetic sense. In the literal, mathematical, cosmological sense.
                </p>

                <p class="prelude-paragraph">
                    Between <strong style="color: var(--danger);">1945</strong> ‚Äî when humanity gained the power to destroy itself ‚Äî and <strong style="color: var(--primary);">~2500</strong> ‚Äî when we might gain the power to survive indefinitely ‚Äî exists a window of <strong style="color: var(--accent);">555 years</strong>.
                </p>

                <p class="prelude-paragraph center-text" style="font-size: 1.2em; color: var(--warning);">
                    A cosmic blink.
                </p>

                <p class="prelude-paragraph">
                    We are <strong style="color: var(--danger);">80 years</strong> into this window. The <strong>14.4%</strong> mark.<br>
                    The most dangerous phase.
                </p>

                <div class="prelude-separator" style="margin: 50px 0;">‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</div>

                <p class="prelude-paragraph emphasized">
                    This document will change how you see humanity's future.
                </p>

                <p class="prelude-paragraph">
                    Not because it contains hidden secrets.<br>
                    Not because it predicts the unpredictable.
                </p>

                <p class="prelude-paragraph">
                    But because it <strong style="color: var(--primary);">connects facts you already know</strong><br>
                    into a <strong style="color: var(--secondary);">pattern you haven't seen before</strong>.
                </p>

                <div class="prelude-separator" style="margin: 50px 0;">‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</div>

                <p class="prelude-paragraph emphasized">
                    The facts are simple:
                </p>

                <ul class="prelude-list">
                    <li>The Doomsday Clock is at <strong style="color: var(--danger);">90 seconds to midnight</strong></li>
                    <li>We have <strong style="color: var(--danger);">12,500+ nuclear warheads</strong> ready to launch</li>
                    <li>Global temperature is <strong style="color: var(--danger);">+1.4¬∞C</strong> and accelerating</li>
                    <li>AI development races ahead <strong style="color: var(--warning);">without safety frameworks</strong></li>
                    <li><strong style="color: var(--warning);">56 active conflicts</strong> rage across the planet</li>
                    <li>We're in the <strong style="color: var(--danger);">sixth mass extinction event</strong></li>
                </ul>

                <p class="prelude-paragraph">
                    You know all this.
                </p>

                <p class="prelude-paragraph emphasized">
                    What you don't know is what these facts mean when viewed together through the lens of <strong style="color: var(--primary);">CIVILIZATIONAL SURVIVAL THEORY</strong>.
                </p>

                <div class="prelude-separator" style="margin: 50px 0;">‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</div>

                <p class="prelude-paragraph">
                    Every species reaches a threshold.
                </p>

                <p class="prelude-paragraph">
                    The threshold where survival depends not on physical adaptation, but on <strong style="color: var(--accent);">consciousness of its own trajectory</strong>.
                </p>

                <p class="prelude-paragraph">
                    Humanity crossed that threshold in 1945.
                </p>

                <p class="prelude-paragraph">
                    Since then, we've been in what exobiologists call <strong style="color: var(--warning);">"THE CRITICAL WINDOW"</strong> ‚Äî the narrow timeframe where a technological species either:
                </p>

                <div style="margin: 30px 0; padding: 25px; background: rgba(0, 255, 65, 0.05); border-left: 4px solid var(--primary);">
                    <p style="margin: 10px 0;"><strong style="color: var(--primary);">A)</strong> Achieves stable, long-term survival, OR</p>
                    <p style="margin: 10px 0;"><strong style="color: var(--danger);">B)</strong> Self-destructs through misuse of its own power</p>
                </div>

                <p class="prelude-paragraph emphasized" style="color: var(--danger);">
                    No species has ever been observed to pass through this window successfully.
                </p>

                <p class="prelude-paragraph center-text" style="font-size: 1.1em; margin: 30px 0;">
                    That's the Fermi Paradox in one sentence.
                </p>

                <div class="prelude-separator" style="margin: 50px 0;">‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</div>

                <p class="prelude-paragraph emphasized">
                    But here's what most analyses miss:
                </p>

                <p class="prelude-paragraph">
                    <strong style="color: var(--primary);">IF</strong> we survive the next 50-500 years,<br>
                    <strong style="color: var(--primary);">IF</strong> we navigate climate collapse, nuclear war, AI emergence, and institutional failure,<br>
                    <strong style="color: var(--primary);">IF</strong> we somehow coordinate global action,
                </p>

                <p class="prelude-paragraph emphasized" style="font-size: 1.3em; color: var(--primary); margin: 30px 0;">
                    THEN ‚Äî and only then ‚Äî we face THE BIFURCATION.
                </p>

                <p class="prelude-paragraph center-text" style="font-size: 1.1em;">
                    Not a threat.<br>
                    <strong style="color: var(--accent);">A choice.</strong>
                </p>

                <p class="prelude-paragraph">
                    Two paths to cosmic-scale survival:
                </p>

                <div class="path-preview-grid">
                    <div class="path-preview matter-path">
                        <div class="path-preview-icon">‚¨°</div>
                        <div class="path-preview-label">PATH::MATTER</div>
                        <p>Orbital habitats, space colonization, biological expansion across the stars</p>
                    </div>

                    <div class="path-preview info-path">
                        <div class="path-preview-icon">‚ó¨</div>
                        <div class="path-preview-label">PATH::INFORMATION</div>
                        <p>Digital consciousness, mind uploading, post-biological existence</p>
                    </div>
                </div>

                <div style="margin: 40px 0; text-align: center; font-size: 1.1em; line-height: 1.8;">
                    <p>One preserves the <strong style="color: var(--accent);">SPECIES</strong>.</p>
                    <p>One preserves the <strong style="color: var(--secondary);">SELF</strong>.</p>
                    <br>
                    <p style="color: var(--primary);">Both are necessary.<br>Neither is sufficient alone.</p>
                </div>

                <div class="prelude-separator" style="margin: 50px 0;">‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</div>

                <p class="prelude-paragraph emphasized">
                    By the end of this document, you will understand:
                </p>

                <ul class="prelude-list" style="font-size: 1.05em;">
                    <li>Why the next <strong style="color: var(--danger);">50 years</strong> determine the next <strong style="color: var(--primary);">50,000</strong></li>
                    <li>What <strong>must change</strong> for humanity to survive</li>
                    <li>Why both paths are <strong style="color: var(--accent);">achievable with current physics</strong></li>
                    <li>Why we're currently <strong style="color: var(--danger);">failing catastrophically</strong></li>
                    <li>What the <strong style="color: var(--primary);">optimal survival strategy</strong> actually is</li>
                </ul>

                <p class="prelude-paragraph" style="margin-top: 40px;">
                    You will also discover <strong style="color: var(--secondary);">7 hidden secrets</strong> embedded in this document. Each reveals a deeper layer of understanding about humanity's cosmic trajectory.
                </p>

                <p class="prelude-paragraph center-text" style="color: var(--warning);">
                    Find them all, and you'll see the full picture.
                </p>

                <div class="prelude-separator" style="margin: 50px 0;">‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</div>

                <p class="prelude-paragraph emphasized">
                    The access code is a number.
                </p>

                <p class="prelude-paragraph">
                    It represents the critical window ‚Äî measured in years ‚Äî that humanity must survive to reach the bifurcation point.
                </p>

                <p class="prelude-paragraph center-text" style="color: var(--primary); font-size: 1.1em;">
                    If you understand what you're about to read,<br>
                    you'll understand why this specific number matters.
                </p>

                <p class="prelude-paragraph center-text" style="margin-top: 40px; font-size: 1.2em;">
                    Enter it below.
                </p>

                <div class="prelude-separator" style="margin: 50px 0;">‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</div>

                <button class="command-btn" onclick="showAccessPrompt()" style="margin: 40px auto; display: block;">
                    I'M READY ‚Üí ACCESS DOCUMENT
                </button>
            </div>
        </div>

        <!-- Main Terminal -->
        <div class="main-terminal" id="mainTerminal">

            <div class="terminal-header">
                <div class="terminal-title">CLASSIFIED DOCUMENT [BIFURCATION-001]</div>
                <div class="terminal-status">
                    <div class="status-item">
                        <div class="status-dot"></div>
                        <span>SECURE</span>
                    </div>
                    <div class="status-item">
                        <div class="status-dot" style="background: var(--accent);"></div>
                        <span>QUANTUM-ENCRYPTED</span>
                    </div>
                </div>
            </div>

            <!-- Critical Status Block -->
            <div class="data-block critical">
                <div class="block-header">
                    <span>THREAT ASSESSMENT::CURRENT</span>
                    <span class="block-id" style="color: var(--danger);">STATUS::CRITICAL</span>
                </div>
                <h2 class="block-title" style="color: var(--danger);">DOOMSDAY CLOCK: 90 SECONDS TO MIDNIGHT</h2>
                
                <div class="doomsday-clock">
                    <div class="clock-container">
                        <div class="clock-hand"></div>
                        <div class="clock-center"></div>
                        <div class="clock-label">11:58:30</div>
                    </div>
                </div>

                <div class="block-content">
                    <p style="color: var(--danger); font-size: 1.1em;">
                        As of January 2024, the Doomsday Clock stands at <strong>90 seconds to midnight</strong> ‚Äî the closest to global catastrophe it has ever been. This isn't science fiction. This is our current reality assessment.
                    </p>
                    
                    <div class="stat-grid">
                        <div class="stat-card critical">
                            <div class="stat-label">Nuclear Threat</div>
                            <div class="stat-value" style="color: var(--danger);">12,500+</div>
                            <div class="stat-description">Active nuclear warheads globally. Russia's war in Ukraine has renewed nuclear rhetoric to Cold War levels.</div>
                        </div>

                        <div class="stat-card critical">
                            <div class="stat-label">Global Temperature</div>
                            <div class="stat-value" style="color: var(--danger);">+1.4¬∞C</div>
                            <div class="stat-description">Above pre-industrial levels. 2024 marked the hottest year on record. We're approaching the 1.5¬∞C Paris Agreement limit.</div>
                        </div>

                        <div class="stat-card warning">
                            <div class="stat-label">Active Conflicts</div>
                            <div class="stat-value" style="color: var(--warning);">56</div>
                            <div class="stat-description">Major armed conflicts worldwide in 2024, including Ukraine, Gaza, Sudan, and Yemen. Highest number since WWII.</div>
                        </div>

                        <div class="stat-card warning">
                            <div class="stat-label">Displaced People</div>
                            <div class="stat-value" style="color: var(--warning);">110M+</div>
                            <div class="stat-description">Forcibly displaced worldwide due to war, persecution, and climate events. Unprecedented migration crisis.</div>
                        </div>

                        <div class="stat-card critical">
                            <div class="stat-label">AI Development</div>
                            <div class="stat-value" style="color: var(--danger);">UNREGULATED</div>
                            <div class="stat-description">Advanced AI systems racing ahead without comprehensive safety frameworks or international governance.</div>
                        </div>

                        <div class="stat-card warning">
                            <div class="stat-label">Biodiversity Loss</div>
                            <div class="stat-value" style="color: var(--warning);">69%</div>
                            <div class="stat-description">Average decline in wildlife populations since 1970. Sixth mass extinction event accelerating.</div>
                        </div>
                    </div>

                    <div class="code-quote" style="border-color: var(--danger); background: rgba(255, 51, 51, 0.05);">
                        "We are not prepared. Not for nuclear war. Not for climate collapse. Not for AI emergence. 
                        Not for pandemics. And certainly not for the convergence of all four."
                    </div>

                    <!-- DISSENTING VOICES BOX -->
                    <div style="margin: 50px 0; padding: 30px; background: rgba(0, 212, 255, 0.05); border: 2px solid var(--accent); position: relative;">
                        <div style="position: absolute; top: -15px; left: 20px; background: var(--darker); padding: 0 15px; color: var(--accent); font-family: 'Orbitron', monospace; font-weight: 700; letter-spacing: 2px;">
                            ‚öñ DISSENTING VOICES
                        </div>
                        
                        <h3 style="color: var(--accent); margin: 20px 0 15px; font-size: 1.3em;">THE OPTIMIST'S COUNTER-ARGUMENT</h3>
                        
                        <p style="font-size: 1.05em; line-height: 1.8; margin: 15px 0;">
                            <strong>Steven Pinker</strong> (Harvard psychologist) argues in <em>"Enlightenment Now"</em> that we're living in the most peaceful, prosperous, and safe era in human history. Violence has declined 90% since medieval times. Life expectancy doubled. Poverty plummeted from 90% to 10% globally.
                        </p>

                        <p style="font-size: 1.05em; line-height: 1.8; margin: 15px 0;">
                            <strong>The Doomsday Clock has been "minutes to midnight" for 70 years.</strong> In 1953 it was at 2 minutes (hydrogen bomb testing). In 1962, Cuban Missile Crisis brought us closer to nuclear war than today. In 1983, Stanislav Petrov prevented World War III by disobeying protocol. <strong>We survived all of them.</strong>
                        </p>

                        <div style="margin: 25px 0; padding: 20px; background: rgba(0, 212, 255, 0.1); border-left: 4px solid var(--accent);">
                            <p style="font-style: italic; font-size: 1.05em; line-height: 1.7;">
                                "Every generation believes they live in uniquely dangerous times. Medieval people feared the Black Death would end humanity. Cold War kids practiced nuclear drills. Y2K was supposed to collapse civilization. We adapt. We survive. Maybe we're better at this than we think."
                            </p>
                            <p style="text-align: right; margin-top: 10px; color: var(--accent);">
                                ‚Äî Matt Ridley, <em>The Rational Optimist</em>
                            </p>
                        </div>

                        <p style="font-size: 1.05em; line-height: 1.8; margin: 15px 0;">
                            <strong>The counter-counter:</strong> Past survival doesn't guarantee future survival. Medieval people didn't have nuclear weapons. Cold War was bilateral; today's nuclear landscape is multipolar and less stable. Y2K was solved because we <em>acted</em>. The question isn't whether we <em>can</em> survive ‚Äî it's whether we <em>will choose to</em>.
                        </p>

                        <p style="margin-top: 20px; font-size: 0.95em; color: rgba(0, 212, 255, 0.7);">
                            <strong>Sources:</strong> Pinker (2018), <em>Bulletin of Atomic Scientists</em>, Ord (2020) <em>The Precipice</em>
                        </p>
                    </div>
                </div>
            </div>

            <!-- Paradox Block -->
            <div class="data-block warning">
                <div class="block-header">
                    <span>ANALYSIS::CIVILIZATIONAL_PARADOXES</span>
                    <span class="block-id">PRIORITY::HIGH</span>
                </div>
                <h2 class="block-title" style="color: var(--warning);">THE CONTEMPORARY PARADOXES</h2>
                
                <div class="block-content">
                    <p>
                        Humanity in 2024 faces unprecedented contradictions between capability and action, knowledge and implementation, technology and wisdom. We possess the tools for salvation and destruction in equal measure ‚Äî yet we deploy neither with coherent purpose.
                    </p>

                    <div class="paradox-box">
                        <h3 style="color: var(--warning); margin-bottom: 15px;">PARADOX::KNOWLEDGE</h3>
                        <p>We understand climate science with 99%+ scientific consensus, yet global CO‚ÇÇ emissions hit record highs in 2024 (37.4 billion tons). We know what must be done. We choose not to do it.</p>
                        <table class="comparison-table" style="margin-top: 20px; font-size: 0.9em;">
                            <thead>
                            <tr>
                                <th>What We Know</th>
                                <th>What We're Doing</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td data-label="What We Know">Need to peak emissions by 2025</td>
                                <td data-label="What We're Doing">Emissions still rising (+1.1% in 2024)</td>
                            </tr>
                            <tr>
                                <td data-label="What We Know">Coal must be phased out by 2030</td>
                                <td data-label="What We're Doing">New coal plants approved in Asia</td>
                            </tr>
                            <tr>
                                <td data-label="What We Know">Need $4 trillion/year for transition</td>
                                <td data-label="What We're Doing">Spending $7 trillion/year on fossil fuel subsidies</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="paradox-box">
                        <h3 style="color: var(--warning); margin-bottom: 15px;">PARADOX::TECHNOLOGY</h3>
                        <p>We develop AI that can pass the bar exam, write code, and generate photorealistic images ‚Äî yet we can't coordinate international cooperation to regulate it. We build tools that could revolutionize medicine, education, and science, but we primarily use them for engagement optimization and targeted advertising.</p>
                        <ul class="path-specs" style="margin-top: 15px;">
                            <li>$1 trillion spent on AI development with minimal safety research</li>
                            <li>Generative AI accelerates while climate tech remains underfunded 10:1</li>
                            <li>Social media algorithms optimized for division, not understanding</li>
                            <li>Quantum computing advances toward breaking encryption ‚Äî no quantum-safe infrastructure ready</li>
                        </ul>
                    </div>

                    <div class="paradox-box">
                        <h3 style="color: var(--warning); margin-bottom: 15px;">PARADOX::RESOURCES</h3>
                        <p>Global wealth reached $454 trillion in 2024. Billionaire wealth grew 34% since 2020. Yet we claim we "can't afford" to prevent civilizational collapse.</p>
                        <table class="comparison-table" style="margin-top: 20px; font-size: 0.9em;">
                            <thead>
                            <tr>
                                <th>Annual Spending</th>
                                <th>Amount</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td data-label="Annual Spending">Global military expenditure</td>
                                <td data-label="Amount" style="color: var(--danger);">$2.4 trillion</td>
                            </tr>
                            <tr>
                                <td data-label="Annual Spending">Fossil fuel subsidies</td>
                                <td data-label="Amount" style="color: var(--danger);">$7 trillion</td>
                            </tr>
                            <tr>
                                <td data-label="Annual Spending">Luxury goods market</td>
                                <td data-label="Amount" style="color: var(--warning);">$1.5 trillion</td>
                            </tr>
                            <tr>
                                <td data-label="Annual Spending">Climate adaptation funding</td>
                                <td data-label="Amount" style="color: var(--primary);">$63 billion</td>
                            </tr>
                            <tr>
                                <td data-label="Annual Spending">Pandemic preparedness</td>
                                <td data-label="Amount" style="color: var(--primary);">$10 billion</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="paradox-box">
                        <h3 style="color: var(--warning); margin-bottom: 15px;">PARADOX::ATTENTION</h3>
                        <p>We obsess over quarterly earnings, celebrity scandals, and social media trends while existential threats accumulate in the background. The urgent crowds out the important. The trivial dominates discourse while civilization teeters.</p>
                        <p style="margin-top: 15px;">
                            In 2024, <span class="encrypted-text" onclick="decrypt(this, 'TikTok videos received 8 trillion views')">‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà</span> 
                            while scientific papers on climate solutions garnered 0.001% of that attention.
                        </p>
                    </div>

                    <div class="code-quote">
                        "We are the first species capable of understanding our own extinction. 
                        We may also be the first capable of choosing it through sheer negligence."
                    </div>
                </div>
            </div>

            <!-- Critical Window Block -->
            <div class="data-block critical">
                <div class="block-header">
                    <span>TEMPORAL ANALYSIS::CRITICAL_WINDOW</span>
                    <span class="block-id" style="color: var(--danger);">URGENCY::MAXIMUM</span>
                </div>
                <h2 class="block-title" style="color: var(--danger);">WHY 500 YEARS? WHY NOW?</h2>
                
                <div class="block-content">
                    <p style="font-size: 1.2em; color: var(--danger);">
                        The next 500 years are not arbitrary. They represent the critical window where humanity either achieves stability or collapses into cascading failures. Here's why:
                    </p>

                    <div style="margin: 30px 0; padding: 25px; background: rgba(255, 51, 51, 0.1); border-left: 4px solid var(--danger);">
                        <h3 style="color: var(--danger); margin-bottom: 15px;">THE CONVERGENCE POINT</h3>
                        <p>Multiple existential threats are converging in the same narrow timeframe:</p>
                        <ul class="path-specs" style="margin-top: 15px;">
                            <li><strong>Climate Tipping Points (2025-2100):</strong> Irreversible changes to Earth systems approaching</li>
                            <li><strong>AI Singularity Window (2027-2045):</strong> Artificial General Intelligence development timeline</li>
                            <li><strong>Nuclear Proliferation Crisis (2024-2040):</strong> More nations acquiring weapons, deteriorating treaties</li>
                            <li><strong>Resource Depletion (2040-2100):</strong> Critical minerals, water, arable land reaching limits</li>
                            <li><strong>Demographic Collapse (2030-2080):</strong> Aging populations, fertility crisis in developed nations</li>
                            <li><strong>Ecosystem Collapse (2025-2100):</strong> Biodiversity loss accelerating, food web disruption</li>
                        </ul>
                    </div>

                    <h3 style="color: var(--primary); margin: 40px 0 20px;">WHERE WE ARE VS. WHERE WE NEED TO BE</h3>
                    
                    <table class="comparison-table">
                        <thead>
                        <tr>
                            <th>Technology Level</th>
                            <th>Current State (2024)</th>
                            <th>Needed for Bifurcation</th>
                            <th>Gap</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td data-label="Technology Level">Space Infrastructure</td>
                            <td data-label="Current State (2024)">ISS, few satellites</td>
                            <td data-label="Needed for Bifurcation">Orbital habitats, lunar base</td>
                            <td data-label="Gap" style="color: var(--danger);">~100 years behind</td>
                        </tr>
                        <tr>
                            <td data-label="Technology Level">Energy Systems</td>
                            <td data-label="Current State (2024)">80% fossil fuels</td>
                            <td data-label="Needed for Bifurcation">100% renewable, fusion power</td>
                            <td data-label="Gap" style="color: var(--danger);">~75 years behind</td>
                        </tr>
                        <tr>
                            <td data-label="Technology Level">AI/Computing</td>
                            <td data-label="Current State (2024)">Narrow AI, early AGI</td>
                            <td data-label="Needed for Bifurcation">Aligned AGI, brain uploading</td>
                            <td data-label="Gap" style="color: var(--warning);">~50 years behind</td>
                        </tr>
                        <tr>
                            <td data-label="Technology Level">Biotech</td>
                            <td data-label="Current State (2024)">CRISPR, mRNA vaccines</td>
                            <td data-label="Needed for Bifurcation">Complete genomic control, synthetic life</td>
                            <td data-label="Gap" style="color: var(--warning);">~60 years behind</td>
                        </tr>
                        <tr>
                            <td data-label="Technology Level">Global Governance</td>
                            <td data-label="Current State (2024)">UN, fragmented nations</td>
                            <td data-label="Needed for Bifurcation">Coordinated planetary management</td>
                            <td data-label="Gap" style="color: var(--danger);">~150 years behind</td>
                        </tr>
                        <tr>
                            <td data-label="Technology Level">Consciousness Tech</td>
                            <td data-label="Current State (2024)">Basic BCIs, limited understanding</td>
                            <td data-label="Needed for Bifurcation">Full mind uploading, digital consciousness</td>
                            <td data-label="Gap" style="color: var(--danger);">~200 years behind</td>
                        </tr>
                        </tbody>
                    </table>

                    <div style="margin: 40px 0; padding: 30px; background: rgba(255, 170, 0, 0.1); border: 2px solid var(--warning);">
                        <h3 style="color: var(--warning); margin-bottom: 20px; font-size: 1.5em;">THE BRUTAL MATH</h3>
                        <p style="font-size: 1.1em; line-height: 1.8;">
                            If we continue current trajectory:<br>
                            ‚Ä¢ Climate feedback loops activate by <strong style="color: var(--danger);">2040-2060</strong><br>
                            ‚Ä¢ Agricultural collapse begins <strong style="color: var(--danger);">2050-2070</strong><br>
                            ‚Ä¢ Mass migration waves exceed system capacity <strong style="color: var(--danger);">2040-2080</strong><br>
                            ‚Ä¢ Democratic institutions fail under climate stress <strong style="color: var(--danger);">2050-2100</strong><br>
                            ‚Ä¢ Civilization fragmentation accelerates <strong style="color: var(--danger);">2080-2150</strong><br>
                            <br>
                            <strong style="color: var(--danger); font-size: 1.2em;">
                            We don't have 500 years of current behavior. We have maybe 50 years to fundamentally change course.
                            </strong>
                        </p>
                    </div>

                    <div class="code-quote" style="border-color: var(--danger);">
                        "The Sun isn't the problem ‚Äî it won't become a red giant for 5 billion years. 
                        The problem is surviving the next 500 years with our current level of wisdom, 
                        governance, and foresight. Right now, we're failing that test catastrophically."
                    </div>
                </div>
            </div>

            <!-- INTERACTIVE TIMELINE SECTION -->
            <div class="data-block" style="border-color: var(--accent);">
                <div class="block-header">
                    <span>INTERACTIVE::MODULE_1</span>
                    <span class="block-id" style="color: var(--accent);">VISUALIZATION::TEMPORAL</span>
                </div>
                <h2 class="block-title" style="color: var(--accent);">‚è≥ THE 500-YEAR TIMELINE</h2>

                <div class="block-content">
                    <p style="font-size: 1.1em; margin-bottom: 30px;">
                        Explore the critical events from 1945 to 2500. <strong>Scroll horizontally</strong> or <strong>click/tap events</strong> for details.
                    </p>

                    <div id="timelineContainer" style="position: relative; width: 100%; height: 500px; background: rgba(0, 0, 0, 0.3); border: 2px solid var(--accent); overflow: hidden; cursor: grab;">
                        <canvas id="timelineCanvas" style="display: block;"></canvas>
                        
                        <!-- Timeline Controls -->
                        <div style="position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); display: flex; gap: 15px; z-index: 10;">
                            <button class="command-btn" onclick="timelineZoomIn()" style="padding: 10px 20px; font-size: 0.9em;">
                                ZOOM IN [+]
                            </button>
                            <button class="command-btn" onclick="timelineZoomOut()" style="padding: 10px 20px; font-size: 0.9em;">
                                ZOOM OUT [-]
                            </button>
                            <button class="command-btn" onclick="timelineReset()" style="padding: 10px 20px; font-size: 0.9em;">
                                RESET VIEW
                            </button>
                        </div>

                        <!-- Event Detail Popup -->
                        <div id="timelinePopup" style="display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(10, 14, 39, 0.98); border: 2px solid var(--primary); padding: 25px; max-width: 500px; z-index: 20; box-shadow: 0 0 40px rgba(0, 255, 65, 0.4);">
                            <button onclick="closeTimelinePopup()" style="position: absolute; top: 10px; right: 10px; background: none; border: none; color: var(--primary); font-size: 24px; cursor: pointer; font-family: 'Share Tech Mono', monospace;">&times;</button>
                            <h3 id="popupTitle" style="color: var(--primary); margin-bottom: 15px; font-family: 'Orbitron', monospace;"></h3>
                            <div id="popupYear" style="color: var(--accent); font-size: 1.2em; margin-bottom: 10px;"></div>
                            <p id="popupDescription" style="line-height: 1.7; margin-bottom: 15px;"></p>
                            <div id="popupImpact" style="padding: 15px; background: rgba(0, 255, 65, 0.05); border-left: 3px solid var(--primary); font-size: 0.95em;"></div>
                        </div>
                    </div>

                    <!-- Timeline Legend -->
                    <div style="margin-top: 25px; padding: 20px; background: rgba(0, 212, 255, 0.05); border-left: 3px solid var(--accent);">
                        <h4 style="color: var(--accent); margin-bottom: 15px;">Legend:</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <div style="width: 20px; height: 20px; background: var(--danger); border-radius: 50%;"></div>
                                <span>Existential Threats</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <div style="width: 20px; height: 20px; background: var(--warning); border-radius: 50%;"></div>
                                <span>Critical Decisions</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <div style="width: 20px; height: 20px; background: var(--primary); border-radius: 50%;"></div>
                                <span>Technological Milestones</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <div style="width: 20px; height: 20px; background: var(--accent); border-radius: 50%;"></div>
                                <span>Space Expansion</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <div style="width: 20px; height: 20px; background: var(--secondary); border-radius: 50%;"></div>
                                <span>Digital Consciousness</span>
                            </div>
                        </div>
                    </div>

                    <p style="margin-top: 25px; font-size: 0.95em; color: rgba(0, 212, 255, 0.7);">
                        <strong>Note:</strong> Future events are projections based on current technological trajectories and historical precedent. Actual timeline may vary significantly based on decisions made in the next 50 years.
                    </p>
                </div>
            </div>

            <!-- Prelude Block -->
            <div class="data-block">
                <div class="block-header">
                    <span>SECTION::I</span>
                    <span class="block-id">CLASSIFICATION::OVERVIEW</span>
                </div>
                <h2 class="block-title">PRELUDE: HUMANITY AT THE THRESHOLD</h2>
                <div class="block-content">
                    <p>
                        Every species reaches a moment when survival no longer depends on <span class="encrypted-text" onclick="decrypt(this, 'physical strength')">‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà</span>, but on consciousness of its own destiny.
                    </p>
                    <p>
                        Humanity, in this fragile epoch, stands before a cosmic fork: survive the next five hundred years, or dissolve before understanding its deeper nature.
                    </p>
                    <p>
                        The challenge isn't the Sun becoming a red giant in billions of years. The challenge is our capacity not to destroy ourselves first. If we manage to sustain a stable civilization through this critical window, two paths will open before us: <strong style="color: var(--accent);">one material</strong>, <strong style="color: var(--secondary);">one informational</strong>.
                    </p>
                    <div class="code-quote">
                        "We are not threatened by the heat death of the universe. 
                        We are threatened by our inability to cooperate long enough to become a Type I civilization."
                    </div>
                </div>
            </div>

            <!-- Two Paths Block -->
            <div class="data-block">
                <div class="block-header">
                    <span>SECTION::II</span>
                    <span class="block-id">CLASSIFICATION::TOP_SECRET</span>
                </div>
                <h2 class="block-title">ARCHITECTURE OF THE BIFURCATION</h2>
                
                <div class="path-matrix">
                    <div class="path-node matter" onclick="activatePath('matter')">
                        <span class="path-icon">‚¨°</span>
                        <div class="path-label" style="color: var(--accent);">PATH::MATTER</div>
                        <p>Orbital cities and metallic civilization. Extension of the human habitat beyond planetary boundaries.</p>
                        <ul class="path-specs">
                            <li>Artificial gravity via rotation</li>
                            <li>Closed self-sufficient ecosystems</li>
                            <li>Independence from Earth's biosphere</li>
                            <li>Distributed multi-node redundancy</li>
                        </ul>
                        <div style="margin-top: 20px; padding: 15px; background: rgba(0, 212, 255, 0.1); border-left: 3px solid var(--accent);">
                            <strong>This path extends what we already do:</strong> build, inhabit, control environment. 
                            It doesn't transform our nature ‚Äî it prolongs it by constructing new homes in the void.
                        </div>
                    </div>

                    <div class="path-node information" onclick="activatePath('information')">
                        <span class="path-icon">‚ó¨</span>
                        <div class="path-label" style="color: var(--secondary);">PATH::INFORMATION</div>
                        <p>Consciousness in the cloud, bodies as devices. Transformation of the mind's substrate.</p>
                        <ul class="path-specs">
                            <li>Mental processes in spatial servers</li>
                            <li>Preserved subjective continuity</li>
                            <li>Bodies as modular interfaces</li>
                            <li>Death = disconnection, not termination</li>
                        </ul>
                        <div style="margin-top: 20px; padding: 15px; background: rgba(255, 0, 128, 0.1); border-left: 3px solid var(--secondary);">
                            <strong>This path is more radical:</strong> not building habitats, but transforming minds. 
                            Consciousness becomes distributed process, capable of incarnating in synthetic forms.
                        </div>
                    </div>
                </div>

                <div class="block-content" style="margin-top: 40px;">
                    <h3 style="color: var(--primary); margin-bottom: 20px;">TECHNOLOGICAL REQUIREMENTS</h3>
                    
                    <table class="comparison-table">
                        <thead>
                        <tr>
                            <th>Capability</th>
                            <th>PATH::MATTER</th>
                            <th>PATH::INFORMATION</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td data-label="Capability">Primary Challenge</td>
                            <td data-label="PATH::MATTER">Energy generation at scale</td>
                            <td data-label="PATH::INFORMATION">Consciousness mapping & substrate</td>
                        </tr>
                        <tr>
                            <td data-label="Capability">Timeline to Viability</td>
                            <td data-label="PATH::MATTER">100-200 years</td>
                            <td data-label="PATH::INFORMATION">150-300 years</td>
                        </tr>
                        <tr>
                            <td data-label="Capability">Resource Intensity</td>
                            <td data-label="PATH::MATTER">Extremely high (material)</td>
                            <td data-label="PATH::INFORMATION">High (computational)</td>
                        </tr>
                        <tr>
                            <td data-label="Capability">Preservation Target</td>
                            <td data-label="PATH::MATTER">Biological species</td>
                            <td data-label="PATH::INFORMATION">Individual consciousness</td>
                        </tr>
                        <tr>
                            <td data-label="Capability">Risk Profile</td>
                            <td data-label="PATH::MATTER">Engineering failures, asteroids</td>
                            <td data-label="PATH::INFORMATION">Identity corruption, substrate failure</td>
                        </tr>
                        <tr>
                            <td data-label="Capability">Current Progress</td>
                            <td data-label="PATH::MATTER">ISS, SpaceX (2% complete)</td>
                            <td data-label="PATH::INFORMATION">Neuralink, BCIs (0.5% complete)</td>
                        </tr>
                        </tbody>
                    </table>

                    <div class="code-quote" style="margin-top: 30px;">
                        One path prolongs our nature.<br>
                        The other <span class="encrypted-text" onclick="decrypt(this, 'TRANSCENDS')">‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà</span> it.
                    </div>

                    <!-- UNSOLVED PARADOX BOX -->
                    <div style="margin: 50px 0; padding: 30px; background: rgba(255, 170, 0, 0.05); border: 2px solid var(--warning); position: relative;">
                        <div style="position: absolute; top: -15px; left: 20px; background: var(--darker); padding: 0 15px; color: var(--warning); font-family: 'Orbitron', monospace; font-weight: 700; letter-spacing: 2px;">
                            ‚ö† UNSOLVED PARADOX
                        </div>
                        
                        <h3 style="color: var(--warning); margin: 20px 0 15px; font-size: 1.3em;">THE THIRD PATH HYPOTHESIS</h3>
                        
                        <p style="font-size: 1.05em; line-height: 1.8; margin: 15px 0;">
                            This document presents two paths: <strong>MATTER</strong> (space expansion) and <strong>INFORMATION</strong> (digital consciousness). But what if we're missing a third option?
                        </p>

                        <div style="margin: 25px 0; padding: 20px; background: rgba(255, 170, 0, 0.1);">
                            <h4 style="color: var(--warning); margin-bottom: 15px;">PATH::GAIA - Earth-Based Resilience</h4>
                            <ul style="list-style: none; padding: 0;">
                                <li style="margin: 10px 0; padding-left: 25px; position: relative;">
                                    <span style="position: absolute; left: 0; color: var(--warning);">‚ñ∏</span>
                                    <strong>Distributed redundancy ON Earth</strong> - Underground bunkers, ocean habitats, polar settlements
                                </li>
                                <li style="margin: 10px 0; padding-left: 25px; position: relative;">
                                    <span style="position: absolute; left: 0; color: var(--warning);">‚ñ∏</span>
                                    <strong>Biological enhancement without leaving</strong> - CRISPR radiation resistance, climate adaptation, longevity
                                </li>
                                <li style="margin: 10px 0; padding-left: 25px; position: relative;">
                                    <span style="position: absolute; left: 0; color: var(--warning);">‚ñ∏</span>
                                    <strong>Degrowth + High Tech</strong> - Smaller population, sustainable civilization, advanced medicine
                                </li>
                                <li style="margin: 10px 0; padding-left: 25px; position: relative;">
                                    <span style="position: absolute; left: 0; color: var(--warning);">‚ñ∏</span>
                                    <strong>Ecological integration</strong> - Rewilding 50% of Earth, circular economies, symbiotic tech
                                </li>
                            </ul>
                        </div>

                        <p style="font-size: 1.05em; line-height: 1.8; margin: 15px 0;">
                            <strong>Proponents:</strong> Kim Stanley Robinson (<em>Ministry for the Future</em>) argues that space colonization is a "tech-bro fantasy" that distracts from fixing Earth. Ecological economist Herman Daly suggests we already have all the space and resources we need ‚Äî we just distribute them catastrophically.
                        </p>

                        <div style="margin: 25px 0; padding: 20px; background: rgba(255, 51, 51, 0.05); border-left: 4px solid var(--danger);">
                            <p style="font-style: italic; font-size: 1.05em; line-height: 1.7; color: rgba(255, 51, 51, 0.9);">
                                <strong>The Problem:</strong> This assumes Earth remains habitable. One asteroid, one supervolcano, one gamma-ray burst ‚Äî and PATH::GAIA becomes PATH::EXTINCTION. Distributed Earth habitats don't protect against planet-scale catastrophes. This isn't pessimism. It's orbital mechanics.
                            </p>
                        </div>

                        <p style="font-size: 1.05em; line-height: 1.8; margin: 15px 0;">
                            <strong>The synthesis?</strong> Perhaps all three paths simultaneously:
                        </p>
                        <ul style="list-style: none; padding: 0; margin: 20px 0;">
                            <li style="margin: 8px 0; padding-left: 30px; position: relative;">
                                <span style="position: absolute; left: 0; color: var(--accent);">‚¨°</span>
                                <strong style="color: var(--accent);">MATTER</strong> for species-level resilience against cosmic threats
                            </li>
                            <li style="margin: 8px 0; padding-left: 30px; position: relative;">
                                <span style="position: absolute; left: 0; color: var(--secondary);">‚ó¨</span>
                                <strong style="color: var(--secondary);">INFORMATION</strong> for individual immortality and substrate flexibility
                            </li>
                            <li style="margin: 8px 0; padding-left: 30px; position: relative;">
                                <span style="position: absolute; left: 0; color: var(--warning);">‚óâ</span>
                                <strong style="color: var(--warning);">GAIA</strong> for immediate survival and ecological wisdom
                            </li>
                        </ul>

                        <p style="margin-top: 25px; font-size: 0.95em; color: rgba(255, 170, 0, 0.7);">
                            <strong>Further Reading:</strong> Robinson (2020) <em>Ministry for the Future</em>, Daly (2014) <em>From Uneconomic Growth to Steady-State Economy</em>, Musk vs. Robinson debate (2023)
                        </p>
                    </div>
                </div>
            </div>

            <!-- Body in Future Block -->
            <div class="data-block">
                <div class="block-header">
                    <span>SECTION::III</span>
                    <span class="block-id">PROTOCOL::SOMA_ANALYSIS</span>
                </div>
                <h2 class="block-title">THE BODY IN THE FUTURE</h2>
                
                <div class="hex-grid">
                    <div class="hex-container" id="bodyHex"></div>
                </div>

                <div class="block-content">
                    <p>
                        In <strong style="color: var(--accent);">PATH::MATTER</strong>, the body remains central but no longer bound to a planet. It adapts to microgravity, radiation, closed ecosystems ‚Äî but remains fundamentally biological.
                    </p>
                    <p>
                        In <strong style="color: var(--secondary);">PATH::INFORMATION</strong>, the body becomes:
                    </p>
                    <ul class="path-specs">
                        <li>A peripheral I/O device</li>
                        <li>A temporary interface</li>
                        <li>A means to manipulate physical substrate</li>
                        <li>An optional component of experience</li>
                    </ul>

                    <div style="margin: 30px 0; padding: 25px; background: rgba(0, 212, 255, 0.05); border-left: 4px solid var(--accent);">
                        <h3 style="color: var(--accent); margin-bottom: 15px;">MATTER PATH: Body Evolution</h3>
                        <p>Genetic engineering for space adaptation. Radiation resistance. Bone density preservation. Enhanced metabolism for closed-loop ecosystems. The body remains the vessel, but optimized for environments never encountered in our evolutionary history.</p>
                        <p style="margin-top: 15px;">
                            <strong>Status:</strong> CRISPR gene editing advancing. Space medicine understanding improving. 
                            Still decades from deliberate human modification for off-world survival.
                        </p>
                    </div>

                    <div style="margin: 30px 0; padding: 25px; background: rgba(255, 0, 128, 0.05); border-left: 4px solid var(--secondary);">
                        <h3 style="color: var(--secondary); margin-bottom: 15px;">INFORMATION PATH: Body Dissolution</h3>
                        <p>Brain-computer interfaces achieving bidirectional bandwidth. Neural patterns mapped and externalized. Consciousness migrating from wetware to hardware. The body becomes one of many possible instantiations ‚Äî biological, mechanical, virtual, distributed.</p>
                        <p style="margin-top: 15px;">
                            <strong>Status:</strong> BCIs at 1000s of neurons. Need billions. Understanding of consciousness 
                            still primitive. Whole brain emulation still theoretical. Multiple breakthroughs required.
                        </p>
                    </div>

                    <div class="code-quote">
                        Identity no longer coincides with flesh,<br>
                        but with the <span class="encrypted-text" onclick="decrypt(this, 'PROCESS')">‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà</span> 
                        that persists beyond it.
                    </div>
                </div>
            </div>

            <!-- Semi-Definitive Survival Block -->
            <div class="data-block">
                <div class="block-header">
                    <span>SECTION::IV</span>
                    <span class="block-id">ANALYSIS::IMMORTALITY_PROTOCOLS</span>
                </div>
                <h2 class="block-title">SEMI-DEFINITIVE SURVIVAL: WHAT IT MEANS</h2>

                <div class="timeline-graph">
                    <div class="timeline-axis"></div>
                    
                    <div class="timeline-node">
                        <div class="timeline-marker"></div>
                        <div class="timeline-content" style="border-color: var(--accent);">
                            <h3 style="color: var(--accent); margin-bottom: 15px;">PATH::MATTER</h3>
                            <p>Quasi-immortality of the <strong>BIOLOGICAL SPECIES</strong>:</p>
                            <ul class="path-specs">
                                <li>Redundant habitats across solar system</li>
                                <li>Independence from single planetary catastrophe</li>
                                <li>Galactic distribution potential</li>
                                <li>Species survives even if Earth doesn't</li>
                            </ul>
                            <p style="margin-top: 15px; font-size: 0.9em; color: rgba(0, 212, 255, 0.7);">
                                <strong>Failure modes:</strong> Coordinated asteroid impacts, gamma-ray bursts, 
                                supernova proximity, cosmic catastrophes. Probability over 10,000 years: ~15%
                            </p>
                        </div>
                    </div>

                    <div class="timeline-node">
                        <div class="timeline-marker" style="background: var(--secondary);"></div>
                        <div class="timeline-content" style="border-color: var(--secondary);">
                            <h3 style="color: var(--secondary); margin-bottom: 15px;">PATH::INFORMATION</h3>
                            <p>Quasi-immortality of <strong>CONSCIOUSNESS</strong>:</p>
                            <ul class="path-specs">
                                <li>Post-biological survival</li>
                                <li>Continuity of self beyond body death</li>
                                <li>Modular incarnation across substrates</li>
                                <li>Individual persists even if biology doesn't</li>
                            </ul>
                            <p style="margin-top: 15px; font-size: 0.9em; color: rgba(255, 0, 128, 0.7);">
                                <strong>Failure modes:</strong> Data corruption, substrate collapse, 
                                identity fragmentation, philosophical dissolution. Probability over 10,000 years: ~25%
                            </p>
                        </div>
                    </div>
                </div>

                <div class="block-content" style="margin-top: 50px;">
                    <div class="code-quote" style="text-align: center;">
                        Each path protects a different aspect of humanity:<br>
                        <strong style="color: var(--accent);">ONE PRESERVES THE SPECIES</strong> | 
                        <strong style="color: var(--secondary);">THE OTHER THE SUBJECT</strong>
                    </div>

                    <div style="margin: 40px 0; padding: 30px; background: rgba(0, 255, 65, 0.05); border: 2px solid var(--primary);">
                        <h3 style="color: var(--primary); margin-bottom: 20px;">THE OPTIMAL STRATEGY: BOTH</h3>
                        <p style="font-size: 1.1em; line-height: 1.8;">
                            Neither path alone guarantees survival. The most resilient future is one where 
                            humanity pursues <strong>BOTH SIMULTANEOUSLY</strong>:
                        </p>
                        <ul class="path-specs" style="margin-top: 20px; font-size: 1.05em;">
                            <li><strong style="color: var(--accent);">Material redundancy</strong> ensures no single catastrophe can end us</li>
                            <li><strong style="color: var(--secondary);">Informational transcendence</strong> ensures individuals can survive body death</li>
                            <li>Biological humans in orbital habitats with consciousness backup capability</li>
                            <li>Digital consciousnesses with option to incarnate in biological or synthetic forms</li>
                            <li>Distributed existence across multiple substrates and locations</li>
                            <li>Redundancy at species AND individual level</li>
                        </ul>
                        <p style="margin-top: 20px; font-size: 1.1em; color: var(--primary);">
                            This dual-path strategy reduces extinction probability from ~40% over 10,000 years 
                            to less than 5%. <strong>We hedge against both physical and informational catastrophes.</strong>
                        </p>
                    </div>
                </div>
            </div>

            <!-- Universality Block -->
            <div class="data-block">
                <div class="block-header">
                    <span>SECTION::V</span>
                    <span class="block-id">PROJECTION::UNIVERSAL</span>
                </div>
                <h2 class="block-title">UNIVERSALITY AND INFINITY</h2>
                
                <div class="block-content">
                    <p>
                        If humanity survives the next five hundred years, these two paths won't be utopias ‚Äî they'll be <strong>evolutionary directions</strong>. The question isn't whether to pursue them, but whether we'll survive long enough to make that choice meaningful.
                    </p>

                    <div style="margin: 50px 0; text-align: center;">
                        <p style="font-size: 1.4em; margin: 25px 0; color: var(--accent); line-height: 1.8;">
                            The material path creates a <strong>SOLID CIVILIZATION</strong><br>
                            like a constellation of worlds distributed across space and time.
                        </p>
                        <p style="font-size: 1.4em; margin: 25px 0; color: var(--secondary); line-height: 1.8;">
                            The informational path creates a <strong>FLUID CIVILIZATION</strong><br>
                            like a network of minds transcending physical limitation.
                        </p>
                    </div>

                    <div class="ascii-art">
    ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
    ‚ïë  PATH::MATTER      ‚Üí  DISTRIBUTED LONGEVITY              ‚ïë
    ‚ïë  PATH::INFORMATION ‚Üí  POST-BIOLOGICAL EXISTENCE          ‚ïë
    ‚ïë                                                           ‚ïë
    ‚ïë  TOGETHER          ‚Üí  EXTINCTION PROBABILITY ‚âà 0         ‚ïë
    ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
                    </div>

                    <div style="margin: 50px 0; padding: 30px; background: rgba(0, 255, 65, 0.08); border-left: 5px solid var(--primary);">
                        <h3 style="color: var(--primary); font-size: 1.6em; margin-bottom: 20px;">THE SCALE OF POSSIBILITY</h3>
                        <p style="font-size: 1.15em; line-height: 1.9;">
                            A Kardashev Type I civilization (planetary energy mastery) could support:<br>
                            ‚Ä¢ 10+ billion humans in orbital habitats<br>
                            ‚Ä¢ Computational substrate for 10 trillion digital consciousnesses<br>
                            ‚Ä¢ Complete redundancy against planetary catastrophes<br>
                            <br>
                            A Type II civilization (stellar energy mastery) could support:<br>
                            ‚Ä¢ 100 trillion biological humans across solar system<br>
                            ‚Ä¢ 10^18 digital consciousnesses in Dyson sphere computing<br>
                            ‚Ä¢ Interstellar expansion capability<br>
                            <br>
                            <strong style="color: var(--primary); font-size: 1.2em;">
                            We're Type 0.73. We haven't even achieved Type I yet. The gap between 
                            us and true cosmic survival isn't just technological ‚Äî it's civilizational.
                            </strong>
                        </p>
                    </div>

                    <div class="code-quote" style="border-color: var(--primary); font-size: 1.2em;">
                        One makes us long-lived.<br>
                        The other makes us post-biological.<br>
                        <strong style="color: var(--primary);">Together, they make us resilient to the cosmos itself.</strong>
                    </div>
                </div>
            </div>

            <!-- NEW SECTION: VOICES FROM THE MARGINS -->
            <div class="data-block" style="border-color: var(--accent);">
                <div class="block-header">
                    <span>SECTION::INTERLUDE</span>
                    <span class="block-id" style="color: var(--accent);">CLASSIFICATION::GROUND_TRUTH</span>
                </div>
                <h2 class="block-title" style="color: var(--accent);">VOICES FROM THE MARGINS</h2>

                <div class="block-content">
                    <p style="font-size: 1.2em; line-height: 1.8; margin-bottom: 30px;">
                        While we theorize about 500-year windows and cosmic survival, millions of people are <strong>already living the collapse</strong>. Climate change isn't a future threat for them ‚Äî it's Tuesday.
                    </p>

                    <div style="margin: 40px 0; padding: 30px; background: rgba(0, 212, 255, 0.05); border-left: 4px solid var(--accent);">
                        <h3 style="color: var(--accent); font-size: 1.4em; margin-bottom: 20px;">üèùÔ∏è KIRIBATI: THE FIRST NATION TO DROWN</h3>
                        <p style="font-size: 1.05em; line-height: 1.8;">
                            <strong>Anote Tong</strong>, former president of Kiribati (Pacific island nation, 110,000 people):
                        </p>
                        <div style="margin: 20px 0; padding: 20px; background: rgba(0, 212, 255, 0.1); font-style: italic;">
                            <p style="font-size: 1.1em; line-height: 1.9;">
                                "We don't need climate models. We see it every day. Our wells are filling with salt water. Our crops are dying. Our islands are shrinking. By 2050, Kiribati will be uninhabitable. Where do my people go? We've lived here for 3,000 years. Now we're purchasing land in Fiji as 'migration with dignity.'"
                            </p>
                            <p style="text-align: right; margin-top: 15px; color: var(--accent); font-style: normal;">
                                ‚Äî Interview with <em>The Guardian</em>, 2023
                            </p>
                        </div>
                        <p style="font-size: 1.05em; line-height: 1.8; margin-top: 20px;">
                            <strong>Reality check:</strong> Sea level rise of +1.1 meters by 2100 (IPCC conservative estimate) makes 48 island nations partially or fully uninhabitable. That's <strong>65 million climate refugees</strong> from islands alone. Add coastal Bangladesh, Vietnam, Florida, Netherlands ‚Äî you're looking at 200-400 million people displaced by 2100.
                        </p>
                    </div>

                    <div style="margin: 40px 0; padding: 30px; background: rgba(255, 170, 0, 0.05); border-left: 4px solid var(--warning);">
                        <h3 style="color: var(--warning); font-size: 1.4em; margin-bottom: 20px;">üåæ SAHEL: DESERTIFICATION IN REAL-TIME</h3>
                        <p style="font-size: 1.05em; line-height: 1.8;">
                            <strong>Hindou Oumarou Ibrahim</strong>, indigenous environmental activist from Chad:
                        </p>
                        <div style="margin: 20px 0; padding: 20px; background: rgba(255, 170, 0, 0.1); font-style: italic;">
                            <p style="font-size: 1.1em; line-height: 1.9;">
                                "Lake Chad has shrunk 90% since 1963. Forty million people depend on it. My people, the Mbororo, are pastoralists. We've migrated with our cattle for generations. Now there's nowhere to migrate to. The desert is expanding 1.5 kilometers per year. Wells that sustained us for centuries are dry. We're not talking about 2100. We're talking about **this year**."
                            </p>
                            <p style="text-align: right; margin-top: 15px; color: var(--warning); font-style: normal;">
                                ‚Äî TED Talk, 2019
                            </p>
                        </div>
                        <p style="font-size: 1.05em; line-height: 1.8; margin-top: 20px;">
                            <strong>Scale:</strong> The Sahel region (Mauritania to Somalia) is home to 300 million people. Desertification is accelerating: <strong>12 million hectares</strong> of productive land lost annually. This drives the migration crisis to Europe, fuels conflicts (Boko Haram, ethnic violence), and creates failed states. This isn't "future risk" ‚Äî it's current geopolitics.
                        </p>
                    </div>

                    <div style="margin: 40px 0; padding: 30px; background: rgba(255, 51, 51, 0.05); border-left: 4px solid var(--danger);">
                        <h3 style="color: var(--danger); font-size: 1.4em; margin-bottom: 20px;">üå≥ AMAZON: INDIGENOUS KNOWLEDGE VS. INDUSTRIAL COLLAPSE</h3>
                        <p style="font-size: 1.05em; line-height: 1.8;">
                            <strong>Ailton Krenak</strong>, Brazilian indigenous philosopher and environmental activist:
                        </p>
                        <div style="margin: 20px 0; padding: 20px; background: rgba(255, 51, 51, 0.1); font-style: italic;">
                            <p style="font-size: 1.1em; line-height: 1.9;">
                                "The white man thinks he can save himself by running to Mars. But he doesn't understand: you can't escape from yourself. The Amazon isn't just trees. It's a living organism. When you kill 20% of it, the whole system shifts. We're at 17% deforestation now. Three more percentage points and the rainforest becomes savanna. Forever. Indigenous peoples have maintained this forest for 11,000 years. In 50 years, industrial civilization is destroying it."
                            </p>
                            <p style="text-align: right; margin-top: 15px; color: var(--danger); font-style: normal;">
                                ‚Äî <em>Ideas to Postpone the End of the World</em>, 2020
                            </p>
                        </div>
                        <p style="font-size: 1.05em; line-height: 1.8; margin-top: 20px;">
                            <strong>Tipping point status:</strong> Amazon deforestation reached 17.1% in 2023. Scientists estimate the "point of no return" is 20-25%. Beyond that, the Amazon transitions from carbon sink (absorbs CO‚ÇÇ) to carbon source (emits CO‚ÇÇ), accelerating global warming. Loss of Amazon = loss of 10% of Earth's biodiversity + regional climate collapse + 120 billion tons of stored carbon released.
                        </p>
                    </div>

                    <div style="margin: 40px 0; padding: 30px; background: rgba(0, 255, 65, 0.08); border: 2px solid var(--primary);">
                        <h3 style="color: var(--primary); font-size: 1.4em; margin-bottom: 20px;">THE PATTERN</h3>
                        <p style="font-size: 1.1em; line-height: 1.9;">
                            Notice what these voices have in common:
                        </p>
                        <ul style="list-style: none; padding: 0; margin: 20px 0;">
                            <li style="margin: 12px 0; padding-left: 30px; position: relative; font-size: 1.05em;">
                                <span style="position: absolute; left: 0; color: var(--primary);">‚ñ∏</span>
                                They <strong>didn't cause</strong> climate change (island nations, indigenous peoples, Sahel farmers emit negligible CO‚ÇÇ)
                            </li>
                            <li style="margin: 12px 0; padding-left: 30px; position: relative; font-size: 1.05em;">
                                <span style="position: absolute; left: 0; color: var(--primary);">‚ñ∏</span>
                                They <strong>suffer first and worst</strong> (not the people theorizing in air-conditioned offices)
                            </li>
                            <li style="margin: 12px 0; padding-left: 30px; position: relative; font-size: 1.05em;">
                                <span style="position: absolute; left: 0; color: var(--primary);">‚ñ∏</span>
                                They <strong>have knowledge</strong> (sustained ecosystems for millennia while we speedrun collapse)
                            </li>
                            <li style="margin: 12px 0; padding-left: 30px; position: relative; font-size: 1.05em;">
                                <span style="position: absolute; left: 0; color: var(--primary);">‚ñ∏</span>
                                They <strong>are ignored</strong> in "serious" discussions of civilizational survival
                            </li>
                        </ul>
                        
                        <div style="margin: 30px 0; padding: 25px; background: rgba(255, 170, 0, 0.1); border-left: 4px solid var(--warning);">
                            <p style="font-size: 1.15em; line-height: 1.9; color: rgba(255, 170, 0, 0.95);">
                                <strong>Hard question:</strong> If we're planning humanity's cosmic future, whose humanity are we planning for? Who gets a seat on the orbital habitat? Who gets uploaded first? Or are PATH::MATTER and PATH::INFORMATION really just "how wealthy Westerners imagine escaping the mess they created"?
                            </p>
                        </div>

                        <p style="font-size: 1.05em; line-height: 1.8; margin-top: 20px;">
                            This document argues for <strong>species-level survival</strong>. But species are made of individuals. And right now, while we theorize about 500-year windows, <strong>real people are losing their homes, their cultures, their lives</strong>.
                        </p>

                        <p style="font-size: 1.05em; line-height: 1.8; margin-top: 20px;">
                            PATH::MATTER and PATH::INFORMATION both require we survive the next 50 years <em>without killing each other in climate wars, migration conflicts, and resource battles</em>. That means listening to the people on the front lines. Not as victims. As teachers.
                        </p>
                    </div>

                    <div class="code-quote" style="border-color: var(--accent); margin-top: 40px;">
                        "The future is already here ‚Äî it's just not evenly distributed."<br>
                        <span style="font-size: 0.9em; color: var(--accent);">‚Äî William Gibson</span>
                    </div>

                    <p style="margin-top: 30px; font-size: 0.95em; color: rgba(0, 212, 255, 0.7);">
                        <strong>Sources:</strong> IPCC AR6 (2023), <em>The Guardian</em> Pacific coverage, TED Indigenous voices, Krenak (2020), World Bank climate migration reports
                    </p>
                </div>
            </div>

            <!-- 3D GLOBE SECTION -->
            <div class="data-block" style="border-color: var(--accent);">
                <div class="block-header">
                    <span>INTERACTIVE::MODULE_4</span>
                    <span class="block-id" style="color: var(--accent);">VISUALIZATION::SPATIAL</span>
                </div>
                <h2 class="block-title" style="color: var(--accent);">üåç GLOBAL RISK MAP</h2>

                <div class="block-content">
                    <p style="font-size: 1.2em; line-height: 1.8; margin-bottom: 30px;">
                        Explore where existential risks, space infrastructure, and AI development are concentrated. <strong>Rotate the globe</strong> (click & drag) and <strong>click hotspots</strong> for details.
                    </p>

                    <div id="globeContainer" style="position: relative; width: 100%; height: 600px; background: rgba(0, 0, 0, 0.5); border: 2px solid var(--accent); overflow: hidden; cursor: grab;">
                        <canvas id="globeCanvas" style="display: block; width: 100%; height: 100%;"></canvas>
                        
                        <!-- Globe Controls -->
                        <div style="position: absolute; top: 20px; right: 20px; display: flex; flex-direction: column; gap: 10px; z-index: 10;">
                            <button class="command-btn" onclick="toggleGlobeRotation()" style="padding: 10px 15px; font-size: 0.9em;">
                                <span id="rotationBtn">‚è∏ PAUSE</span>
                            </button>
                            <button class="command-btn" onclick="resetGlobeView()" style="padding: 10px 15px; font-size: 0.9em;">
                                üîÑ RESET
                            </button>
                        </div>

                        <!-- Hotspot Info Popup -->
                        <div id="globePopup" style="display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(10, 14, 39, 0.98); border: 2px solid var(--primary); padding: 25px; max-width: 400px; z-index: 20; box-shadow: 0 0 40px rgba(0, 255, 65, 0.4);">
                            <button onclick="closeGlobePopup()" style="position: absolute; top: 10px; right: 10px; background: none; border: none; color: var(--primary); font-size: 24px; cursor: pointer; font-family: 'Share Tech Mono', monospace;">&times;</button>
                            <div id="globePopupIcon" style="font-size: 3em; text-align: center; margin-bottom: 15px;"></div>
                            <h3 id="globePopupTitle" style="color: var(--primary); margin-bottom: 10px; font-family: 'Orbitron', monospace; text-align: center;"></h3>
                            <div id="globePopupLocation" style="color: var(--accent); text-align: center; margin-bottom: 15px; font-size: 0.95em;"></div>
                            <p id="globePopupDescription" style="line-height: 1.7; margin-bottom: 15px;"></p>
                            <div id="globePopupDetails" style="padding: 15px; background: rgba(0, 255, 65, 0.05); border-left: 3px solid var(--primary); font-size: 0.95em;"></div>
                        </div>

                        <!-- Loading indicator -->
                        <div id="globeLoading" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: var(--primary); font-size: 1.2em; font-family: 'Orbitron', monospace;">
                            INITIALIZING GLOBE...
                        </div>
                    </div>

                    <!-- Globe Legend -->
                    <div style="margin-top: 25px; padding: 20px; background: rgba(0, 212, 255, 0.05); border-left: 3px solid var(--accent);">
                        <h4 style="color: var(--accent); margin-bottom: 15px;">Hotspot Categories:</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <div style="width: 20px; height: 20px; background: var(--danger); border-radius: 50%; box-shadow: 0 0 15px var(--danger);"></div>
                                <span>Nuclear Threats</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <div style="width: 20px; height: 20px; background: var(--warning); border-radius: 50%; box-shadow: 0 0 15px var(--warning);"></div>
                                <span>Climate Hotspots</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <div style="width: 20px; height: 20px; background: var(--accent); border-radius: 50%; box-shadow: 0 0 15px var(--accent);"></div>
                                <span>Space Infrastructure</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <div style="width: 20px; height: 20px; background: var(--primary); border-radius: 50%; box-shadow: 0 0 15px var(--primary);"></div>
                                <span>AI Development</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <div style="width: 20px; height: 20px; background: var(--secondary); border-radius: 50%; box-shadow: 0 0 15px var(--secondary);"></div>
                                <span>Bio Research</span>
                            </div>
                        </div>
                    </div>

                    <p style="margin-top: 25px; font-size: 0.95em; color: rgba(0, 212, 255, 0.7);">
                        <strong>Data Sources:</strong> Federation of American Scientists (nuclear), IPCC regional assessments (climate), SpaceX/NASA/ESA (space), AI Index Report 2024 (AI hubs), WHO/CDC (biosecurity).
                    </p>
                </div>
            </div>

            <!-- What Must Change Block -->
            <div class="data-block warning">
                <div class="block-header">
                    <span>SECTION::VI</span>
                    <span class="block-id">PROTOCOL::TRANSFORMATION_REQUIREMENTS</span>
                </div>
                <h2 class="block-title" style="color: var(--warning);">WHAT MUST CHANGE: THE ROADMAP</h2>

                <div class="block-content">
                    <p style="font-size: 1.2em; color: var(--warning);">
                        Understanding the bifurcation is meaningless without understanding what stands between us and survival. Here's what must fundamentally transform:
                    </p>

                    <div style="margin: 40px 0;">
                        <h3 style="color: var(--primary); margin-bottom: 20px; font-size: 1.4em;">
                            PRIORITY 1: EXISTENTIAL RISK MITIGATION (2025-2050)
                        </h3>
                        <table class="comparison-table">
                            <thead>
                            <tr>
                                <th>Threat</th>
                                <th>Current Trajectory</th>
                                <th>Required Action</th>
                                <th>Deadline</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td data-label="Threat">Climate Change</td>
                                <td data-label="Current Trajectory">+2.7¬∞C by 2100</td>
                                <td data-label="Required Action">Limit to +1.5¬∞C, rapid decarbonization</td>
                                <td data-label="Deadline" style="color: var(--danger);">2030</td>
                            </tr>
                            <tr>
                                <td data-label="Threat">Nuclear Risk</td>
                                <td data-label="Current Trajectory">Arsenal expansion, treaty decay</td>
                                <td data-label="Required Action">Radical disarmament, AI-proof command systems</td>
                                <td data-label="Deadline" style="color: var(--danger);">2035</td>
                            </tr>
                            <tr>
                                <td data-label="Threat">AI Alignment</td>
                                <td data-label="Current Trajectory">Unregulated AGI race</td>
                                <td data-label="Required Action">International governance, safety-first development</td>
                                <td data-label="Deadline" style="color: var(--danger);">2030</td>
                            </tr>
                            <tr>
                                <td data-label="Threat">Pandemic Prep</td>
                                <td data-label="Current Trajectory">Minimal investment post-COVID</td>
                                <td data-label="Required Action">Global surveillance, rapid response infrastructure</td>
                                <td data-label="Deadline" style="color: var(--warning);">2040</td>
                            </tr>
                            <tr>
                                <td data-label="Threat">Biosecurity</td>
                                <td data-label="Current Trajectory">CRISPR proliferation unchecked</td>
                                <td data-label="Required Action">Bioweapon prevention, gain-of-function moratorium</td>
                                <td data-label="Deadline" style="color: var(--danger);">2035</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                    <div style="margin: 40px 0;">
                        <h3 style="color: var(--primary); margin-bottom: 20px; font-size: 1.4em;">
                            PRIORITY 2: FOUNDATIONAL CAPABILITIES (2030-2100)
                        </h3>
                        <div class="stat-grid">
                            <div class="stat-card">
                                <div class="stat-label">Energy Transition</div>
                                <div class="stat-value" style="color: var(--primary);">100%</div>
                                <div class="stat-description">
                                    Renewable energy by 2060. Fusion power online by 2050. 
                                    Total energy generation 10x current by 2100 for space infrastructure.
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Space Access</div>
                                <div class="stat-value" style="color: var(--accent);">$100/kg</div>
                                <div class="stat-description">
                                    Reduce launch costs from $2,000/kg to $100/kg by 2040. 
                                    Make orbital construction economically viable.
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Computing Power</div>
                                <div class="stat-value" style="color: var(--secondary);">10^24 ops</div>
                                <div class="stat-description">
                                    Achieve computing capacity for whole brain emulation. 
                                    Requires 1000x improvement from 2024 levels.
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Governance</div>
                                <div class="stat-value" style="color: var(--warning);">UNIFIED</div>
                                <div class="stat-description">
                                    Coordinate planetary management. This is hardest challenge ‚Äî 
                                    technology is easier than cooperation.
                                </div>
                            </div>
                        </div>
                    </div>

                    <div style="margin: 40px 0;">
                        <h3 style="color: var(--primary); margin-bottom: 20px; font-size: 1.4em;">
                            PRIORITY 3: PARADIGM SHIFTS (2025-2075)
                        </h3>
                        <div style="padding: 25px; background: rgba(255, 170, 0, 0.1); border-left: 4px solid var(--warning);">
                            <p style="font-size: 1.1em; line-height: 1.8;">
                                <strong style="color: var(--warning);">FROM:</strong> Quarterly capitalism, nationalist competition, 
                                growth-at-all-costs, short-term thinking, zero-sum geopolitics<br><br>
                                
                                <strong style="color: var(--primary);">TO:</strong> Long-term value creation, species-level cooperation, 
                                sustainable abundance, multi-generational planning, positive-sum coordination<br><br>

                                This isn't about being idealistic. <strong>It's about survival math.</strong> 
                                You cannot build orbital habitats or achieve consciousness uploading with 
                                quarterly earnings pressure and nationalist resource competition. 
                                The physics doesn't allow it. The timescales don't align.
                            </p>
                        </div>
                    </div>

                    <div class="code-quote" style="border-color: var(--warning); background: rgba(255, 170, 0, 0.05);">
                        "We're trying to solve 100-year problems with 4-year election cycles, 
                        quarterly earnings reports, and annual budgets. This is why we're failing. 
                        The incentive structures are fundamentally misaligned with survival."
                    </div>

                    <div style="margin: 40px 0; padding: 30px; background: rgba(255, 51, 51, 0.1); border: 3px solid var(--danger);">
                        <h3 style="color: var(--danger); font-size: 1.5em; margin-bottom: 20px;">THE CENTRAL PARADOX</h3>
                        <p style="font-size: 1.15em; line-height: 1.8; color: rgba(255, 51, 51, 0.9);">
                            We possess every technical capability needed to begin the transition. 
                            We have the knowledge, the resources, the technology. <strong>What we lack 
                            is the coordination, the will, and the foresight.</strong>
                            <br><br>
                            The barrier isn't physics. It's psychology. It's institutions. It's the gap 
                            between what we know we should do and what we're actually doing.
                            <br><br>
                            <strong style="font-size: 1.2em; color: var(--danger);">
                            Solving this coordination problem is harder than building orbital habitats. 
                            And without solving it first, we'll never build them at all.
                            </strong>
                        </p>
                    </div>
                </div>
            </div>

            <!-- BUDGET SIMULATOR SECTION -->
            <div class="data-block" style="border-color: var(--warning);">
                <div class="block-header">
                    <span>INTERACTIVE::MODULE_2</span>
                    <span class="block-id" style="color: var(--warning);">SIMULATION::RESOURCE_ALLOCATION</span>
                </div>
                <h2 class="block-title" style="color: var(--warning);">üí∞ THE $100 TRILLION QUESTION</h2>

                <div class="block-content">
                    <p style="font-size: 1.2em; line-height: 1.8; margin-bottom: 30px;">
                        You're given <strong style="color: var(--warning);">$100 trillion</strong> (approximate global GDP for 1 year) to maximize humanity's survival probability. How do you allocate it?
                    </p>

                    <p style="font-size: 1.05em; line-height: 1.7; margin-bottom: 40px;">
                        This isn't a game. These are real tradeoffs governments, organizations, and billionaires face. <strong>Move the sliders</strong> to allocate resources. Watch the survival probability change in real-time.
                    </p>

                    <div id="budgetSimulator" style="padding: 30px; background: rgba(0, 0, 0, 0.3); border: 2px solid var(--warning);">
                        
                        <!-- Total Budget Display -->
                        <div style="text-align: center; margin-bottom: 40px; padding: 25px; background: rgba(255, 170, 0, 0.1); border: 2px solid var(--warning);">
                            <div style="font-size: 1.1em; color: var(--warning); margin-bottom: 10px;">TOTAL BUDGET</div>
                            <div style="font-size: 2.5em; font-family: 'Orbitron', monospace; font-weight: 900; color: var(--warning);">$100T</div>
                            <div style="font-size: 1em; margin-top: 10px;">
                                <span style="color: var(--primary);">Allocated: $<span id="totalAllocated">0</span>T</span> | 
                                <span style="color: var(--accent);">Remaining: $<span id="remaining">100</span>T</span>
                            </div>
                        </div>

                        <!-- Budget Categories -->
                        <div style="display: grid; gap: 25px;">
                            
                            <!-- Climate Mitigation -->
                            <div class="budget-category">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                    <h3 style="color: var(--primary); margin: 0; font-size: 1.2em;">üåç Climate Mitigation</h3>
                                    <div style="font-size: 1.3em; font-weight: 700; color: var(--primary);">
                                        $<span id="climate-value">0</span>T
                                    </div>
                                </div>
                                <input type="range" id="climate" class="budget-slider" min="0" max="100" value="0" step="1" 
                                       style="width: 100%; height: 8px; background: linear-gradient(to right, var(--primary) 0%, rgba(0,255,65,0.2) 0%); border-radius: 5px; outline: none; -webkit-appearance: none;">
                                <p style="font-size: 0.95em; color: rgba(0,255,65,0.7); margin-top: 10px; line-height: 1.5;">
                                    Carbon capture, renewable energy, reforestation, climate adaptation. <strong>High impact on near-term survival.</strong>
                                </p>
                            </div>

                            <!-- Nuclear Deproliferation -->
                            <div class="budget-category">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                    <h3 style="color: var(--danger); margin: 0; font-size: 1.2em;">‚ò¢Ô∏è Nuclear Deproliferation</h3>
                                    <div style="font-size: 1.3em; font-weight: 700; color: var(--danger);">
                                        $<span id="nuclear-value">0</span>T
                                    </div>
                                </div>
                                <input type="range" id="nuclear" class="budget-slider" min="0" max="100" value="0" step="1" 
                                       style="width: 100%; height: 8px; background: linear-gradient(to right, var(--danger) 0%, rgba(255,51,51,0.2) 0%); border-radius: 5px; outline: none; -webkit-appearance: none;">
                                <p style="font-size: 0.95em; color: rgba(255,51,51,0.7); margin-top: 10px; line-height: 1.5;">
                                    Arms reduction treaties, secure storage, early warning systems. <strong>Prevents immediate extinction.</strong>
                                </p>
                            </div>

                            <!-- AI Safety Research -->
                            <div class="budget-category">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                    <h3 style="color: var(--accent); margin: 0; font-size: 1.2em;">ü§ñ AI Safety & Alignment</h3>
                                    <div style="font-size: 1.3em; font-weight: 700; color: var(--accent);">
                                        $<span id="ai-value">0</span>T
                                    </div>
                                </div>
                                <input type="range" id="ai" class="budget-slider" min="0" max="100" value="0" step="1" 
                                       style="width: 100%; height: 8px; background: linear-gradient(to right, var(--accent) 0%, rgba(0,212,255,0.2) 0%); border-radius: 5px; outline: none; -webkit-appearance: none;">
                                <p style="font-size: 0.95em; color: rgba(0,212,255,0.7); margin-top: 10px; line-height: 1.5;">
                                    Technical alignment, governance frameworks, safety research. <strong>Critical for 2030-2050 window.</strong>
                                </p>
                            </div>

                            <!-- Space Infrastructure -->
                            <div class="budget-category">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                    <h3 style="color: var(--accent); margin: 0; font-size: 1.2em;">üöÄ Space Infrastructure</h3>
                                    <div style="font-size: 1.3em; font-weight: 700; color: var(--accent);">
                                        $<span id="space-value">0</span>T
                                    </div>
                                </div>
                                <input type="range" id="space" class="budget-slider" min="0" max="100" value="0" step="1" 
                                       style="width: 100%; height: 8px; background: linear-gradient(to right, var(--accent) 0%, rgba(0,212,255,0.2) 0%); border-radius: 5px; outline: none; -webkit-appearance: none;">
                                <p style="font-size: 0.95em; color: rgba(0,212,255,0.7); margin-top: 10px; line-height: 1.5;">
                                    Orbital habitats, Mars colony, asteroid mining, launch infrastructure. <strong>PATH::MATTER foundation.</strong>
                                </p>
                            </div>

                            <!-- Biosecurity -->
                            <div class="budget-category">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                    <h3 style="color: var(--warning); margin: 0; font-size: 1.2em;">ü¶† Biosecurity & Pandemic Prevention</h3>
                                    <div style="font-size: 1.3em; font-weight: 700; color: var(--warning);">
                                        $<span id="bio-value">0</span>T
                                    </div>
                                </div>
                                <input type="range" id="bio" class="budget-slider" min="0" max="100" value="0" step="1" 
                                       style="width: 100%; height: 8px; background: linear-gradient(to right, var(--warning) 0%, rgba(255,170,0,0.2) 0%); border-radius: 5px; outline: none; -webkit-appearance: none;">
                                <p style="font-size: 0.95em; color: rgba(255,170,0,0.7); margin-top: 10px; line-height: 1.5;">
                                    Early detection, gain-of-function governance, vaccine development, global coordination. <strong>COVID was a warning.</strong>
                                </p>
                            </div>

                            <!-- Global Governance -->
                            <div class="budget-category">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                    <h3 style="color: var(--secondary); margin: 0; font-size: 1.2em;">üèõÔ∏è Global Governance & Coordination</h3>
                                    <div style="font-size: 1.3em; font-weight: 700; color: var(--secondary);">
                                        $<span id="governance-value">0</span>T
                                    </div>
                                </div>
                                <input type="range" id="governance" class="budget-slider" min="0" max="100" value="0" step="1" 
                                       style="width: 100%; height: 8px; background: linear-gradient(to right, var(--secondary) 0%, rgba(255,0,128,0.2) 0%); border-radius: 5px; outline: none; -webkit-appearance: none;">
                                <p style="font-size: 0.95em; color: rgba(255,0,128,0.7); margin-top: 10px; line-height: 1.5;">
                                    International institutions, conflict resolution, resource sharing, coordination mechanisms. <strong>Foundation for everything else.</strong>
                                </p>
                            </div>

                            <!-- Education & Research -->
                            <div class="budget-category">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                    <h3 style="color: var(--primary); margin: 0; font-size: 1.2em;">üìö Education & Research</h3>
                                    <div style="font-size: 1.3em; font-weight: 700; color: var(--primary);">
                                        $<span id="education-value">0</span>T
                                    </div>
                                </div>
                                <input type="range" id="education" class="budget-slider" min="0" max="100" value="0" step="1" 
                                       style="width: 100%; height: 8px; background: linear-gradient(to right, var(--primary) 0%, rgba(0,255,65,0.2) 0%); border-radius: 5px; outline: none; -webkit-appearance: none;">
                                <p style="font-size: 0.95em; color: rgba(0,255,65,0.7); margin-top: 10px; line-height: 1.5;">
                                    Global education, x-risk research, consciousness studies, long-term thinking. <strong>Develops wisdom to match power.</strong>
                                </p>
                            </div>

                        </div>

                        <!-- Survival Probability Output -->
                        <div style="margin-top: 50px; padding: 30px; background: rgba(0, 255, 65, 0.05); border: 3px solid var(--primary); text-align: center;">
                            <div style="font-size: 1.2em; color: var(--primary); margin-bottom: 15px; font-family: 'Orbitron', monospace; letter-spacing: 2px;">
                                SURVIVAL PROBABILITY (2025-2525)
                            </div>
                            <div style="font-size: 4em; font-family: 'Orbitron', monospace; font-weight: 900; margin: 20px 0;" id="survivalProb">
                                <span style="color: var(--danger);">12%</span>
                            </div>
                            <div id="survivalAnalysis" style="font-size: 1.05em; line-height: 1.7; margin-top: 20px; max-width: 700px; margin-left: auto; margin-right: auto;">
                                Current allocation: Baseline scenario (no additional investment). Survival depends on luck and current trajectories.
                            </div>
                        </div>

                        <!-- Preset Strategies -->
                        <div style="margin-top: 40px; padding: 25px; background: rgba(0, 212, 255, 0.05); border-left: 4px solid var(--accent);">
                            <h3 style="color: var(--accent); margin-bottom: 20px;">üí° Try These Strategies:</h3>
                            <div style="display: flex; flex-wrap: wrap; gap: 15px;">
                                <button class="command-btn" onclick="loadPreset('balanced')" style="flex: 1; min-width: 200px; padding: 12px;">
                                    BALANCED APPROACH
                                </button>
                                <button class="command-btn" onclick="loadPreset('shortterm')" style="flex: 1; min-width: 200px; padding: 12px;">
                                    SHORT-TERM SURVIVAL
                                </button>
                                <button class="command-btn" onclick="loadPreset('longterm')" style="flex: 1; min-width: 200px; padding: 12px;">
                                    LONG-TERM EXPANSION
                                </button>
                                <button class="command-btn" onclick="loadPreset('optimal')" style="flex: 1; min-width: 200px; padding: 12px;">
                                    EXPERT CONSENSUS
                                </button>
                            </div>
                        </div>

                    </div>

                    <p style="margin-top: 30px; font-size: 0.95em; color: rgba(0, 212, 255, 0.7);">
                        <strong>Methodology:</strong> Survival probability calculated using weighted risk reduction models from Ord (2020) <em>The Precipice</em>, 80,000 Hours research, and Future of Humanity Institute estimates. This is a simplified model for educational purposes.
                    </p>
                </div>
            </div>

            <!-- NEW SECTION: WHAT YOU CAN DO -->
            <div class="data-block" style="border-color: var(--primary);">
                <div class="block-header">
                    <span>SECTION::ACTION</span>
                    <span class="block-id" style="color: var(--primary);">CLASSIFICATION::PRACTICAL</span>
                </div>
                <h2 class="block-title" style="color: var(--primary);">WHAT YOU CAN ACTUALLY DO</h2>

                <div class="block-content">
                    <p style="font-size: 1.2em; line-height: 1.8; margin-bottom: 30px; color: var(--primary);">
                        You've read 50,000+ words about civilizational collapse and cosmic survival. Now what?
                    </p>

                    <p style="font-size: 1.1em; line-height: 1.8; margin-bottom: 40px;">
                        Here are <strong>concrete actions</strong>, ordered by impact, time commitment, and feasibility. No bullshit. No greenwashing. No "buy our course."
                    </p>

                    <div style="margin: 40px 0; padding: 30px; background: rgba(0, 255, 65, 0.05); border-left: 4px solid var(--primary);">
                        <h3 style="color: var(--primary); font-size: 1.4em; margin-bottom: 20px;">üéì 1. EDUCATE YOURSELF (DEEPLY)</h3>
                        
                        <h4 style="color: var(--accent); margin: 20px 0 10px;">Essential Reading (Start Here):</h4>
                        <ul style="list-style: none; padding: 0; margin: 15px 0;">
                            <li style="margin: 10px 0; padding-left: 30px; position: relative;">
                                <span style="position: absolute; left: 0; color: var(--primary);">üìñ</span>
                                <strong>Toby Ord - "The Precipice"</strong> (2020)<br>
                                <span style="font-size: 0.95em; color: rgba(0, 255, 65, 0.7);">Most comprehensive analysis of existential risk. Essential.</span>
                            </li>
                            <li style="margin: 10px 0; padding-left: 30px; position: relative;">
                                <span style="position: absolute; left: 0; color: var(--primary);">üìñ</span>
                                <strong>Max Tegmark - "Life 3.0"</strong> (2017)<br>
                                <span style="font-size: 0.95em; color: rgba(0, 255, 65, 0.7);">AI and the future of intelligence. Accessible but rigorous.</span>
                            </li>
                            <li style="margin: 10px 0; padding-left: 30px; position: relative;">
                                <span style="position: absolute; left: 0; color: var(--primary);">üìñ</span>
                                <strong>Kim Stanley Robinson - "Ministry for the Future"</strong> (2020)<br>
                                <span style="font-size: 0.95em; color: rgba(0, 255, 65, 0.7);">Fiction, but contains the most realistic climate action scenarios.</span>
                            </li>
                            <li style="margin: 10px 0; padding-left: 30px; position: relative;">
                                <span style="position: absolute; left: 0; color: var(--primary);">üìñ</span>
                                <strong>Nick Bostrom - "Superintelligence"</strong> (2014)<br>
                                <span style="font-size: 0.95em; color: rgba(0, 255, 65, 0.7);">Dense but foundational on AI risk.</span>
                            </li>
                        </ul>

                        <h4 style="color: var(--accent); margin: 25px 0 10px;">Online Resources (Free):</h4>
                        <ul style="list-style: none; padding: 0; margin: 15px 0;">
                            <li style="margin: 10px 0; padding-left: 30px; position: relative;">
                                <span style="position: absolute; left: 0; color: var(--primary);">üåê</span>
                                <strong>Our World in Data</strong> ‚Üí <span style="color: var(--accent);">ourworldindata.org</span><br>
                                <span style="font-size: 0.95em; color: rgba(0, 255, 65, 0.7);">Best source for understanding global trends with data</span>
                            </li>
                            <li style="margin: 10px 0; padding-left: 30px; position: relative;">
                                <span style="position: absolute; left: 0; color: var(--primary);">üåê</span>
                                <strong>Wait But Why</strong> ‚Üí <span style="color: var(--accent);">waitbutwhy.com</span><br>
                                <span style="font-size: 0.95em; color: rgba(0, 255, 65, 0.7);">Long-form essays on AI, space, Fermi Paradox</span>
                            </li>
                            <li style="margin: 10px 0; padding-left: 30px; position: relative;">
                                <span style="position: absolute; left: 0; color: var(--primary);">üåê</span>
                                <strong>IPCC Reports</strong> ‚Üí <span style="color: var(--accent);">ipcc.ch</span><br>
                                <span style="font-size: 0.95em; color: rgba(0, 255, 65, 0.7);">Read the actual science, not headlines</span>
                            </li>
                        </ul>
                    </div>

                    <div style="margin: 40px 0; padding: 30px; background: rgba(0, 212, 255, 0.05); border-left: 4px solid var(--accent);">
                        <h3 style="color: var(--accent); font-size: 1.4em; margin-bottom: 20px;">üí∞ 2. MONEY (Where To Donate)</h3>
                        
                        <p style="font-size: 1.05em; margin-bottom: 20px;">
                            If you have disposable income, funding these orgs has <strong>measurable impact</strong>:
                        </p>

                        <h4 style="color: var(--accent); margin: 20px 0 10px;">Climate & Environment:</h4>
                        <ul style="list-style: none; padding: 0; margin: 15px 0;">
                            <li style="margin: 12px 0; padding-left: 30px; position: relative;">
                                <span style="position: absolute; left: 0; color: var(--accent);">üíµ</span>
                                <strong>Coalition for Rainforest Nations</strong><br>
                                <span style="font-size: 0.95em; color: rgba(0, 212, 255, 0.7);">$1 prevents 1 ton of CO‚ÇÇ emissions. Most cost-effective climate action.</span>
                            </li>
                            <li style="margin: 12px 0; padding-left: 30px; position: relative;">
                                <span style="position: absolute; left: 0; color: var(--accent);">üíµ</span>
                                <strong>Clean Air Task Force</strong><br>
                                <span style="font-size: 0.95em; color: rgba(0, 212, 255, 0.7);">Policy advocacy for nuclear/fusion energy and carbon capture.</span>
                            </li>
                        </ul>

                        <h4 style="color: var(--accent); margin: 25px 0 10px;">AI Safety:</h4>
                        <ul style="list-style: none; padding: 0; margin: 15px 0;">
                            <li style="margin: 12px 0; padding-left: 30px; position: relative;">
                                <span style="position: absolute; left: 0; color: var(--accent);">üíµ</span>
                                <strong>Machine Intelligence Research Institute (MIRI)</strong><br>
                                <span style="font-size: 0.95em; color: rgba(0, 212, 255, 0.7);">Technical AI alignment research.</span>
                            </li>
                            <li style="margin: 12px 0; padding-left: 30px; position: relative;">
                                <span style="position: absolute; left: 0; color: var(--accent);">üíµ</span>
                                <strong>Center for AI Safety</strong><br>
                                <span style="font-size: 0.95em; color: rgba(0, 212, 255, 0.7);">Policy work and public awareness.</span>
                            </li>
                        </ul>

                        <h4 style="color: var(--accent); margin: 25px 0 10px;">Existential Risk (General):</h4>
                        <ul style="list-style: none; padding: 0; margin: 15px 0;">
                            <li style="margin: 12px 0; padding-left: 30px; position: relative;">
                                <span style="position: absolute; left: 0; color: var(--accent);">üíµ</span>
                                <strong>Future of Humanity Institute (Oxford)</strong><br>
                                <span style="font-size: 0.95em; color: rgba(0, 212, 255, 0.7);">Academic research on x-risk. Top-tier.</span>
                            </li>
                            <li style="margin: 12px 0; padding-left: 30px; position: relative;">
                                <span style="position: absolute; left: 0; color: var(--accent);">üíµ</span>
                                <strong>GiveWell</strong> ‚Üí <span style="color: var(--accent);">givewell.org</span><br>
                                <span style="font-size: 0.95em; color: rgba(0, 212, 255, 0.7);">Meta-charity that finds highest-impact orgs.</span>
                            </li>
                        </ul>
                    </div>

                    <div style="margin: 40px 0; padding: 30px; background: rgba(255, 0, 128, 0.05); border-left: 4px solid var(--secondary);">
                        <h3 style="color: var(--secondary); font-size: 1.4em; margin-bottom: 20px;">üéØ 3. CAREER (High-Impact Paths)</h3>
                        
                        <p style="font-size: 1.05em; margin-bottom: 20px;">
                            Your <strong>career choice</strong> is likely your biggest impact lever.
                        </p>

                        <ul style="list-style: none; padding: 0; margin: 20px 0;">
                            <li style="margin: 15px 0; padding-left: 30px; position: relative;">
                                <span style="position: absolute; left: 0; color: var(--secondary);">üöÄ</span>
                                <strong>AI Safety Research</strong> - We need 1000x more people working on alignment
                            </li>
                            <li style="margin: 15px 0; padding-left: 30px; position: relative;">
                                <span style="position: absolute; left: 0; color: var(--secondary);">üöÄ</span>
                                <strong>Climate Tech Engineering</strong> - Carbon capture, nuclear fusion, battery tech
                            </li>
                            <li style="margin: 15px 0; padding-left: 30px; position: relative;">
                                <span style="position: absolute; left: 0; color: var(--secondary);">üöÄ</span>
                                <strong>Biosecurity</strong> - Pandemic prevention, gain-of-function governance
                            </li>
                            <li style="margin: 15px 0; padding-left: 30px; position: relative;">
                                <span style="position: absolute; left: 0; color: var(--secondary);">üöÄ</span>
                                <strong>Science Communication</strong> - Translate complex x-risk to public/policy
                            </li>
                            <li style="margin: 15px 0; padding-left: 30px; position: relative;">
                                <span style="position: absolute; left: 0; color: var(--secondary);">üöÄ</span>
                                <strong>Earning to Give</strong> - High-salary career + donate 10-50% to effective orgs
                            </li>
                        </ul>

                        <p style="margin-top: 20px; padding: 15px; background: rgba(255, 0, 128, 0.1);">
                            <strong>80,000 Hours</strong> ‚Üí <span style="color: var(--secondary);">80000hours.org</span><br>
                            <span style="font-size: 0.95em;">Free career guide focused on maximizing positive impact. Essential resource.</span>
                        </p>
                    </div>

                    <div style="margin: 40px 0; padding: 30px; background: rgba(255, 170, 0, 0.05); border-left: 4px solid var(--warning);">
                        <h3 style="color: var(--warning); font-size: 1.4em; margin-bottom: 20px;">üó≥Ô∏è 4. POLITICS (Actual Leverage Points)</h3>
                        
                        <ul style="list-style: none; padding: 0; margin: 15px 0;">
                            <li style="margin: 12px 0; padding-left: 30px; position: relative;">
                                <span style="position: absolute; left: 0; color: var(--warning);">üìã</span>
                                <strong>Vote on climate policy</strong> - Not just president. Local elections matter MORE for climate.
                            </li>
                            <li style="margin: 12px 0; padding-left: 30px; position: relative;">
                                <span style="position: absolute; left: 0; color: var(--warning);">üìã</span>
                                <strong>Contact representatives</strong> - AI regulation bills need support. Climate bills need support. They read constituent mail.
                            </li>
                            <li style="margin: 12px 0; padding-left: 30px; position: relative;">
                                <span style="position: absolute; left: 0; color: var(--warning);">üìã</span>
                                <strong>Join advocacy orgs</strong> - Citizens' Climate Lobby, Sunrise Movement (if you're young), AI safety advocacy groups
                            </li>
                        </ul>
                    </div>

                    <div style="margin: 40px 0; padding: 30px; background: rgba(0, 255, 65, 0.08); border: 2px solid var(--primary);">
                        <h3 style="color: var(--primary); font-size: 1.4em; margin-bottom: 20px;">üë• 5. COMMUNITY (Find Your People)</h3>
                        
                        <p style="font-size: 1.05em; margin-bottom: 20px;">
                            Working on x-risk can be isolating. Find communities:
                        </p>

                        <ul style="list-style: none; padding: 0; margin: 15px 0;">
                            <li style="margin: 12px 0; padding-left: 30px; position: relative;">
                                <span style="position: absolute; left: 0; color: var(--primary);">üí¨</span>
                                <strong>Effective Altruism Forum</strong> ‚Üí forum.effectivealtruism.org
                            </li>
                            <li style="margin: 12px 0; padding-left: 30px; position: relative;">
                                <span style="position: absolute; left: 0; color: var(--primary);">üí¨</span>
                                <strong>LessWrong</strong> ‚Üí lesswrong.com (rationalist community, AI safety focus)
                            </li>
                            <li style="margin: 12px 0; padding-left: 30px; position: relative;">
                                <span style="position: absolute; left: 0; color: var(--primary);">üí¨</span>
                                <strong>Local EA groups</strong> - Search your city + "effective altruism"
                            </li>
                            <li style="margin: 12px 0; padding-left: 30px; position: relative;">
                                <span style="position: absolute; left: 0; color: var(--primary);">üí¨</span>
                                <strong>Climate reality project</strong> - Al Gore's org, local chapters
                            </li>
                        </ul>
                    </div>

                    <div style="margin: 50px 0; padding: 40px; background: rgba(255, 51, 51, 0.05); border: 3px solid var(--danger);">
                        <h3 style="color: var(--danger); font-size: 1.6em; margin-bottom: 25px; text-align: center;">‚ö†Ô∏è WHAT NOT TO DO</h3>
                        
                        <p style="font-size: 1.1em; line-height: 1.9; margin-bottom: 20px;">
                            Avoid these <strong>low-impact</strong> or <strong>counterproductive</strong> actions:
                        </p>

                        <ul style="list-style: none; padding: 0; margin: 20px 0;">
                            <li style="margin: 15px 0; padding-left: 30px; position: relative; color: rgba(255, 51, 51, 0.9);">
                                <span style="position: absolute; left: 0;">‚ùå</span>
                                <strong>Individual consumption guilt</strong> - Your plastic straw usage doesn't matter. Systemic change matters.
                            </li>
                            <li style="margin: 15px 0; padding-left: 30px; position: relative; color: rgba(255, 51, 51, 0.9);">
                                <span style="position: absolute; left: 0;">‚ùå</span>
                                <strong>Doomerism</strong> - "We're fucked anyway" becomes self-fulfilling. Stay motivated.
                            </li>
                            <li style="margin: 15px 0; padding-left: 30px; position: relative; color: rgba(255, 51, 51, 0.9);">
                                <span style="position: absolute; left: 0;">‚ùå</span>
                                <strong>Ineffective charities</strong> - Many climate/animal/poverty orgs have 10-1000x less impact than top performers.
                            </li>
                            <li style="margin: 15px 0; padding-left: 30px; position: relative; color: rgba(255, 51, 51, 0.9);">
                                <span style="position: absolute; left: 0;">‚ùå</span>
                                <strong>Waiting for others</strong> - Governments are slow. Corporations optimize profit. You act now.
                            </li>
                        </ul>
                    </div>

                    <div class="code-quote" style="border-color: var(--primary); font-size: 1.2em; text-align: center; margin-top: 50px;">
                        You now know more about existential risk than 99.9% of humans.<br>
                        <strong style="color: var(--primary);">What you do with that knowledge is up to you.</strong>
                    </div>
                </div>
            </div>

            <!-- Final Protocol -->
            <div class="final-protocol">
                <div class="final-header glitch">FINAL PROTOCOL</div>
                
                <p class="final-message">
                    If humanity survives its critical epoch ‚Äî if we navigate climate collapse, nuclear brinksmanship, AI emergence, and institutional failure ‚Äî the future won't be a threat but a <strong style="color: var(--primary);">CHOICE</strong>:
                </p>
                
                <p class="final-message">
                    Survival in <strong style="color: var(--accent);">orbital cities</strong>, or survival as <strong style="color: var(--secondary);">distributed consciousness</strong>, or <strong>BOTH</strong>, fused into a civilization that inhabits bodies, servers, and stars.
                </p>

                <div class="doomsday-clock" style="margin: 60px 0;">
                    <div style="text-align: center;">
                        <p style="font-size: 1.3em; color: var(--danger); margin-bottom: 30px;">
                            The clock is at 90 seconds to midnight.<br>
                            <strong style="font-size: 1.2em;">We have ~475 years left of our 500-year window.</strong>
                        </p>
                        <p style="font-size: 1.1em; color: var(--warning); margin-bottom: 30px;">
                            But realistically? We have maybe 50 years to change trajectory.<br>
                            After that, cascading failures become nearly impossible to reverse.
                        </p>
                    </div>
                </div>

                <div class="code-quote" style="font-size: 1.4em; margin: 60px auto; max-width: 800px; border-color: var(--primary);">
                    Then extinction becomes improbable,<br>
                    and infinity shifts from being a concept<br>
                    to becoming the very form of our continuity.
                </div>

                <div style="margin: 60px 0; padding: 40px; background: rgba(0, 255, 65, 0.05); border: 2px solid var(--primary);">
                    <h3 style="color: var(--primary); font-size: 1.8em; margin-bottom: 25px;">THE DECISION POINT</h3>
                    <p style="font-size: 1.2em; line-height: 1.9;">
                        We are the first generation to understand our cosmic possibilities.<br>
                        We may be the last generation with the power to reach them.<br>
                        <br>
                        The bifurcation isn't coming.<br>
                        <strong style="color: var(--primary); font-size: 1.3em;">We're in it now.</strong><br>
                        <br>
                        Every choice we make in the next 50 years determines whether 
                        humanity becomes a cosmic civilization or a cautionary tale in some 
                        alien species' textbook on civilizational collapse.
                    </p>
                </div>

                <div class="ascii-art" style="font-size: 0.5em; color: var(--primary);">
           *             *              *
      *         ‚àû    *         ‚àû         *
         *                           *
    *        SURVIVAL::POSSIBLE        *
         *    EXTINCTION::OPTIONAL   *
      *         *         *        *
           CHOICE::YOURS
                </div>

                <button class="command-btn" onclick="reboot()">REBOOT::SYSTEM</button>
            </div>

            <!-- PHILOSOPHICAL QUIZ SECTION -->
            <div class="data-block" style="border-color: var(--secondary);">
                <div class="block-header">
                    <span>INTERACTIVE::MODULE_3</span>
                    <span class="block-id" style="color: var(--secondary);">ASSESSMENT::ETHICAL_FRAMEWORK</span>
                </div>
                <h2 class="block-title" style="color: var(--secondary);">üß† THE PHILOSOPHY TEST</h2>

                <div class="block-content">
                    <p style="font-size: 1.2em; line-height: 1.8; margin-bottom: 30px;">
                        Your survival strategy depends on your ethical framework. <strong>Answer 10 questions</strong> to discover your moral philosophy and how it shapes your approach to civilizational survival.
                    </p>

                    <p style="font-size: 1.05em; line-height: 1.7; margin-bottom: 40px; color: rgba(255, 0, 128, 0.8);">
                        There are no "right" answers. These are genuine dilemmas humanity will face. Your choices reveal how you weigh competing values: individual vs collective, present vs future, certainty vs possibility.
                    </p>

                    <div id="quizContainer" style="padding: 30px; background: rgba(0, 0, 0, 0.3); border: 2px solid var(--secondary);">
                        
                        <!-- Quiz Progress -->
                        <div id="quizProgress" style="margin-bottom: 40px; padding: 20px; background: rgba(255, 0, 128, 0.1); border-left: 4px solid var(--secondary);">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                                <span style="color: var(--secondary); font-weight: 700;">QUESTION <span id="currentQuestion">1</span>/10</span>
                                <span style="font-size: 0.9em;">Progress: <span id="progressPercent">0</span>%</span>
                            </div>
                            <div style="width: 100%; height: 8px; background: rgba(255, 0, 128, 0.2); border-radius: 4px; overflow: hidden;">
                                <div id="progressBar" style="width: 0%; height: 100%; background: var(--secondary); transition: width 0.3s;"></div>
                            </div>
                        </div>

                        <!-- Question Display -->
                        <div id="questionDisplay" style="min-height: 400px;">
                            <!-- Questions injected here by JS -->
                        </div>

                        <!-- Results Display (hidden initially) -->
                        <div id="quizResults" style="display: none;">
                            <div style="text-align: center; margin-bottom: 40px;">
                                <h3 style="color: var(--secondary); font-size: 2em; margin-bottom: 15px; font-family: 'Orbitron', monospace;">
                                    YOUR ETHICAL PROFILE
                                </h3>
                                <div style="font-size: 3em; font-family: 'Orbitron', monospace; font-weight: 900; margin: 20px 0; color: var(--primary);" id="profileType">
                                    CONSEQUENTIALIST
                                </div>
                            </div>

                            <div id="profileDescription" style="padding: 30px; background: rgba(255, 0, 128, 0.05); border: 2px solid var(--secondary); margin-bottom: 30px;">
                                <!-- Profile details injected by JS -->
                            </div>

                            <div style="padding: 25px; background: rgba(0, 255, 65, 0.05); border-left: 4px solid var(--primary);">
                                <h4 style="color: var(--primary); margin-bottom: 15px;">HOW THIS AFFECTS YOUR SURVIVAL STRATEGY:</h4>
                                <div id="survivalImplications">
                                    <!-- Strategy implications injected by JS -->
                                </div>
                            </div>

                            <div style="margin-top: 40px; padding: 25px; background: rgba(0, 212, 255, 0.05); border-left: 4px solid var(--accent);">
                                <h4 style="color: var(--accent); margin-bottom: 15px;">BREAKDOWN OF YOUR ANSWERS:</h4>
                                <div id="answerBreakdown" style="display: grid; gap: 15px;">
                                    <!-- Answer analysis injected by JS -->
                                </div>
                            </div>

                            <div style="text-align: center; margin-top: 40px;">
                                <button class="command-btn" onclick="restartQuiz()" style="padding: 15px 40px; font-size: 1.1em;">
                                    RETAKE QUIZ
                                </button>
                            </div>
                        </div>

                    </div>

                    <p style="margin-top: 30px; font-size: 0.95em; color: rgba(255, 0, 128, 0.7);">
                        <strong>Note:</strong> This assessment is based on established ethical frameworks (consequentialism, deontology, virtue ethics, care ethics) and x-risk philosophy. Your profile is a simplified model for reflection, not a definitive classification.
                    </p>
                </div>
            </div>

            <!-- SECRET #8: META-LAYER (Hidden until all secrets found) -->
            <div class="data-block" id="secret8" style="display: none; border-color: var(--secondary); margin-top: 80px;">
                <div class="block-header">
                    <span style="color: var(--secondary);">SECRET::VIII</span>
                    <span class="block-id" style="color: var(--secondary);">CLASSIFICATION::META</span>
                </div>
                <h2 class="block-title" style="color: var(--secondary);">THE REAL TEST</h2>

                <div class="block-content">
                    <p style="font-size: 1.3em; line-height: 1.9; margin-bottom: 30px; color: var(--primary);">
                        You've read everything.<br>
                        You now know the risks.<br>
                        You understand the paths.
                    </p>

                    <div style="margin: 40px 0; padding: 35px; background: rgba(255, 0, 128, 0.05); border-left: 4px solid var(--secondary);">
                        <p style="font-size: 1.2em; line-height: 2; color: rgba(255, 0, 128, 0.95);">
                            But here's the thing:<br><br>
                            
                            Tomorrow morning, you'll wake up.<br>
                            You'll check your phone.<br>
                            You'll go to work.<br>
                            You'll worry about bills, relationships, deadlines.<br><br>
                            
                            And this document?<br>
                            It'll become <strong>"that interesting thing I read once."</strong>
                        </p>
                    </div>

                    <p style="font-size: 1.15em; line-height: 1.9; margin: 30px 0;">
                        This isn't judgment. It's neuroscience.
                    </p>

                    <p style="font-size: 1.1em; line-height: 1.8; margin: 25px 0;">
                        The human brain evolved to respond to <strong>immediate threats</strong>: the rustling in the bush, the predator in the shadows, the rival tribe across the valley. It did NOT evolve to respond to threats that play out over decades, centuries, or millennia.
                    </p>

                    <div style="margin: 40px 0; padding: 30px; background: rgba(255, 170, 0, 0.05); border-left: 4px solid var(--warning);">
                        <h3 style="color: var(--warning); margin-bottom: 20px;">The Intention-Action Gap</h3>
                        <ul style="list-style: none; padding: 0;">
                            <li style="margin: 12px 0; padding-left: 30px; position: relative;">
                                <span style="position: absolute; left: 0; color: var(--warning);">‚ñ∏</span>
                                <strong>We know</strong> smoking kills. 1.3 billion people smoke.
                            </li>
                            <li style="margin: 12px 0; padding-left: 30px; position: relative;">
                                <span style="position: absolute; left: 0; color: var(--warning);">‚ñ∏</span>
                                <strong>We know</strong> climate change threatens civilization. CO‚ÇÇ emissions hit record highs in 2024.
                            </li>
                            <li style="margin: 12px 0; padding-left: 30px; position: relative;">
                                <span style="position: absolute; left: 0; color: var(--warning);">‚ñ∏</span>
                                <strong>We know</strong> nuclear weapons could end us. We keep building more.
                            </li>
                            <li style="margin: 12px 0; padding-left: 30px; position: relative;">
                                <span style="position: absolute; left: 0; color: var(--warning);">‚ñ∏</span>
                                <strong>We know</strong> unaligned AI is risky. Development races ahead unregulated.
                            </li>
                        </ul>
                        <p style="margin-top: 25px; font-size: 1.1em; color: rgba(255, 170, 0, 0.95); line-height: 1.8;">
                            Knowledge doesn't equal action.<br>
                            Understanding doesn't equal change.<br>
                            <strong>Caring doesn't equal doing.</strong>
                        </p>
                    </div>

                    <p style="font-size: 1.3em; line-height: 1.9; margin: 40px 0; color: var(--primary); text-align: center;">
                        So the REAL question isn't:<br>
                        <em>"Will humanity survive?"</em>
                    </p>

                    <p style="font-size: 1.5em; line-height: 1.9; margin: 30px 0; color: var(--secondary); text-align: center; font-weight: 700;">
                        The REAL question is:<br>
                        "Are YOU the type of person who acts<br>
                        even when it's difficult?"
                    </p>

                    <div style="margin: 50px 0; padding: 40px; background: rgba(0, 255, 65, 0.05); border: 2px solid var(--primary);">
                        <p style="font-size: 1.15em; line-height: 1.9;">
                            You don't need to become a climate scientist.<br>
                            You don't need to work on AI safety.<br>
                            You don't need to donate thousands.<br><br>
                            
                            But you DO need to <strong>remember</strong>.<br><br>
                            
                            Remember when you vote.<br>
                            Remember when you choose a career.<br>
                            Remember when you talk to friends about "the future."<br>
                            Remember when you're tempted by cynicism and doomerism.<br><br>
                            
                            <strong style="color: var(--primary); font-size: 1.2em;">Remember that the next 50 years determine the next 50,000.</strong>
                        </p>
                    </div>

                    <div style="margin: 50px 0; padding: 35px; background: rgba(5, 7, 20, 0.8); border: 2px solid var(--secondary);">
                        <p style="font-size: 1.2em; line-height: 2; text-align: center;">
                            The Sun won't kill us for 5 billion years.<br>
                            The cosmos won't kill us for longer.<br><br>
                            
                            <strong style="color: var(--danger); font-size: 1.3em;">
                            The only thing that can kill us in the next 500 years<br>
                            is us.
                            </strong><br><br>
                            
                            <span style="color: var(--primary); font-size: 1.15em;">
                            And the only thing that can save us<br>
                            is also us.
                            </span>
                        </p>
                    </div>

                    <div class="code-quote" style="border-color: var(--secondary); font-size: 1.3em; text-align: center; margin-top: 50px;">
                        You have agency.<br>
                        Use it.<br><br>
                        <strong style="color: var(--primary);">We're still in time.</strong>
                    </div>

                    <p style="margin-top: 50px; text-align: center; font-size: 0.9em; color: rgba(255, 0, 128, 0.5);">
                        [SECRET #8 UNLOCKED]<br>
                        You've completed PROJECT BIFURCATION.
                    </p>
                </div>
            </div>

            <!-- POSTER GENERATOR SECTION -->
            <div class="data-block" style="border-color: var(--primary);">
                <div class="block-header">
                    <span>INTERACTIVE::MODULE_5</span>
                    <span class="block-id" style="color: var(--primary);">GENERATOR::VISUAL</span>
                </div>
                <h2 class="block-title" style="color: var(--primary);">üé® CREATE YOUR BIFURCATION POSTER</h2>

                <div class="block-content">
                    <p style="font-size: 1.2em; line-height: 1.8; margin-bottom: 30px;">
                        Generate a personalized poster about humanity's survival paths. <strong>Customize and download</strong> for social media or printing.
                    </p>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin-bottom: 40px;">
                        
                        <!-- Controls Column -->
                        <div>
                            <h3 style="color: var(--accent); margin-bottom: 20px;">CUSTOMIZE YOUR POSTER</h3>

                            <!-- Theme Selection -->
                            <div style="margin-bottom: 25px;">
                                <label style="display: block; color: var(--primary); margin-bottom: 10px; font-weight: 700;">SELECT THEME:</label>
                                <select id="posterTheme" style="width: 100%; padding: 12px; background: rgba(0, 0, 0, 0.5); border: 2px solid var(--primary); color: var(--primary); font-family: 'Share Tech Mono', monospace; font-size: 1em; cursor: pointer;">
                                    <option value="matter">PATH::MATTER - Space Expansion</option>
                                    <option value="information">PATH::INFORMATION - Digital Consciousness</option>
                                    <option value="both" selected>BOTH PATHS - Hybrid Future</option>
                                    <option value="warning">WARNING - Existential Risk</option>
                                    <option value="custom">CUSTOM - Your Quote</option>
                                </select>
                            </div>

                            <!-- Custom Text (shown if custom theme) -->
                            <div id="customTextContainer" style="margin-bottom: 25px; display: none;">
                                <label style="display: block; color: var(--primary); margin-bottom: 10px; font-weight: 700;">CUSTOM HEADLINE:</label>
                                <input type="text" id="customHeadline" placeholder="Your headline..." maxlength="40" 
                                       style="width: 100%; padding: 12px; background: rgba(0, 0, 0, 0.5); border: 2px solid var(--primary); color: var(--primary); font-family: 'Share Tech Mono', monospace; font-size: 1em;">
                                
                                <label style="display: block; color: var(--primary); margin: 15px 0 10px; font-weight: 700;">CUSTOM SUBTEXT:</label>
                                <textarea id="customSubtext" placeholder="Your message..." maxlength="150" rows="3"
                                          style="width: 100%; padding: 12px; background: rgba(0, 0, 0, 0.5); border: 2px solid var(--primary); color: var(--primary); font-family: 'Share Tech Mono', monospace; font-size: 0.95em; resize: vertical;"></textarea>
                            </div>

                            <!-- Size Selection -->
                            <div style="margin-bottom: 25px;">
                                <label style="display: block; color: var(--primary); margin-bottom: 10px; font-weight: 700;">POSTER SIZE:</label>
                                <select id="posterSize" style="width: 100%; padding: 12px; background: rgba(0, 0, 0, 0.5); border: 2px solid var(--primary); color: var(--primary); font-family: 'Share Tech Mono', monospace; font-size: 1em; cursor: pointer;">
                                    <option value="1080x1080" selected>Instagram Square (1080x1080)</option>
                                    <option value="1080x1920">Instagram Story (1080x1920)</option>
                                    <option value="1200x630">Twitter/Facebook (1200x630)</option>
                                    <option value="2048x2048">Print Quality (2048x2048)</option>
                                </select>
                            </div>

                            <!-- Color Scheme -->
                            <div style="margin-bottom: 25px;">
                                <label style="display: block; color: var(--primary); margin-bottom: 10px; font-weight: 700;">COLOR SCHEME:</label>
                                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;">
                                    <button class="color-scheme-btn active" data-scheme="matrix" style="padding: 15px; background: linear-gradient(135deg, #0a0e27, #00ff41); border: 2px solid var(--primary); cursor: pointer; font-family: 'Share Tech Mono', monospace; color: var(--primary); font-weight: 700;">MATRIX</button>
                                    <button class="color-scheme-btn" data-scheme="cyber" style="padding: 15px; background: linear-gradient(135deg, #0a0e27, #00d4ff); border: 2px solid rgba(0, 212, 255, 0.3); cursor: pointer; font-family: 'Share Tech Mono', monospace; color: var(--accent);">CYBER</button>
                                    <button class="color-scheme-btn" data-scheme="neon" style="padding: 15px; background: linear-gradient(135deg, #0a0e27, #ff0080); border: 2px solid rgba(255, 0, 128, 0.3); cursor: pointer; font-family: 'Share Tech Mono', monospace; color: var(--secondary);">NEON</button>
                                </div>
                            </div>

                            <!-- Generate Button -->
                            <button class="command-btn" onclick="generatePoster()" style="width: 100%; padding: 20px; font-size: 1.2em; margin-top: 20px;">
                                ‚ö° GENERATE POSTER
                            </button>

                            <!-- Download Button (hidden initially) -->
                            <button class="command-btn" id="downloadPosterBtn" onclick="downloadPoster()" style="width: 100%; padding: 20px; font-size: 1.2em; margin-top: 15px; display: none; background: var(--primary); color: var(--darker);">
                                üì• DOWNLOAD PNG
                            </button>
                        </div>

                        <!-- Preview Column -->
                        <div>
                            <h3 style="color: var(--accent); margin-bottom: 20px;">PREVIEW</h3>
                            <div style="background: rgba(0, 0, 0, 0.5); border: 2px solid var(--accent); padding: 20px; min-height: 400px; display: flex; align-items: center; justify-content: center;">
                                <canvas id="posterCanvas" style="max-width: 100%; height: auto; display: none; box-shadow: 0 0 30px rgba(0, 255, 65, 0.3);"></canvas>
                                <div id="posterPlaceholder" style="text-align: center; color: var(--accent); opacity: 0.5;">
                                    <div style="font-size: 4em; margin-bottom: 20px;">üé®</div>
                                    <div style="font-size: 1.2em;">Your poster will appear here</div>
                                    <div style="font-size: 0.9em; margin-top: 10px;">Click "Generate Poster" to create</div>
                                </div>
                            </div>
                        </div>

                    </div>

                    <!-- Mobile Layout (stacked) -->
                    <style>
                        @media (max-width: 968px) {
                            .block-content > div:has(#posterCanvas) {
                                grid-template-columns: 1fr !important;
                            }
                        }
                    </style>

                    <p style="margin-top: 30px; font-size: 0.95em; color: rgba(0, 255, 65, 0.7);">
                        <strong>Tip:</strong> Generated posters are high-quality PNG images perfect for sharing on social media or printing. All processing happens locally in your browser - no data is sent to any server.
                    </p>
                </div>
            </div>

            <!-- Footer -->
            <div class="footer">
                <div class="footer-title">PROJECT BIFURCATION</div>
                
                <div class="footer-section">
                    <strong style="color: var(--primary);">üîí PRIVACY & DATA</strong><br>
                    No tracking ‚Ä¢ No analytics ‚Ä¢ No cookies ‚Ä¢ No data collection<br>
                    All processing runs locally in your browser only
                </div>

                <div class="footer-section">
                    <strong style="color: var(--accent);">üíæ LOCAL STORAGE</strong><br>
                    Progress and achievements saved on your device<br>
                    No information transmitted to any server
                </div>

                <div class="footer-section">
                    <strong style="color: var(--secondary);">üåê OPEN SOURCE</strong><br>
                    Self-contained HTML document<br>
                    Inspect the code ‚Ä¢ No external dependencies
                </div>

                <div class="footer-disclaimer">
                    This is an interactive philosophical exploration of humanity's cosmic future.<br>
                    Based on current scientific data and civilizational risk analysis as of 2024.<br>
                    <br>
                    <em style="color: var(--primary);">
                    "The future is not predetermined. It's a choice we make every day."
                    </em>
                </div>
            </div>
                </div>
    </div>

    <!-- Easter Egg Popup -->
    <div class="easter-egg-popup" id="easterEggPopup">
        <button class="close-popup" onclick="closePopup()">√ó</button>
        <div id="easterEggContent"></div>
    </div>

    <script>
        // Load main content dynamically
        async function loadContent() {
            try {
                const response = await fetch('content.html');
                const html = await response.text();
                document.getElementById('mainTerminal').innerHTML = html;
            } catch (error) {
                console.error('Error loading content:', error);
                // Fallback: show error message
                document.getElementById('mainTerminal').innerHTML = '<div class="data-block visible"><h2>Error loading content</h2><p>Please refresh the page.</p></div>';
            }
        }

        // Sound System (Web Audio API)
        const AudioContext = window.AudioContext || window.webkitAudioContext;
        const audioCtx = new AudioContext();
        
        function playBeep(frequency = 440, duration = 100, type = 'sine') {
            if (audioCtx.state === 'suspended') {
                audioCtx.resume();
            }
            const oscillator = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioCtx.destination);
            
            oscillator.frequency.value = frequency;
            oscillator.type = type;
            gainNode.gain.value = 0.1;
            
            oscillator.start(audioCtx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + duration / 1000);
            oscillator.stop(audioCtx.currentTime + duration / 1000);
        }

        function playSuccess() {
            playBeep(523.25, 100);
            setTimeout(() => playBeep(659.25, 100), 100);
            setTimeout(() => playBeep(783.99, 200), 200);
        }

        function playError() {
            playBeep(200, 200, 'sawtooth');
        }

        function playClick() {
            playBeep(800, 30, 'square');
        }

        function playSecret() {
            playBeep(440, 50);
            setTimeout(() => playBeep(554.37, 50), 50);
            setTimeout(() => playBeep(659.25, 50), 100);
            setTimeout(() => playBeep(880, 150), 150);
        }

        // Haptic Feedback (Mobile)
        function vibrate(pattern) {
            if ('vibrate' in navigator) {
                navigator.vibrate(pattern);
            }
        }

        // Progress Persistence
        function saveProgress() {
            const progress = {
                secretsFound: secretsFound,
                timestamp: Date.now(),
                completed: secretsFound === 7
            };
            localStorage.setItem('bifurcation_progress', JSON.stringify(progress));
        }

        function loadProgress() {
            const saved = localStorage.getItem('bifurcation_progress');
            if (saved) {
                const progress = JSON.parse(saved);
                // Don't auto-load secrets, but show notification if they've been here before
                if (progress.timestamp) {
                    const daysSince = Math.floor((Date.now() - progress.timestamp) / (1000 * 60 * 60 * 24));
                    if (daysSince < 30 && progress.secretsFound > 0) {
                        setTimeout(() => {
                            showNotification(`WELCOME BACK - Previous session: ${progress.secretsFound}/7 secrets found`);
                        }, 2000);
                    }
                }
            }
        }

        // Notification System
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%) translateY(-100px);
                background: rgba(0, 0, 0, 0.95);
                border: 2px solid var(--primary);
                padding: 15px 30px;
                border-radius: 5px;
                z-index: 10001;
                font-family: 'Share Tech Mono', monospace;
                color: var(--primary);
                box-shadow: 0 0 30px rgba(0, 255, 65, 0.4);
                transition: transform 0.5s;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.transform = 'translateX(-50%) translateY(0)';
            }, 100);
            
            setTimeout(() => {
                notification.style.transform = 'translateX(-50%) translateY(-100px)';
                setTimeout(() => notification.remove(), 500);
            }, 3000);
        }

        // Typing Effect for Boot Sequence
        function typeText(element, text, speed = 30) {
            element.textContent = '';
            element.style.opacity = 1;
            let i = 0;
            
            return new Promise((resolve) => {
                const interval = setInterval(() => {
                    if (i < text.length) {
                        element.textContent += text.charAt(i);
                        playBeep(1000 + Math.random() * 500, 10, 'square');
                        i++;
                    } else {
                        clearInterval(interval);
                        resolve();
                    }
                }, speed);
            });
        }

        // Enhanced Boot Sequence with Typing
        async function enhancedBootSequence() {
            const lines = document.querySelectorAll('.boot-line');
            for (let i = 0; i < lines.length - 3; i++) {
                if (lines[i].textContent.trim()) {
                    await typeText(lines[i], lines[i].textContent);
                    await new Promise(resolve => setTimeout(resolve, 100));
                }
            }
        }

        // Achievement System
        const achievements = {
            first_decrypt: { unlocked: false, name: "CRYPTANALYST", description: "Decrypted first classified text" },
            path_chosen: { unlocked: false, name: "PATHFINDER", description: "Examined both evolutionary paths" },
            konami_master: { unlocked: false, name: "CODE BREAKER", description: "Entered the Konami Code" },
            glitch_found: { unlocked: false, name: "REALITY HACKER", description: "Discovered the glitch" },
            full_completion: { unlocked: false, name: "BIFURCATION COMPLETE", description: "Found all 7 secrets" },
            speed_reader: { unlocked: false, name: "QUANTUM READER", description: "Reached end in under 5 minutes" }
        };

        let sessionStartTime = Date.now();

        function unlockAchievement(key) {
            if (!achievements[key].unlocked) {
                achievements[key].unlocked = true;
                playSuccess();
                vibrate([50, 50, 100]);
                showNotification(`üèÜ ACHIEVEMENT UNLOCKED: ${achievements[key].name}`);
                saveAchievements();
            }
        }

        function saveAchievements() {
            localStorage.setItem('bifurcation_achievements', JSON.stringify(achievements));
        }

        function loadAchievements() {
            const saved = localStorage.getItem('bifurcation_achievements');
            if (saved) {
                Object.assign(achievements, JSON.parse(saved));
            }
        }

        // Share Functionality
        function shareExperience() {
            const text = `I've explored PROJECT BIFURCATION - humanity's two paths to cosmic survival. ${secretsFound}/7 secrets discovered.`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'PROJECT BIFURCATION',
                    text: text,
                    url: window.location.href
                }).catch(() => {});
            } else {
                // Fallback: copy to clipboard
                navigator.clipboard.writeText(text + '\n' + window.location.href).then(() => {
                    showNotification('LINK COPIED TO CLIPBOARD');
                });
            }
        }

        // Reading Time Tracker
        let totalScrollDistance = 0;
        let lastScrollY = 0;

        window.addEventListener('scroll', () => {
            totalScrollDistance += Math.abs(window.scrollY - lastScrollY);
            lastScrollY = window.scrollY;
        });

        // Easter Egg: Scroll Distance Achievement
        setInterval(() => {
            if (totalScrollDistance > 50000 && !achievements.speed_reader.unlocked) {
                const timeSpent = (Date.now() - sessionStartTime) / 1000 / 60;
                if (timeSpent < 5) {
                    unlockAchievement('speed_reader');
                }
            }
        }, 1000);

        // Matrix background
        const canvas = document.getElementById('matrixCanvas');
        const ctx = canvas.getContext('2d');
        
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const chars = '01„Ç¢„Ç§„Ç¶„Ç®„Ç™„Ç´„Ç≠„ÇØ„Ç±„Ç≥„Çµ„Ç∑„Çπ„Çª„ÇΩ„Çø„ÉÅ„ÉÑ„ÉÜ„Éà';
        const fontSize = 14;
        const columns = canvas.width / fontSize;
        const drops = Array(Math.floor(columns)).fill(1);

        function drawMatrix() {
            ctx.fillStyle = 'rgba(5, 7, 20, 0.05)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            ctx.fillStyle = '#00ff41';
            ctx.font = fontSize + 'px monospace';

            for (let i = 0; i < drops.length; i++) {
                const text = chars[Math.floor(Math.random() * chars.length)];
                ctx.fillText(text, i * fontSize, drops[i] * fontSize);

                if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
                    drops[i] = 0;
                }
                drops[i]++;
            }
        }

        setInterval(drawMatrix, 50);

        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });

        // Access code
        let secretsFound = 0;
        const correctCode = '500';

        // Navigate to prelude screen after boot
        function showPrelude() {
            document.getElementById('bootSequence').classList.add('hidden');
            setTimeout(() => {
                document.getElementById('preludeScreen').classList.add('active');
                window.scrollTo(0, 0);
            }, 500);
        }

        // Navigate to access prompt from prelude
        function showAccessPrompt() {
            playClick();
            vibrate(50);
            document.getElementById('preludeScreen').classList.add('hidden');
            setTimeout(() => {
                document.getElementById('bootSequence').classList.remove('hidden');
                document.getElementById('accessCode').focus();
                window.scrollTo(0, 0);
            }, 500);
        }

        function checkAccessCode() {
            const code = document.getElementById('accessCode').value.trim();
            if (code === correctCode) {
                playSuccess();
                vibrate([50, 100, 50]);
                grantAccess();
            } else {
                playError();
                vibrate(200);
                const input = document.getElementById('accessCode');
                input.style.borderColor = 'var(--secondary)';
                input.value = '';
                setTimeout(() => {
                    input.style.borderColor = 'var(--primary)';
                }, 500);
            }
        }

        // Setup event listeners immediately
        function setupAccessListeners() {
            const accessInput = document.getElementById('accessCode');
            const accessButton = document.getElementById('accessButton');
            
            if (accessInput) {
                accessInput.addEventListener('keypress', (e) => {
                    playClick();
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        checkAccessCode();
                    }
                });
            }

            if (accessButton) {
                accessButton.addEventListener('click', (e) => {
                    e.preventDefault();
                    checkAccessCode();
                });
                
                // Backup: also handle touchend for mobile
                accessButton.addEventListener('touchend', (e) => {
                    e.preventDefault();
                    checkAccessCode();
                });
            }
        }

        // Try to setup immediately
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', setupAccessListeners);
        } else {
            setupAccessListeners();
        }

        function grantAccess() {
            document.getElementById('bootSequence').classList.add('hidden');
            setTimeout(async () => {
                // Content already inline // Load content first
                document.getElementById('mainTerminal').classList.add('active');
                observeBlocks();
                loadProgress();
                loadAchievements();
            }, 500);
        }

        // Decrypt text
        function decrypt(element, text) {
            playClick();
            vibrate(30);
            let iterations = 0;
            const interval = setInterval(() => {
                element.textContent = text
                    .split('')
                    .map((char, index) => {
                        if (index < iterations) {
                            return text[index];
                        }
                        return chars[Math.floor(Math.random() * chars.length)];
                    })
                    .join('');

                if (iterations >= text.length) {
                    clearInterval(interval);
                    element.style.color = 'var(--primary)';
                    element.classList.remove('encrypted-text');
                    playSecret();
                    vibrate([30, 30, 30]);
                    incrementSecrets();
                    if (secretsFound === 1) {
                        unlockAchievement('first_decrypt');
                    }
                }
                iterations += 1/3;
            }, 30);
        }

        // Intersection Observer
        function observeBlocks() {
            const blocks = document.querySelectorAll('.data-block');
            
            // Fallback: show all blocks after 2 seconds if observer doesn't work
            const fallbackTimeout = setTimeout(() => {
                blocks.forEach(block => {
                    if (!block.classList.contains('visible')) {
                        block.classList.add('visible');
                    }
                });
            }, 2000);
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        updateProgressIndicator(entry.target);
                    }
                });
            }, { 
                threshold: 0.05,  // Much lower threshold for mobile
                rootMargin: '50px'  // Start loading earlier
            });

            blocks.forEach(block => observer.observe(block));
            
            // Also make blocks visible on scroll for mobile
            let scrollTimeout;
            window.addEventListener('scroll', () => {
                clearTimeout(scrollTimeout);
                scrollTimeout = setTimeout(() => {
                    blocks.forEach(block => {
                        const rect = block.getBoundingClientRect();
                        const isVisible = rect.top < window.innerHeight && rect.bottom > 0;
                        if (isVisible && !block.classList.contains('visible')) {
                            block.classList.add('visible');
                            updateProgressIndicator(block);
                        }
                    });
                }, 50);
            });
        }

        // Progress indicator
        function updateProgressIndicator(block) {
            const index = Array.from(document.querySelectorAll('.data-block')).indexOf(block);
            const dots = document.querySelectorAll('.progress-dot');
            if (dots[index]) {
                dots[index].classList.add('active');
            }
        }

        // Path activation
        let pathsExplored = 0;
        function activatePath(type) {
            playClick();
            vibrate(50);
            const node = event.currentTarget;
            const allNodes = document.querySelectorAll('.path-node');
            
            allNodes.forEach(n => n.style.transform = 'scale(1)');
            node.style.transform = 'scale(1.1)';
            
            pathsExplored++;
            if (pathsExplored >= 2 && !achievements.path_chosen.unlocked) {
                unlockAchievement('path_chosen');
            }
            
            setTimeout(() => {
                node.style.transform = 'scale(1)';
            }, 2000);

            incrementSecrets();
        }

        // Hex body visualization
        function createHexBody() {
            const container = document.getElementById('bodyHex');
            const numParticles = 50;

            for (let i = 0; i < numParticles; i++) {
                const particle = document.createElement('div');
                particle.className = 'hex-particle';
                
                const phi = Math.acos(-1 + (2 * i) / numParticles);
                const theta = Math.sqrt(numParticles * Math.PI) * phi;
                
                const x = 150 * Math.cos(theta) * Math.sin(phi);
                const y = 150 * Math.sin(theta) * Math.sin(phi);
                const z = 150 * Math.cos(phi);
                
                particle.style.transform = `translate3d(${x}px, ${y}px, ${z}px)`;
                container.appendChild(particle);
            }
        }

        // Secrets counter
        function incrementSecrets() {
            secretsFound++;
            document.getElementById('secretCount').textContent = secretsFound;
            saveProgress();
            
            if (secretsFound === 7) {
                unlockAchievement('full_completion');
                playSuccess();
                vibrate([100, 50, 100, 50, 200]);
                showEasterEgg('FULL_SECRETS', 
                    'üéâ CONGRATULATIONS! You have unlocked all hidden secrets!<br><br>' +
                    'Bonus code: <strong>BIFURCATION-COMPLETE</strong><br><br>' +
                    'You now truly understand the Two Paths.<br><br>' +
                    '<em>"The question isn\'t whether we can survive. It\'s whether we\'ll choose to."</em><br><br>' +
                    '<button onclick="shareExperience()" style="margin-top: 20px; padding: 10px 20px; background: transparent; border: 2px solid var(--primary); color: var(--primary); font-family: \'Share Tech Mono\', monospace; cursor: pointer;">SHARE YOUR ACHIEVEMENT</button>'
                );
            } else {
                playSecret();
                vibrate([30, 30]);
            }
        }

        // Konami Code
        const konamiCode = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'b', 'a'];
        let konamiIndex = 0;

        document.addEventListener('keydown', (e) => {
            if (e.key === konamiCode[konamiIndex]) {
                konamiIndex++;
                playBeep(400 + (konamiIndex * 100), 50);
                document.getElementById('konamiIndicator').classList.add('active');
                
                if (konamiIndex === konamiCode.length) {
                    activateKonami();
                    konamiIndex = 0;
                }
            } else {
                konamiIndex = 0;
                document.getElementById('konamiIndicator').classList.remove('active');
            }
        });

        function activateKonami() {
            unlockAchievement('konami_master');
            playSuccess();
            vibrate([50, 50, 50, 50, 100]);
            showEasterEgg('KONAMI', 
                'üëæ KONAMI CODE DETECTED!<br><br>' +
                '<strong>Ultra Secret Unlocked:</strong><br>' +
                'The true bifurcation isn\'t between matter and information,<br>' +
                'but between those who seek and those who accept.<br><br>' +
                '<em>You have sought.</em><br><br>' +
                'ADDITIONAL INTEL: The Fermi Paradox may have an answer ‚Äî <br>' +
                'civilizations fail at this exact threshold. They never make it<br>' +
                'through their critical 500 years. We might be next.'
            );
            incrementSecrets();
        }

        // Easter Egg System
        function showEasterEgg(type, content) {
            playSuccess();
            vibrate([100, 50, 100]);
            document.getElementById('easterEggContent').innerHTML = content;
            document.getElementById('easterEggPopup').classList.add('active');
        }

        function closePopup() {
            playClick();
            document.getElementById('easterEggPopup').classList.remove('active');
        }

        // Reboot
        function reboot() {
            playClick();
            vibrate(50);
            window.scrollTo(0, 0);
            document.getElementById('mainTerminal').classList.remove('active');
            document.getElementById('bootSequence').classList.remove('hidden');
            document.getElementById('accessCode').value = '';
            secretsFound = 0;
            document.getElementById('secretCount').textContent = '0';
            document.querySelectorAll('.progress-dot').forEach(dot => dot.classList.remove('active'));
            sessionStartTime = Date.now();
            totalScrollDistance = 0;
            pathsExplored = 0;
        }

        // Click easter eggs
        let clickCount = 0;
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('glitch')) {
                clickCount++;
                playBeep(300 - (clickCount * 50), 100);
                if (clickCount === 3) {
                    unlockAchievement('glitch_found');
                    showEasterEgg('GLITCH', 
                        '‚ö†Ô∏è GLITCH DETECTED<br><br>' +
                        'Reality is unstable.<br>' +
                        'Consciousness is the only anchor.<br><br>' +
                        'CLASSIFIED DATA: Some simulations suggest we\'re already<br>' +
                        'in a post-bifurcation state, and this entire experience<br>' +
                        'is a consciousness backup reviewing its own history.'
                    );
                    incrementSecrets();
                    clickCount = 0;
                }
            }
        });

        // ==========================================
        // POSTER GENERATOR MODULE
        // ==========================================

        let currentColorScheme = 'matrix';
        const colorSchemes = {
            matrix: { bg: '#0a0e27', primary: '#00ff41', secondary: '#00d4ff', accent: '#ffffff' },
            cyber: { bg: '#0a0e27', primary: '#00d4ff', secondary: '#ff0080', accent: '#ffffff' },
            neon: { bg: '#0a0e27', primary: '#ff0080', secondary: '#ffaa00', accent: '#ffffff' }
        };

        const posterThemes = {
            matter: {
                headline: 'PATH::MATTER',
                subtext: 'Biological humans colonizing the cosmos.\nOrbital habitats. Mars colonies. Generation ships.\nPreserving our physical form across the stars.',
                icon: '‚¨°'
            },
            information: {
                headline: 'PATH::INFORMATION',
                subtext: 'Digital consciousness transcending biology.\nMind uploading. Substrate independence.\nExisting beyond matter, space, and time.',
                icon: '‚ó¨'
            },
            both: {
                headline: 'THE BIFURCATION',
                subtext: 'Two paths to cosmic survival.\nMatter: Space expansion & biological evolution.\nInformation: Digital minds & consciousness upload.\nBoth necessary. Neither sufficient alone.',
                icon: '‚üÅ'
            },
            warning: {
                headline: 'CRITICAL WINDOW',
                subtext: 'Next 50 years determine next 50,000 years.\n90 seconds to midnight. Multiple existential threats.\nNuclear war. Climate collapse. AI emergence.\nWe survive together or not at all.',
                icon: '‚ö†'
            }
        };

        // Theme change listener
        document.addEventListener('DOMContentLoaded', () => {
            const themeSelect = document.getElementById('posterTheme');
            if (themeSelect) {
                themeSelect.addEventListener('change', (e) => {
                    const customContainer = document.getElementById('customTextContainer');
                    if (e.target.value === 'custom') {
                        customContainer.style.display = 'block';
                    } else {
                        customContainer.style.display = 'none';
                    }
                });
            }

            // Color scheme buttons
            document.querySelectorAll('.color-scheme-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.color-scheme-btn').forEach(b => {
                        b.classList.remove('active');
                        b.style.borderWidth = '2px';
                    });
                    this.classList.add('active');
                    this.style.borderWidth = '3px';
                    currentColorScheme = this.dataset.scheme;
                    playClick();
                });
            });
        });

        function generatePoster() {
            const canvas = document.getElementById('posterCanvas');
            const ctx = canvas.getContext('2d');
            
            // Get settings
            const theme = document.getElementById('posterTheme').value;
            const size = document.getElementById('posterSize').value;
            const [width, height] = size.split('x').map(Number);
            
            // Set canvas size
            canvas.width = width;
            canvas.height = height;
            
            // Get theme data
            let headline, subtext, icon;
            if (theme === 'custom') {
                headline = document.getElementById('customHeadline').value || 'PROJECT BIFURCATION';
                subtext = document.getElementById('customSubtext').value || 'Humanity\'s paths to cosmic survival.';
                icon = '‚üÅ';
            } else {
                const themeData = posterThemes[theme];
                headline = themeData.headline;
                subtext = themeData.subtext;
                icon = themeData.icon;
            }
            
            // Get colors
            const colors = colorSchemes[currentColorScheme];
            
            // Clear canvas
            ctx.fillStyle = colors.bg;
            ctx.fillRect(0, 0, width, height);
            
            // Add grid pattern
            ctx.strokeStyle = colors.primary + '15';
            ctx.lineWidth = 1;
            const gridSize = width / 20;
            for (let i = 0; i < width; i += gridSize) {
                ctx.beginPath();
                ctx.moveTo(i, 0);
                ctx.lineTo(i, height);
                ctx.stroke();
            }
            for (let i = 0; i < height; i += gridSize) {
                ctx.beginPath();
                ctx.moveTo(0, i);
                ctx.lineTo(width, i);
                ctx.stroke();
            }
            
            // Add scanlines
            ctx.strokeStyle = colors.primary + '08';
            ctx.lineWidth = 2;
            for (let i = 0; i < height; i += 4) {
                ctx.beginPath();
                ctx.moveTo(0, i);
                ctx.lineTo(width, i);
                ctx.stroke();
            }
            
            // Draw border
            ctx.strokeStyle = colors.primary;
            ctx.lineWidth = 10;
            ctx.strokeRect(30, 30, width - 60, height - 60);
            
            // Draw inner border
            ctx.strokeStyle = colors.secondary + '80';
            ctx.lineWidth = 3;
            ctx.strokeRect(50, 50, width - 100, height - 100);
            
            // Draw icon
            const iconSize = width * 0.15;
            ctx.font = `${iconSize}px Arial`;
            ctx.fillStyle = colors.primary + '40';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(icon, width / 2, height * 0.3);
            
            // Draw headline
            const headlineSize = width * 0.08;
            ctx.font = `bold ${headlineSize}px "Orbitron", monospace`;
            ctx.fillStyle = colors.primary;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            
            // Text shadow
            ctx.shadowColor = colors.primary;
            ctx.shadowBlur = 20;
            ctx.fillText(headline, width / 2, height * 0.5);
            ctx.shadowBlur = 0;
            
            // Draw subtext (multi-line)
            const subtextSize = width * 0.028;
            ctx.font = `${subtextSize}px "Share Tech Mono", monospace`;
            ctx.fillStyle = colors.accent + 'dd';
            
            const lines = subtext.split('\n');
            const lineHeight = subtextSize * 1.6;
            const startY = height * 0.62;
            
            lines.forEach((line, i) => {
                ctx.fillText(line, width / 2, startY + (i * lineHeight));
            });
            
            // Draw footer text
            ctx.font = `${width * 0.022}px "Share Tech Mono", monospace`;
            ctx.fillStyle = colors.secondary;
            ctx.fillText('PROJECT BIFURCATION', width / 2, height - 100);
            
            ctx.font = `${width * 0.018}px "Share Tech Mono", monospace`;
            ctx.fillStyle = colors.accent + '88';
            ctx.fillText('Humanity\'s Cosmic Survival Strategy', width / 2, height - 70);
            
            // Show canvas and download button
            canvas.style.display = 'block';
            document.getElementById('posterPlaceholder').style.display = 'none';
            document.getElementById('downloadPosterBtn').style.display = 'block';
            
            // Play success sound
            playSuccess();
            vibrate([100, 50, 100]);
            
            // Scroll to preview
            canvas.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        function downloadPoster() {
            const canvas = document.getElementById('posterCanvas');
            const theme = document.getElementById('posterTheme').value;
            const timestamp = new Date().getTime();
            
            // Create download link
            canvas.toBlob((blob) => {
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.download = `bifurcation_${theme}_${timestamp}.png`;
                link.href = url;
                link.click();
                
                // Cleanup
                setTimeout(() => URL.revokeObjectURL(url), 100);
                
                playSuccess();
                vibrate([50, 50, 50, 50, 200]);
                showNotification('‚úÖ Poster downloaded successfully!');
            });
        }

        // ==========================================
        // 3D GLOBE MODULE (Three.js)
        // ==========================================

        let globeScene, globeCamera, globeRenderer, globe, globeRotating = true;
        let globeHotspots = [];
        let raycaster, mouse;

        const hotspotData = [
            { lat: 38.9, lon: -77.0, type: 'nuclear', color: 0xff3333, name: 'Pentagon', location: 'Washington DC, USA', description: 'US nuclear command center. Houses Strategic Command oversight.', details: '~5,550 warheads. World\'s largest nuclear arsenal alongside Russia.' },
            { lat: 55.7, lon: 37.6, type: 'nuclear', color: 0xff3333, name: 'Moscow', location: 'Russia', description: 'Russian nuclear command. Strategic Rocket Forces headquarters.', details: '~6,000 warheads. Actively modernizing arsenal.' },
            { lat: 39.9, lon: 116.4, type: 'nuclear', color: 0xff3333, name: 'Beijing', location: 'China', description: 'PRC nuclear command. Rapidly expanding arsenal.', details: '~350 warheads, projected to reach 1,000 by 2030.' },
            
            { lat: -16.5, lon: 179.2, type: 'climate', color: 0xffaa00, name: 'Kiribati', location: 'Pacific Ocean', description: 'Island nation facing existential threat from sea level rise.', details: 'Uninhabitable by 2050. First nation purchasing "migration land" in Fiji.' },
            { lat: 13.5, lon: 15.5, type: 'climate', color: 0xffaa00, name: 'Lake Chad', location: 'Chad/Nigeria', description: 'Lake shrunk 90% since 1963. 40 million people depend on it.', details: 'Desertification accelerating. Major driver of Sahel conflicts.' },
            { lat: -3.4, lon: -62.9, type: 'climate', color: 0xffaa00, name: 'Amazon', location: 'Brazil', description: 'Approaching tipping point (17% deforestation, threshold 20-25%).', details: 'Beyond threshold: rainforest becomes savanna, releases 120B tons CO‚ÇÇ.' },
            { lat: 64.9, lon: -19.0, type: 'climate', color: 0xffaa00, name: 'Iceland', location: 'North Atlantic', description: 'AMOC (Atlantic Meridional Overturning Circulation) monitoring.', details: 'AMOC slowdown could trigger rapid European cooling.' },
            
            { lat: 28.5, lon: -80.6, type: 'space', color: 0x00d4ff, name: 'Kennedy Space Center', location: 'Florida, USA', description: 'SpaceX launches. Starship development for Mars colonization.', details: 'Target: First crewed Mars mission 2029-2033.' },
            { lat: 5.2, lon: -52.8, type: 'space', color: 0x00d4ff, name: 'Kourou', location: 'French Guiana', description: 'European Space Agency launch site. Ariane 6 missions.', details: 'Equatorial location provides launch efficiency advantage.' },
            { lat: 51.0, lon: 45.0, type: 'space', color: 0x00d4ff, name: 'Baikonur', location: 'Kazakhstan', description: 'Russian/Soviet space program launch site since 1957.', details: 'Leased by Russia. First human in space launched here (Gagarin, 1961).' },
            
            { lat: 37.4, lon: -122.1, type: 'ai', color: 0x00ff41, name: 'Silicon Valley', location: 'California, USA', description: 'OpenAI, Anthropic, Google AI. Epicenter of AGI development.', details: 'GPT-4, Claude, Gemini developed here. Alignment research concentrated.' },
            { lat: 51.5, lon: -0.1, type: 'ai', color: 0x00ff41, name: 'London', location: 'UK', description: 'DeepMind, AI Safety Institute. UK AI safety research hub.', details: 'First national AI Safety Institute. AlphaFold, AlphaGo origins.' },
            { lat: 39.9, lon: 116.4, type: 'ai', color: 0x00ff41, name: 'Beijing', location: 'China', description: 'Baidu, Alibaba AI. State-directed AI development.', details: 'Largest AI investment after US. ~$150B government AI plan.' },
            
            { lat: 42.4, lon: -71.1, type: 'bio', color: 0xff0080, name: 'Boston', location: 'Massachusetts, USA', description: 'Biotech corridor. mRNA vaccine development (Moderna).', details: 'COVID vaccine developed in record time. Synthetic biology hub.' },
            { lat: 39.1, lon: -76.9, type: 'bio', color: 0xff0080, name: 'Fort Detrick', location: 'Maryland, USA', description: 'US Army biosecurity research. Gain-of-function governance debates.', details: 'National Interagency Biodefense Campus. Controversial research history.' },
            { lat: 43.6, lon: 1.4, type: 'bio', color: 0xff0080, name: 'Toulouse', location: 'France', description: 'European biosafety research. P4 laboratory (high containment).', details: 'Research on highest-risk pathogens. EU biosecurity coordination.' }
        ];

        function initGlobe() {
            const container = document.getElementById('globeContainer');
            if (!container) return;

            // Scene
            globeScene = new THREE.Scene();
            globeScene.background = new THREE.Color(0x0a0e27);

            // Camera
            const aspect = container.clientWidth / container.clientHeight;
            globeCamera = new THREE.PerspectiveCamera(45, aspect, 0.1, 1000);
            globeCamera.position.z = 3;

            // Renderer
            const canvas = document.getElementById('globeCanvas');
            globeRenderer = new THREE.WebGLRenderer({ canvas, antialias: true, alpha: true });
            globeRenderer.setSize(container.clientWidth, container.clientHeight);
            globeRenderer.setPixelRatio(window.devicePixelRatio);

            // Globe
            const geometry = new THREE.SphereGeometry(1, 64, 64);
            
            // Create procedural texture for continents
            const textureCanvas = document.createElement('canvas');
            textureCanvas.width = 512;
            textureCanvas.height = 256;
            const ctx = textureCanvas.getContext('2d');
            
            // Ocean base
            ctx.fillStyle = '#0a3d62';
            ctx.fillRect(0, 0, 512, 256);
            
            // Simple continent shapes (stylized)
            ctx.fillStyle = '#1a5f7a';
            // Americas
            ctx.fillRect(100, 80, 60, 120);
            ctx.fillRect(120, 60, 40, 140);
            // Europe/Africa
            ctx.fillRect(240, 70, 50, 100);
            ctx.fillRect(250, 120, 40, 80);
            // Asia
            ctx.fillRect(320, 60, 100, 110);
            ctx.fillRect(360, 90, 80, 90);
            // Australia
            ctx.fillRect(400, 140, 40, 40);
            
            const texture = new THREE.CanvasTexture(textureCanvas);
            texture.wrapS = THREE.RepeatWrapping;
            texture.wrapT = THREE.ClampToEdgeWrapping;
            
            // Earth-like material with texture
            const material = new THREE.MeshPhongMaterial({
                map: texture,
                color: 0xffffff,
                emissive: 0x0a2142,
                specular: 0x00d4ff,
                shininess: 25,
                wireframe: false,
                transparent: false,
                opacity: 1
            });
            
            globe = new THREE.Mesh(geometry, material);
            globeScene.add(globe);

            // Add wireframe overlay
            const wireframeGeo = new THREE.SphereGeometry(1.01, 32, 32);
            const wireframeMat = new THREE.MeshBasicMaterial({
                color: 0x00ff41,
                wireframe: true,
                transparent: true,
                opacity: 0.15
            });
            const wireframe = new THREE.Mesh(wireframeGeo, wireframeMat);
            globeScene.add(wireframe);

            // Lights
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.4);
            globeScene.add(ambientLight);

            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(5, 3, 5);
            globeScene.add(directionalLight);

            // Add hotspots
            hotspotData.forEach(data => {
                const hotspot = createHotspot(data);
                globe.add(hotspot);
                globeHotspots.push({ mesh: hotspot, data: data });
            });

            // Raycaster for click detection
            raycaster = new THREE.Raycaster();
            mouse = new THREE.Vector2();

            // Event listeners
            canvas.addEventListener('click', onGlobeClick);
            canvas.addEventListener('mousedown', onGlobeMouseDown);
            canvas.addEventListener('mousemove', onGlobeMouseMove);
            canvas.addEventListener('mouseup', onGlobeMouseUp);
            canvas.addEventListener('touchstart', onGlobeTouchStart);
            canvas.addEventListener('touchmove', onGlobeTouchMove);
            canvas.addEventListener('touchend', onGlobeMouseUp);

            // Window resize
            window.addEventListener('resize', onGlobeResize);

            // Hide loading
            document.getElementById('globeLoading').style.display = 'none';

            // Start animation
            animateGlobe();
        }

        function createHotspot(data) {
            // Convert lat/lon to 3D position
            const phi = (90 - data.lat) * (Math.PI / 180);
            const theta = (data.lon + 180) * (Math.PI / 180);
            const radius = 1.02;

            const x = -(radius * Math.sin(phi) * Math.cos(theta));
            const y = radius * Math.cos(phi);
            const z = radius * Math.sin(phi) * Math.sin(theta);

            // Create hotspot marker
            const geometry = new THREE.SphereGeometry(0.015, 16, 16);
            const material = new THREE.MeshStandardMaterial({ 
                color: data.color,
                emissive: data.color,
                emissiveIntensity: 0.8,
                metalness: 0.3,
                roughness: 0.4
            });
            const marker = new THREE.Mesh(geometry, material);
            marker.position.set(x, y, z);
            marker.userData = data;

            // Add glow
            const glowGeometry = new THREE.SphereGeometry(0.025, 16, 16);
            const glowMaterial = new THREE.MeshBasicMaterial({
                color: data.color,
                transparent: true,
                opacity: 0.3
            });
            const glow = new THREE.Mesh(glowGeometry, glowMaterial);
            glow.position.set(x, y, z);
            marker.add(glow);

            return marker;
        }

        let globeDragging = false;
        let previousMousePosition = { x: 0, y: 0 };

        function onGlobeMouseDown(e) {
            globeDragging = true;
            previousMousePosition = { x: e.clientX, y: e.clientY };
            document.getElementById('globeCanvas').style.cursor = 'grabbing';
        }

        function onGlobeMouseMove(e) {
            if (globeDragging) {
                const deltaMove = {
                    x: e.clientX - previousMousePosition.x,
                    y: e.clientY - previousMousePosition.y
                };

                globe.rotation.y += deltaMove.x * 0.005;
                globe.rotation.x += deltaMove.y * 0.005;

                previousMousePosition = { x: e.clientX, y: e.clientY };
                globeRotating = false;
                document.getElementById('rotationBtn').textContent = '‚ñ∂ PLAY';
            }
        }

        function onGlobeMouseUp() {
            globeDragging = false;
            document.getElementById('globeCanvas').style.cursor = 'grab';
        }

        function onGlobeTouchStart(e) {
            e.preventDefault();
            if (e.touches.length === 1) {
                const touch = e.touches[0];
                previousMousePosition = { x: touch.clientX, y: touch.clientY };
                globeDragging = true;
            }
        }

        function onGlobeTouchMove(e) {
            e.preventDefault();
            if (globeDragging && e.touches.length === 1) {
                const touch = e.touches[0];
                const deltaMove = {
                    x: touch.clientX - previousMousePosition.x,
                    y: touch.clientY - previousMousePosition.y
                };

                globe.rotation.y += deltaMove.x * 0.005;
                globe.rotation.x += deltaMove.y * 0.005;

                previousMousePosition = { x: touch.clientX, y: touch.clientY };
                globeRotating = false;
                document.getElementById('rotationBtn').textContent = '‚ñ∂ PLAY';
            }
        }

        function onGlobeClick(event) {
            const canvas = document.getElementById('globeCanvas');
            const rect = canvas.getBoundingClientRect();
            
            mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;
            mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;

            raycaster.setFromCamera(mouse, globeCamera);

            // Intersect with globe children (markers are children of globe)
            const intersects = raycaster.intersectObjects(globe.children, true);

            if (intersects.length > 0) {
                // Find the marker mesh (not the glow)
                for (let i = 0; i < intersects.length; i++) {
                    const object = intersects[i].object;
                    if (object.userData && object.userData.name) {
                        showGlobePopup(object.userData);
                        playClick();
                        vibrate(50);
                        return;
                    }
                }
            }
        }

        function showGlobePopup(data) {
            const icons = {
                nuclear: '‚ò¢Ô∏è',
                climate: 'üå°Ô∏è',
                space: 'üöÄ',
                ai: 'ü§ñ',
                bio: 'ü¶†'
            };

            document.getElementById('globePopupIcon').textContent = icons[data.type];
            document.getElementById('globePopupTitle').textContent = data.name;
            document.getElementById('globePopupLocation').textContent = data.location;
            document.getElementById('globePopupDescription').textContent = data.description;
            document.getElementById('globePopupDetails').innerHTML = `<strong>KEY INFO:</strong> ${data.details}`;
            
            document.getElementById('globePopup').style.display = 'block';
        }

        function closeGlobePopup() {
            document.getElementById('globePopup').style.display = 'none';
            playClick();
        }

        function toggleGlobeRotation() {
            globeRotating = !globeRotating;
            document.getElementById('rotationBtn').textContent = globeRotating ? '‚è∏ PAUSE' : '‚ñ∂ PLAY';
            playClick();
            vibrate(30);
        }

        function resetGlobeView() {
            globe.rotation.x = 0;
            globe.rotation.y = 0;
            globeCamera.position.z = 3;
            globeRotating = true;
            document.getElementById('rotationBtn').textContent = '‚è∏ PAUSE';
            playClick();
            vibrate(50);
        }

        function animateGlobe() {
            requestAnimationFrame(animateGlobe);

            if (globeRotating && !globeDragging) {
                globe.rotation.y += 0.002;
            }

            // Pulse hotspot glows
            globeHotspots.forEach(h => {
                if (h.mesh.children[0]) {
                    const glow = h.mesh.children[0];
                    glow.material.opacity = 0.2 + Math.sin(Date.now() * 0.003) * 0.15;
                }
            });

            globeRenderer.render(globeScene, globeCamera);
        }

        function onGlobeResize() {
            const container = document.getElementById('globeContainer');
            if (!container || !globeCamera || !globeRenderer) return;

            const width = container.clientWidth;
            const height = container.clientHeight;

            globeCamera.aspect = width / height;
            globeCamera.updateProjectionMatrix();
            globeRenderer.setSize(width, height);
        }

        // ==========================================
        // PHILOSOPHICAL QUIZ MODULE
        // ==========================================

        const quizQuestions = [
            {
                id: 1,
                question: "A runaway climate scenario will kill 1 billion people over 50 years. You can prevent it by forcing a global moratorium on fossil fuels, causing immediate economic collapse and 100 million deaths from energy poverty. Do you act?",
                options: [
                    { text: "Yes - 100M deaths now to save 1B later", scores: { consequentialist: 3, deontologist: -2, virtue: 1, care: 0 } },
                    { text: "No - I cannot deliberately cause 100M deaths, even to prevent more", scores: { consequentialist: -2, deontologist: 3, virtue: 1, care: 2 } },
                    { text: "Seek a third option - gradual transition accepting some of both harms", scores: { consequentialist: 0, deontologist: 1, virtue: 2, care: 3 } },
                    { text: "I don't know - the scale makes moral intuition fail", scores: { consequentialist: 1, deontologist: 1, virtue: 1, care: 1 } }
                ]
            },
            {
                id: 2,
                question: "Mind uploading becomes possible. Your consciousness can be transferred to a digital substrate, but there's a 5% chance the 'you' that emerges isn't continuous with the biological you - it's a copy while the original dies. Do you upload?",
                options: [
                    { text: "Yes - 95% chance of immortality is worth the risk", scores: { consequentialist: 3, deontologist: 0, virtue: -1, care: -1 } },
                    { text: "No - personal continuity is sacred; a copy isn't 'me'", scores: { consequentialist: -1, deontologist: 2, virtue: 2, care: 3 } },
                    { text: "Wait for better technology - reduce the 5% risk first", scores: { consequentialist: 1, deontologist: 1, virtue: 3, care: 2 } },
                    { text: "It doesn't matter - 'continuity' is an illusion anyway", scores: { consequentialist: 2, deontologist: -2, virtue: 0, care: -1 } }
                ]
            },
            {
                id: 3,
                question: "An AI alignment breakthrough requires experimenting with AGI systems that have a 1% chance of escaping containment and causing human extinction. The breakthrough would guarantee safe AI forever. Do you proceed?",
                options: [
                    { text: "Yes - 1% risk is acceptable for permanent safety", scores: { consequentialist: 2, deontologist: -2, virtue: 0, care: -1 } },
                    { text: "No - you cannot gamble with extinction, period", scores: { consequentialist: -1, deontologist: 3, virtue: 2, care: 3 } },
                    { text: "Only if we can improve containment to 0.01% first", scores: { consequentialist: 1, deontologist: 1, virtue: 3, care: 2 } },
                    { text: "Proceed, but only I bear the risk - isolated facility", scores: { consequentialist: 0, deontologist: 2, virtue: 2, care: 1 } }
                ]
            },
            {
                id: 4,
                question: "Space colonization requires 10,000 volunteers for a one-way Mars mission with 30% mortality rate. You can conscript people (lottery) guaranteeing the mission succeeds, or rely on volunteers knowing it will likely fail. Which do you choose?",
                options: [
                    { text: "Conscript - species survival trumps individual autonomy", scores: { consequentialist: 3, deontologist: -3, virtue: -1, care: -2 } },
                    { text: "Volunteers only - forced sacrifice violates human dignity", scores: { consequentialist: -2, deontologist: 3, virtue: 2, care: 3 } },
                    { text: "Incentivize heavily - make 'volunteering' irresistible", scores: { consequentialist: 1, deontologist: 0, virtue: 1, care: 1 } },
                    { text: "Delay mission - no colony is worth coercion", scores: { consequentialist: 0, deontologist: 2, virtue: 3, care: 2 } }
                ]
            },
            {
                id: 5,
                question: "You discover your uploaded consciousness will experience 1,000 subjective years for every 1 real year. You'll watch humanity evolve in fast-forward while your loved ones age and die in what feels like days. Still upload?",
                options: [
                    { text: "Yes - the experience and knowledge gained is worth the isolation", scores: { consequentialist: 2, deontologist: 0, virtue: 1, care: -2 } },
                    { text: "No - connection to others is more important than longevity", scores: { consequentialist: -1, deontologist: 1, virtue: 2, care: 3 } },
                    { text: "Only if my loved ones upload with me", scores: { consequentialist: 0, deontologist: 1, virtue: 2, care: 3 } },
                    { text: "Yes, but slow my subjective time to match reality", scores: { consequentialist: 1, deontologist: 2, virtue: 3, care: 2 } }
                ]
            },
            {
                id: 6,
                question: "A pandemic engineered as a bioweapon is spreading. You have the choice to release a counter-pathogen that will kill the bioweapon but also sterilize 20% of humanity (random). Without it, 60% die from the weapon. What do you do?",
                options: [
                    { text: "Release it - saving 40% and sterilizing 20% is better than 60% dead", scores: { consequentialist: 3, deontologist: -1, virtue: 0, care: 0 } },
                    { text: "Don't release - I cannot forcibly sterilize billions", scores: { consequentialist: -2, deontologist: 3, virtue: 1, care: 2 } },
                    { text: "Delay and search for a better solution", scores: { consequentialist: 0, deontologist: 1, virtue: 3, care: 3 } },
                    { text: "Release, but only in regions already infected", scores: { consequentialist: 2, deontologist: 1, virtue: 2, care: 1 } }
                ]
            },
            {
                id: 7,
                question: "First contact with aliens. They offer technology to make humanity immortal and post-scarcity, but we must abandon biological reproduction and Earth within 100 years. Accept?",
                options: [
                    { text: "Yes - the future they offer is objectively better", scores: { consequentialist: 3, deontologist: -1, virtue: 0, care: -1 } },
                    { text: "No - we must evolve on our own terms, not theirs", scores: { consequentialist: -1, deontologist: 2, virtue: 3, care: 2 } },
                    { text: "Negotiate - ask for tech without the conditions", scores: { consequentialist: 1, deontologist: 1, virtue: 2, care: 2 } },
                    { text: "Accept, but ensure future generations can choose otherwise", scores: { consequentialist: 2, deontologist: 2, virtue: 2, care: 3 } }
                ]
            },
            {
                id: 8,
                question: "You can create a global surveillance AI that reduces x-risk by 90% by predicting and preventing catastrophes, but it monitors every human constantly and removes privacy forever. Implement it?",
                options: [
                    { text: "Yes - survival requires sacrifice of privacy", scores: { consequentialist: 3, deontologist: -2, virtue: -1, care: 0 } },
                    { text: "No - a world without privacy isn't worth saving", scores: { consequentialist: -2, deontologist: 3, virtue: 2, care: 2 } },
                    { text: "Yes, but with democratic oversight and sunset clauses", scores: { consequentialist: 2, deontologist: 1, virtue: 3, care: 2 } },
                    { text: "No, but invest more in other risk-reduction strategies", scores: { consequentialist: 0, deontologist: 2, virtue: 2, care: 3 } }
                ]
            },
            {
                id: 9,
                question: "Resources are scarce. You must choose: invest in extending the lives of the current 8 billion humans by 20 years each, OR create conditions for 20 billion future humans to exist. Which?",
                options: [
                    { text: "Extend current lives - existing people have stronger moral claims", scores: { consequentialist: 0, deontologist: 2, virtue: 2, care: 3 } },
                    { text: "Create future lives - more total happiness/flourishing", scores: { consequentialist: 3, deontologist: -1, virtue: 0, care: -1 } },
                    { text: "Split the difference - some of both", scores: { consequentialist: 1, deontologist: 1, virtue: 2, care: 2 } },
                    { text: "Focus on quality, not quantity - make current lives better first", scores: { consequentialist: 1, deontologist: 2, virtue: 3, care: 3 } }
                ]
            },
            {
                id: 10,
                question: "Final question: If you had to choose only ONE path for humanity's survival, which do you choose?",
                options: [
                    { text: "PATH::MATTER - biological humans colonizing space physically", scores: { consequentialist: 1, deontologist: 2, virtue: 3, care: 3 } },
                    { text: "PATH::INFORMATION - digital consciousness, transcending biology", scores: { consequentialist: 3, deontologist: 0, virtue: 1, care: 0 } },
                    { text: "Both simultaneously - hedge our bets", scores: { consequentialist: 2, deontologist: 1, virtue: 2, care: 2 } },
                    { text: "Neither - focus on Earth-based sustainability first", scores: { consequentialist: 0, deontologist: 2, virtue: 2, care: 3 } }
                ]
            }
        ];

        let currentQuestionIndex = 0;
        let quizAnswers = [];
        let ethicalScores = { consequentialist: 0, deontologist: 0, virtue: 0, care: 0 };

        function initQuiz() {
            showQuestion(0);
        }

        function showQuestion(index) {
            if (index >= quizQuestions.length) {
                showQuizResults();
                return;
            }

            const question = quizQuestions[index];
            currentQuestionIndex = index;

            // Update progress
            document.getElementById('currentQuestion').textContent = index + 1;
            const progressPercent = Math.round((index / quizQuestions.length) * 100);
            document.getElementById('progressPercent').textContent = progressPercent;
            document.getElementById('progressBar').style.width = progressPercent + '%';

            // Build question HTML
            let html = `
                <div style="margin-bottom: 30px;">
                    <h3 style="color: var(--secondary); font-size: 1.4em; line-height: 1.6; margin-bottom: 25px;">
                        ${question.question}
                    </h3>
                </div>
                <div style="display: grid; gap: 15px;">
            `;

            question.options.forEach((option, optIndex) => {
                html += `
                    <button class="quiz-option" onclick="selectAnswer(${index}, ${optIndex})" 
                            style="padding: 20px; background: rgba(255, 0, 128, 0.05); border: 2px solid rgba(255, 0, 128, 0.3); 
                                   color: var(--primary); text-align: left; cursor: pointer; transition: all 0.3s; 
                                   font-family: 'Share Tech Mono', monospace; font-size: 1.05em; line-height: 1.6;
                                   border-radius: 5px;">
                        <span style="color: var(--secondary); font-weight: 700; margin-right: 10px;">${String.fromCharCode(65 + optIndex)})</span>
                        ${option.text}
                    </button>
                `;
            });

            html += '</div>';

            document.getElementById('questionDisplay').innerHTML = html;

            // Add hover effects
            setTimeout(() => {
                document.querySelectorAll('.quiz-option').forEach(btn => {
                    btn.addEventListener('mouseenter', () => {
                        btn.style.background = 'rgba(255, 0, 128, 0.15)';
                        btn.style.borderColor = 'var(--secondary)';
                        btn.style.transform = 'translateX(10px)';
                    });
                    btn.addEventListener('mouseleave', () => {
                        btn.style.background = 'rgba(255, 0, 128, 0.05)';
                        btn.style.borderColor = 'rgba(255, 0, 128, 0.3)';
                        btn.style.transform = 'translateX(0)';
                    });
                });
            }, 100);
        }

        function selectAnswer(questionIndex, optionIndex) {
            const question = quizQuestions[questionIndex];
            const option = question.options[optionIndex];

            // Store answer
            quizAnswers[questionIndex] = {
                question: question.question,
                answer: option.text,
                scores: option.scores
            };

            // Update ethical scores
            Object.keys(option.scores).forEach(key => {
                ethicalScores[key] += option.scores[key];
            });

            // Play sound and haptic
            playClick();
            vibrate(50);

            // Show next question
            setTimeout(() => {
                showQuestion(questionIndex + 1);
            }, 300);
        }

        function showQuizResults() {
            // Hide questions, show results
            document.getElementById('questionDisplay').style.display = 'none';
            document.getElementById('quizProgress').style.display = 'none';
            document.getElementById('quizResults').style.display = 'block';

            // Determine dominant ethical framework
            const maxScore = Math.max(...Object.values(ethicalScores));
            const dominantFramework = Object.keys(ethicalScores).find(key => ethicalScores[key] === maxScore);

            // Profile descriptions
            const profiles = {
                consequentialist: {
                    name: "CONSEQUENTIALIST",
                    subtitle: "The Outcome Maximizer",
                    description: "You evaluate actions by their results, not their inherent rightness. To you, the ends can justify the means if the outcome reduces total suffering or increases total wellbeing. You think in terms of expected value, probability, and aggregate outcomes across populations and time.",
                    strengths: "Willing to make hard choices. Able to think long-term. Not paralyzed by moral absolutes. Optimizes for the greatest good.",
                    weaknesses: "Can justify horrific means if ends seem good enough. Struggles with rights violations. May treat individuals as statistics. Prone to utilitarian calculus failures at scale.",
                    survival: "You'll prioritize strategies with highest expected survival probability, even if they require uncomfortable tradeoffs. You're comfortable with risk calculations and sacrificing present comfort for future security."
                },
                deontologist: {
                    name: "DEONTOLOGIST",
                    subtitle: "The Principle Guardian",
                    description: "You believe certain actions are inherently right or wrong, regardless of consequences. Human dignity, autonomy, and rights are inviolable. Some lines must never be crossed, even to save lives. Moral rules exist beyond calculations of harm and benefit.",
                    strengths: "Protects individual rights. Resists slippery slopes. Maintains moral clarity. Refuses to treat humans as mere means to ends.",
                    weaknesses: "Can be inflexible when reality demands compromise. May prioritize rules over lives. Struggles with unavoidable tradeoffs. Risk of moral absolutism.",
                    survival: "You'll favor strategies that respect autonomy and consent, even at cost to efficiency. You're skeptical of 'necessary evils' and demand survival methods align with human dignity."
                },
                virtue: {
                    name: "VIRTUE ETHICIST",
                    subtitle: "The Character Builder",
                    description: "You focus on what kind of person/civilization we should become, not just outcomes or rules. Wisdom, courage, justice, and temperance matter more than calculations. The means shape who we are; the journey changes the destination.",
                    strengths: "Balances competing values. Cultivates wisdom for complex situations. Resists both rigid rules and cold calculations. Focused on human flourishing.",
                    weaknesses: "Can be vague in crisis. 'Be wise' isn't always actionable. May avoid hard choices by appealing to character. Struggles with time pressure.",
                    survival: "You'll seek strategies that make us worthy of survival - that develop the wisdom, foresight, and cooperation needed to handle cosmic-scale power responsibly."
                },
                care: {
                    name: "CARE ETHICIST",
                    subtitle: "The Relationship Preserver",
                    description: "You prioritize relationships, context, and particular connections over abstract principles or calculations. Existing bonds have moral weight. You can't sacrifice your community for 'humanity' in abstract. Care begins with the particular, then extends outward.",
                    strengths: "Attends to real human needs. Values connection and community. Resists dehumanizing abstractions. Protects vulnerable relationships.",
                    weaknesses: "Can privilege the near over the far. May struggle with impartiality when needed. Risk of parochialism. Hard to scale care globally.",
                    survival: "You'll favor strategies that preserve existing communities and relationships. You're skeptical of plans that sacrifice present generations for abstract future billions."
                }
            };

            const profile = profiles[dominantFramework];

            // Display profile
            document.getElementById('profileType').textContent = profile.name;
            document.getElementById('profileType').style.color = 
                dominantFramework === 'consequentialist' ? 'var(--accent)' :
                dominantFramework === 'deontologist' ? 'var(--warning)' :
                dominantFramework === 'virtue' ? 'var(--primary)' : 'var(--secondary)';

            document.getElementById('profileDescription').innerHTML = `
                <h4 style="color: var(--secondary); font-size: 1.3em; margin-bottom: 10px;">${profile.subtitle}</h4>
                <p style="font-size: 1.1em; line-height: 1.8; margin: 20px 0;">${profile.description}</p>
                <div style="margin: 25px 0; padding: 20px; background: rgba(0, 255, 65, 0.05); border-left: 3px solid var(--primary);">
                    <strong style="color: var(--primary);">Strengths:</strong> ${profile.strengths}
                </div>
                <div style="margin: 25px 0; padding: 20px; background: rgba(255, 51, 51, 0.05); border-left: 3px solid var(--danger);">
                    <strong style="color: var(--danger);">Weaknesses:</strong> ${profile.weaknesses}
                </div>
            `;

            document.getElementById('survivalImplications').innerHTML = `
                <p style="font-size: 1.05em; line-height: 1.8;">${profile.survival}</p>
            `;

            // Show score breakdown
            let breakdownHTML = '';
            Object.entries(ethicalScores).forEach(([framework, score]) => {
                const percentage = Math.max(0, Math.round(((score + 30) / 60) * 100)); // Normalize to 0-100
                const color = 
                    framework === 'consequentialist' ? 'var(--accent)' :
                    framework === 'deontologist' ? 'var(--warning)' :
                    framework === 'virtue' ? 'var(--primary)' : 'var(--secondary)';
                
                breakdownHTML += `
                    <div style="padding: 15px; background: rgba(0, 0, 0, 0.2); border-left: 3px solid ${color};">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                            <strong style="color: ${color}; text-transform: uppercase;">${framework}</strong>
                            <span>${percentage}%</span>
                        </div>
                        <div style="width: 100%; height: 6px; background: rgba(255,255,255,0.1); border-radius: 3px; overflow: hidden;">
                            <div style="width: ${percentage}%; height: 100%; background: ${color}; transition: width 0.5s;"></div>
                        </div>
                    </div>
                `;
            });
            document.getElementById('answerBreakdown').innerHTML = breakdownHTML;

            // Play success sound
            playSuccess();
            vibrate([100, 50, 100, 50, 200]);

            // Scroll to results
            setTimeout(() => {
                document.getElementById('quizResults').scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 300);
        }

        function restartQuiz() {
            currentQuestionIndex = 0;
            quizAnswers = [];
            ethicalScores = { consequentialist: 0, deontologist: 0, virtue: 0, care: 0 };
            
            document.getElementById('questionDisplay').style.display = 'block';
            document.getElementById('quizProgress').style.display = 'block';
            document.getElementById('quizResults').style.display = 'none';
            
            showQuestion(0);
            playClick();
            vibrate(50);
        }

        // ==========================================
        // BUDGET SIMULATOR MODULE
        // ==========================================

        const budgetCategories = {
            climate: { name: 'Climate', weight: 0.25, baselineRisk: 0.15 },
            nuclear: { name: 'Nuclear', weight: 0.20, baselineRisk: 0.10 },
            ai: { name: 'AI Safety', weight: 0.25, baselineRisk: 0.12 },
            space: { name: 'Space', weight: 0.10, baselineRisk: 0.05 },
            bio: { name: 'Biosecurity', weight: 0.15, baselineRisk: 0.08 },
            governance: { name: 'Governance', weight: 0.15, baselineRisk: 0.10 },
            education: { name: 'Education', weight: 0.10, baselineRisk: 0.05 }
        };

        function initBudgetSimulator() {
            const sliders = document.querySelectorAll('.budget-slider');
            
            sliders.forEach(slider => {
                // Style slider dynamically
                updateSliderStyle(slider);
                
                slider.addEventListener('input', (e) => {
                    updateSliderStyle(e.target);
                    updateBudgetDisplay();
                    calculateSurvivalProbability();
                    playBeep(800 + (e.target.value * 5), 30, 'square');
                });
            });

            // Initial calculation
            updateBudgetDisplay();
            calculateSurvivalProbability();
        }

        function updateSliderStyle(slider) {
            const value = slider.value;
            const max = slider.max;
            const percentage = (value / max) * 100;
            
            // Get color based on slider ID
            let color;
            const id = slider.id;
            if (id === 'climate' || id === 'education') color = getComputedStyle(document.documentElement).getPropertyValue('--primary');
            else if (id === 'nuclear') color = getComputedStyle(document.documentElement).getPropertyValue('--danger');
            else if (id === 'ai' || id === 'space') color = getComputedStyle(document.documentElement).getPropertyValue('--accent');
            else if (id === 'bio') color = getComputedStyle(document.documentElement).getPropertyValue('--warning');
            else if (id === 'governance') color = getComputedStyle(document.documentElement).getPropertyValue('--secondary');
            
            slider.style.background = `linear-gradient(to right, ${color} ${percentage}%, rgba(${color === getComputedStyle(document.documentElement).getPropertyValue('--primary') ? '0,255,65' : color === getComputedStyle(document.documentElement).getPropertyValue('--danger') ? '255,51,51' : color === getComputedStyle(document.documentElement).getPropertyValue('--accent') ? '0,212,255' : color === getComputedStyle(document.documentElement).getPropertyValue('--warning') ? '255,170,0' : '255,0,128'},0.2) ${percentage}%)`;
        }

        function updateBudgetDisplay() {
            const sliders = document.querySelectorAll('.budget-slider');
            let total = 0;
            
            sliders.forEach(slider => {
                const value = parseInt(slider.value);
                total += value;
                
                // Update individual value display
                const valueSpan = document.getElementById(`${slider.id}-value`);
                if (valueSpan) {
                    valueSpan.textContent = value;
                }
            });
            
            // Update totals
            document.getElementById('totalAllocated').textContent = total;
            document.getElementById('remaining').textContent = Math.max(0, 100 - total);
            
            // Color remaining based on over/under budget
            const remainingSpan = document.getElementById('remaining');
            if (total > 100) {
                remainingSpan.style.color = 'var(--danger)';
                remainingSpan.parentElement.style.color = 'var(--danger)';
            } else if (total === 100) {
                remainingSpan.style.color = 'var(--primary)';
                remainingSpan.parentElement.style.color = '';
            } else {
                remainingSpan.style.color = 'var(--accent)';
                remainingSpan.parentElement.style.color = '';
            }
        }

        function calculateSurvivalProbability() {
            const sliders = document.querySelectorAll('.budget-slider');
            let totalAllocated = 0;
            const allocations = {};
            
            // Get allocations
            sliders.forEach(slider => {
                const value = parseInt(slider.value);
                allocations[slider.id] = value;
                totalAllocated += value;
            });
            
            // If over budget, penalize
            if (totalAllocated > 100) {
                document.getElementById('survivalProb').innerHTML = '<span style="color: var(--danger);">ERROR</span>';
                document.getElementById('survivalAnalysis').textContent = 'Budget exceeded! You cannot allocate more than $100T. Reduce spending in some categories.';
                return;
            }
            
            // Calculate probability (simplified model)
            // Base survival: 12% (current trajectory)
            let baseSurvival = 0.12;
            
            // Each category reduces its specific risk
            let riskReduction = 0;
            
            Object.keys(budgetCategories).forEach(key => {
                const category = budgetCategories[key];
                const allocated = allocations[key] || 0;
                
                // Logarithmic returns: diminishing marginal utility
                // Formula: risk_reduction = weight * baseline_risk * (1 - e^(-allocated/20))
                const effectiveness = 1 - Math.exp(-allocated / 20);
                const reduction = category.weight * category.baselineRisk * effectiveness;
                riskReduction += reduction;
            });
            
            // Calculate final survival probability
            let survivalProb = Math.min(0.95, baseSurvival + riskReduction);
            
            // Bonus for balanced approach (not putting all eggs in one basket)
            const values = Object.values(allocations);
            const variance = calculateVariance(values);
            if (variance < 300) { // Reward balanced allocation
                survivalProb += 0.05;
            }
            
            // Penalty for leaving money on the table
            if (totalAllocated < 80) {
                survivalProb -= (80 - totalAllocated) * 0.001;
            }
            
            survivalProb = Math.max(0.05, Math.min(0.95, survivalProb));
            
            // Display
            const probPercent = Math.round(survivalProb * 100);
            let color;
            if (probPercent < 30) color = 'var(--danger)';
            else if (probPercent < 60) color = 'var(--warning)';
            else if (probPercent < 80) color = 'var(--accent)';
            else color = 'var(--primary)';
            
            document.getElementById('survivalProb').innerHTML = `<span style="color: ${color};">${probPercent}%</span>`;
            
            // Analysis text
            let analysis = generateAnalysis(allocations, totalAllocated, probPercent);
            document.getElementById('survivalAnalysis').innerHTML = analysis;
        }

        function calculateVariance(values) {
            const mean = values.reduce((a, b) => a + b, 0) / values.length;
            const squaredDiffs = values.map(v => Math.pow(v - mean, 2));
            return squaredDiffs.reduce((a, b) => a + b, 0) / values.length;
        }

        function generateAnalysis(allocations, total, prob) {
            let analysis = '';
            
            // Check specific allocations
            const high = Object.entries(allocations).filter(([k, v]) => v > 25);
            const low = Object.entries(allocations).filter(([k, v]) => v < 5 && v > 0);
            const zero = Object.entries(allocations).filter(([k, v]) => v === 0);
            
            if (total === 0) {
                return 'No investment = no change. Baseline 12% reflects current trajectory with no additional action.';
            }
            
            if (total < 50) {
                analysis += '‚ö†Ô∏è <strong>Underinvested:</strong> You have significant unused resources. ';
            }
            
            if (total > 100) {
                return '<strong style="color: var(--danger);">OVER BUDGET:</strong> Cannot spend more than available. Reduce allocations.';
            }
            
            if (high.length === 1 && high[0][1] > 60) {
                analysis += `‚ö†Ô∏è <strong>Over-concentrated:</strong> ${high[0][1]}% in ${budgetCategories[high[0][0]].name}. Diversification reduces total risk. `;
            }
            
            if (zero.length > 3) {
                analysis += '‚ö†Ô∏è <strong>Neglected threats:</strong> Multiple categories at zero. Every threat matters. ';
            }
            
            // Specific category feedback
            if (allocations.climate > 30) {
                analysis += 'üåç Strong climate action improves near-term survival significantly. ';
            }
            if (allocations.nuclear > 25) {
                analysis += '‚ò¢Ô∏è Nuclear deproliferation has immediate life-saving impact. ';
            }
            if (allocations.ai > 30) {
                analysis += 'ü§ñ Heavy AI safety investment critical for 2030s. ';
            }
            if (allocations.governance < 5) {
                analysis += '‚ö†Ô∏è Low governance investment: coordination failures can doom other efforts. ';
            }
            if (allocations.space > 40) {
                analysis += 'üöÄ Very long-term focused. Does nothing for immediate threats (climate, nuclear, AI). ';
            }
            
            // Overall assessment
            if (prob >= 80) {
                analysis += '<br><br><strong style="color: var(--primary);">EXCELLENT:</strong> Balanced, comprehensive approach. High confidence in survival.';
            } else if (prob >= 60) {
                analysis += '<br><br><strong style="color: var(--accent);">GOOD:</strong> Solid allocation. Some optimization possible.';
            } else if (prob >= 40) {
                analysis += '<br><br><strong style="color: var(--warning);">MODERATE:</strong> Better than baseline, but significant risk remains.';
            } else {
                analysis += '<br><br><strong style="color: var(--danger);">INSUFFICIENT:</strong> Current allocation leaves major threats unaddressed.';
            }
            
            return analysis;
        }

        function loadPreset(preset) {
            const presets = {
                balanced: {
                    climate: 18, nuclear: 15, ai: 18, space: 10, bio: 12, governance: 15, education: 12
                },
                shortterm: {
                    climate: 30, nuclear: 25, ai: 5, space: 3, bio: 20, governance: 12, education: 5
                },
                longterm: {
                    climate: 10, nuclear: 10, ai: 25, space: 30, bio: 5, governance: 10, education: 10
                },
                optimal: {
                    climate: 20, nuclear: 18, ai: 22, space: 8, bio: 14, governance: 12, education: 6
                }
            };
            
            const allocation = presets[preset];
            if (!allocation) return;
            
            Object.keys(allocation).forEach(key => {
                const slider = document.getElementById(key);
                if (slider) {
                    slider.value = allocation[key];
                    updateSliderStyle(slider);
                }
            });
            
            updateBudgetDisplay();
            calculateSurvivalProbability();
            playSuccess();
            vibrate([50, 50, 50]);
        }

        // ==========================================
        // INTERACTIVE TIMELINE MODULE
        // ==========================================

        const timelineEvents = [
            // PAST (1945-2024)
            { year: 1945, title: "Trinity Test", description: "First nuclear weapon detonated. Humanity gains power to self-destruct.", impact: "Existential risk begins. Oppenheimer: 'Now I am become Death, destroyer of worlds.'", type: "threat", category: "danger" },
            { year: 1962, title: "Cuban Missile Crisis", description: "Closest the world came to nuclear war. 13 days of brinkmanship.", impact: "Demonstrated how close we are to accidental annihilation. Led to first arms control treaties.", type: "threat", category: "danger" },
            { year: 1969, title: "Moon Landing", description: "First humans leave Earth's gravitational well.", impact: "Proof of concept for space expansion. Armstrong: 'One small step for man...'", type: "milestone", category: "accent" },
            { year: 1983, title: "Stanislav Petrov Incident", description: "Soviet officer prevents WWIII by disobeying protocol during false alarm.", impact: "Single human decision saved billions. Shows fragility of nuclear systems.", type: "decision", category: "warning" },
            { year: 1986, title: "Chernobyl Disaster", description: "Nuclear power plant explosion. Radioactive cloud across Europe.", impact: "Demonstrated catastrophic risk of complex systems. Set back nuclear energy decades.", type: "threat", category: "danger" },
            { year: 1997, title: "Deep Blue defeats Kasparov", description: "Computer defeats world chess champion for first time.", impact: "Early signal of AI surpassing human cognition in specific domains.", type: "milestone", category: "primary" },
            { year: 2015, title: "Paris Climate Agreement", description: "196 nations commit to limit warming to 1.5¬∞C.", impact: "First global coordination on climate. Implementation remains inadequate.", type: "decision", category: "warning" },
            { year: 2020, title: "COVID-19 Pandemic", description: "Global pandemic kills 7M+, disrupts civilization.", impact: "Demonstrated unpreparedness for biological threats. Preview of worse pandemics.", type: "threat", category: "danger" },
            { year: 2022, title: "GPT-4 / Advanced AI", description: "Large language models approach human-level reasoning.", impact: "AI capabilities accelerating faster than safety research. Alignment problem unsolved.", type: "milestone", category: "primary" },
            { year: 2024, title: "Doomsday Clock: 90 seconds", description: "Closest to midnight ever. Multiple existential threats converging.", impact: "Current status: Critical. You are here.", type: "threat", category: "danger" },
            
            // NEAR FUTURE (2025-2050)
            { year: 2027, title: "First AGI (projected)", description: "Artificial General Intelligence achieves human-level reasoning across domains.", impact: "Potential singularity point. Alignment success/failure determines everything after.", type: "milestone", category: "primary" },
            { year: 2030, title: "Climate Tipping Points", description: "Multiple climate feedbacks activate (permafrost, AMOC, ice sheets).", impact: "If not prevented: runaway warming, massive refugee crises, civilization stress.", type: "threat", category: "danger" },
            { year: 2035, title: "Fusion Breakthrough (optimistic)", description: "First net-positive fusion reactor operational.", impact: "Unlocks virtually unlimited clean energy. Changes entire trajectory.", type: "milestone", category: "primary" },
            { year: 2040, title: "First Mars Colony", description: "Permanent settlement established on Mars (SpaceX timeline).", impact: "First step toward multi-planetary species. Still fragile, dependent on Earth.", type: "milestone", category: "accent" },
            { year: 2045, title: "Biotech Enhancement Era", description: "CRISPR, longevity treatments become mainstream.", impact: "Beginning of biological enhancement. Questions of access, equity, consent.", type: "milestone", category: "primary" },
            { year: 2050, title: "Critical Decision Point", description: "If we reach here without collapse: bifurcation becomes possible.", impact: "Survived nuclear, climate, AI, bio risks. Now can choose long-term path.", type: "decision", category: "warning" },
            
            // MID FUTURE (2050-2150)
            { year: 2075, title: "Orbital Habitats", description: "First O'Neill cylinders under construction.", impact: "PATH::MATTER acceleration. Self-sustaining space infrastructure begins.", type: "space", category: "accent" },
            { year: 2080, title: "First Successful Mind Upload", description: "Human consciousness transferred to digital substrate.", impact: "PATH::INFORMATION proof of concept. Questions of continuity, identity.", type: "digital", category: "secondary" },
            { year: 2100, title: "Earth Stabilization", description: "Climate stabilized, population sustainable, governance functional.", impact: "If achieved: civilization secured for deep future. If not: cascading collapse.", type: "decision", category: "warning" },
            { year: 2120, title: "Interstellar Probes Launch", description: "First generation ships depart for Alpha Centauri.", impact: "Point of no return for PATH::MATTER. Humanity no longer single-planet species.", type: "space", category: "accent" },
            { year: 2150, title: "Digital Civilization Majority", description: "More human minds in digital substrate than biological bodies.", impact: "PATH::INFORMATION becomes dominant. Biological humans become minority.", type: "digital", category: "secondary" },
            
            // FAR FUTURE (2150-2500)
            { year: 2200, title: "Solar System Colonized", description: "Permanent habitats on Moon, Mars, asteroids, outer planet moons.", impact: "Distributed civilization across solar system. Earth no longer critical single point of failure.", type: "space", category: "accent" },
            { year: 2250, title: "Matrioshka Brain Construction", description: "Jupiter-mass computational substrate begins construction.", impact: "PATH::INFORMATION at cosmic scale. Dyson sphere for computation.", type: "digital", category: "secondary" },
            { year: 2300, title: "First Exoplanet Colony", description: "Proxima Centauri b colonized after 200-year journey.", impact: "Humanity confirmed as interstellar species. No single catastrophe can end us.", type: "space", category: "accent" },
            { year: 2400, title: "Consciousness Diversity Era", description: "Biological, digital, hybrid, and post-human minds coexist.", impact: "Multiple forms of human-derived intelligence. No single answer to 'what is human?'", type: "digital", category: "secondary" },
            { year: 2500, title: "The Bifurcation Complete", description: "Humanity exists in both matter (space colonies) and information (digital networks).", impact: "Critical window survived. Cosmic-scale civilization achieved. Future open.", type: "decision", category: "primary" }
        ];

        let timelineCanvas, timelineCtx;
        let timelineOffset = 0;
        let timelineZoom = 1;
        let timelineDragging = false;
        let timelineLastX = 0;
        let timelineHoveredEvent = null;

        function initTimeline() {
            timelineCanvas = document.getElementById('timelineCanvas');
            if (!timelineCanvas) return;

            timelineCtx = timelineCanvas.getContext('2d');
            
            // Set canvas size
            const container = document.getElementById('timelineContainer');
            timelineCanvas.width = container.clientWidth;
            timelineCanvas.height = container.clientHeight;

            // Event listeners
            timelineCanvas.addEventListener('mousedown', timelineMouseDown);
            timelineCanvas.addEventListener('mousemove', timelineMouseMove);
            timelineCanvas.addEventListener('mouseup', timelineMouseUp);
            timelineCanvas.addEventListener('mouseleave', timelineMouseUp);
            timelineCanvas.addEventListener('click', timelineClick);
            
            // Touch support
            timelineCanvas.addEventListener('touchstart', timelineTouchStart);
            timelineCanvas.addEventListener('touchmove', timelineTouchMove);
            timelineCanvas.addEventListener('touchend', timelineMouseUp);

            // Initial draw
            drawTimeline();
            
            // Redraw on resize
            window.addEventListener('resize', () => {
                timelineCanvas.width = container.clientWidth;
                timelineCanvas.height = container.clientHeight;
                drawTimeline();
            });
        }

        function drawTimeline() {
            if (!timelineCtx) return;

            const width = timelineCanvas.width;
            const height = timelineCanvas.height;

            // Clear canvas
            timelineCtx.fillStyle = 'rgba(5, 7, 20, 1)';
            timelineCtx.fillRect(0, 0, width, height);

            // Timeline parameters
            const startYear = 1945;
            const endYear = 2500;
            const yearRange = endYear - startYear;
            const timelineY = height / 2;
            const eventRadius = 8;

            // Calculate pixel per year with zoom
            const pixelsPerYear = (width * 0.8 / yearRange) * timelineZoom;

            // Draw timeline line
            timelineCtx.strokeStyle = getComputedStyle(document.documentElement).getPropertyValue('--accent');
            timelineCtx.lineWidth = 2;
            timelineCtx.beginPath();
            timelineCtx.moveTo(50, timelineY);
            timelineCtx.lineTo(width - 50, timelineY);
            timelineCtx.stroke();

            // Draw century markers
            timelineCtx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--accent');
            timelineCtx.font = '12px "Share Tech Mono"';
            timelineCtx.textAlign = 'center';
            
            for (let year = 2000; year <= 2500; year += 100) {
                const x = 50 + ((year - startYear) * pixelsPerYear) + timelineOffset;
                if (x > 30 && x < width - 30) {
                    timelineCtx.strokeStyle = getComputedStyle(document.documentElement).getPropertyValue('--accent') + '80';
                    timelineCtx.beginPath();
                    timelineCtx.moveTo(x, timelineY - 10);
                    timelineCtx.lineTo(x, timelineY + 10);
                    timelineCtx.stroke();
                    
                    timelineCtx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--accent');
                    timelineCtx.fillText(year.toString(), x, timelineY + 30);
                }
            }

            // Draw "NOW" marker
            const nowYear = 2024;
            const nowX = 50 + ((nowYear - startYear) * pixelsPerYear) + timelineOffset;
            if (nowX > 30 && nowX < width - 30) {
                timelineCtx.strokeStyle = getComputedStyle(document.documentElement).getPropertyValue('--warning');
                timelineCtx.lineWidth = 3;
                timelineCtx.beginPath();
                timelineCtx.moveTo(nowX, timelineY - 30);
                timelineCtx.lineTo(nowX, timelineY + 30);
                timelineCtx.stroke();
                
                timelineCtx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--warning');
                timelineCtx.font = 'bold 14px "Orbitron"';
                timelineCtx.fillText('NOW', nowX, timelineY - 40);
            }

            // Draw events
            timelineEvents.forEach(event => {
                const x = 50 + ((event.year - startYear) * pixelsPerYear) + timelineOffset;
                
                if (x > 0 && x < width) {
                    // Determine color based on category
                    let color;
                    switch(event.category) {
                        case 'danger': color = getComputedStyle(document.documentElement).getPropertyValue('--danger'); break;
                        case 'warning': color = getComputedStyle(document.documentElement).getPropertyValue('--warning'); break;
                        case 'primary': color = getComputedStyle(document.documentElement).getPropertyValue('--primary'); break;
                        case 'accent': color = getComputedStyle(document.documentElement).getPropertyValue('--accent'); break;
                        case 'secondary': color = getComputedStyle(document.documentElement).getPropertyValue('--secondary'); break;
                        default: color = getComputedStyle(document.documentElement).getPropertyValue('--primary');
                    }

                    // Draw event dot
                    timelineCtx.fillStyle = color;
                    timelineCtx.beginPath();
                    timelineCtx.arc(x, timelineY, eventRadius, 0, Math.PI * 2);
                    timelineCtx.fill();

                    // Hover effect
                    if (timelineHoveredEvent === event) {
                        timelineCtx.strokeStyle = color;
                        timelineCtx.lineWidth = 3;
                        timelineCtx.beginPath();
                        timelineCtx.arc(x, timelineY, eventRadius + 5, 0, Math.PI * 2);
                        timelineCtx.stroke();

                        // Draw title on hover
                        timelineCtx.fillStyle = color;
                        timelineCtx.font = 'bold 13px "Share Tech Mono"';
                        timelineCtx.textAlign = 'center';
                        const titleY = event.year < nowYear ? timelineY - 20 : timelineY + 35;
                        timelineCtx.fillText(event.title, x, titleY);
                    }

                    // Store event position for click detection
                    event._screenX = x;
                    event._screenY = timelineY;
                }
            });
        }

        function timelineMouseDown(e) {
            timelineDragging = true;
            timelineLastX = e.clientX;
            timelineCanvas.style.cursor = 'grabbing';
        }

        function timelineMouseMove(e) {
            const rect = timelineCanvas.getBoundingClientRect();
            const mouseX = e.clientX - rect.left;
            const mouseY = e.clientY - rect.top;

            if (timelineDragging) {
                const deltaX = e.clientX - timelineLastX;
                timelineOffset += deltaX;
                timelineLastX = e.clientX;
                drawTimeline();
            } else {
                // Check hover
                timelineHoveredEvent = null;
                timelineEvents.forEach(event => {
                    if (event._screenX && event._screenY) {
                        const dx = mouseX - event._screenX;
                        const dy = mouseY - event._screenY;
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        if (distance < 15) {
                            timelineHoveredEvent = event;
                        }
                    }
                });
                drawTimeline();
            }
        }

        function timelineMouseUp() {
            timelineDragging = false;
            timelineCanvas.style.cursor = 'grab';
        }

        function timelineTouchStart(e) {
            e.preventDefault();
            const touch = e.touches[0];
            timelineLastX = touch.clientX;
            timelineDragging = true;
        }

        function timelineTouchMove(e) {
            e.preventDefault();
            if (timelineDragging && e.touches.length > 0) {
                const touch = e.touches[0];
                const deltaX = touch.clientX - timelineLastX;
                timelineOffset += deltaX;
                timelineLastX = touch.clientX;
                drawTimeline();
            }
        }

        function timelineClick(e) {
            const rect = timelineCanvas.getBoundingClientRect();
            const mouseX = e.clientX - rect.left;
            const mouseY = e.clientY - rect.top;

            timelineEvents.forEach(event => {
                if (event._screenX && event._screenY) {
                    const dx = mouseX - event._screenX;
                    const dy = mouseY - event._screenY;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    if (distance < 15) {
                        showTimelinePopup(event);
                        playClick();
                        vibrate(50);
                    }
                }
            });
        }

        function showTimelinePopup(event) {
            const popup = document.getElementById('timelinePopup');
            document.getElementById('popupTitle').textContent = event.title;
            document.getElementById('popupYear').textContent = `YEAR: ${event.year}`;
            document.getElementById('popupDescription').textContent = event.description;
            document.getElementById('popupImpact').innerHTML = `<strong>IMPACT:</strong> ${event.impact}`;
            popup.style.display = 'block';
        }

        function closeTimelinePopup() {
            document.getElementById('timelinePopup').style.display = 'none';
            playClick();
        }

        function timelineZoomIn() {
            timelineZoom = Math.min(timelineZoom * 1.5, 5);
            drawTimeline();
            playClick();
            vibrate(30);
        }

        function timelineZoomOut() {
            timelineZoom = Math.max(timelineZoom / 1.5, 0.5);
            drawTimeline();
            playClick();
            vibrate(30);
        }

        function timelineReset() {
            timelineZoom = 1;
            timelineOffset = 0;
            drawTimeline();
            playClick();
            vibrate(50);
        }

        // Initialize
        window.addEventListener('load', () => {
            createHexBody();
            loadAchievements();
            
            // Setup click sounds for interactive elements
            document.querySelectorAll('.command-btn, .path-node, .stat-card').forEach(el => {
                el.addEventListener('click', () => {
                    playClick();
                    vibrate(30);
                });
            });
            
            // Auto-advance to prelude after boot sequence
            setTimeout(() => {
                showPrelude();
            }, 3000); // 3 seconds to read boot messages
            
            // SECRET #8 reveal logic - appears when user reaches 95% of document
            let secret8Revealed = false;
            window.addEventListener('scroll', () => {
                if (secret8Revealed) return;
                
                const scrollPercent = (window.scrollY + window.innerHeight) / document.documentElement.scrollHeight;
                
                if (scrollPercent > 0.95) {
                    const secret8 = document.getElementById('secret8');
                    if (secret8) {
                        secret8.style.display = 'block';
                        secret8.style.opacity = '0';
                        secret8.style.transform = 'translateY(20px)';
                        secret8.style.transition = 'all 1s ease-out';
                        
                        setTimeout(() => {
                            secret8.style.opacity = '1';
                            secret8.style.transform = 'translateY(0)';
                            playSecret();
                            vibrate([100, 50, 100, 50, 200]);
                            showNotification('üéØ SECRET #8 UNLOCKED - The Meta-Layer');
                        }, 100);
                        
                        secret8Revealed = true;
                    }
                }
            });

            // Initialize interactive timeline when it becomes visible
            const timelineObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting && !timelineCanvas) {
                        initTimeline();
                    }
                });
            }, { threshold: 0.1 });

            const timelineContainer = document.getElementById('timelineContainer');
            if (timelineContainer) {
                timelineObserver.observe(timelineContainer);
            }

            // Initialize budget simulator when it becomes visible
            const budgetObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        initBudgetSimulator();
                        budgetObserver.disconnect(); // Only init once
                    }
                });
            }, { threshold: 0.1 });

            const budgetSimulator = document.getElementById('budgetSimulator');
            if (budgetSimulator) {
                budgetObserver.observe(budgetSimulator);
            }

            // Initialize philosophical quiz when it becomes visible
            const quizObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        initQuiz();
                        quizObserver.disconnect(); // Only init once
                    }
                });
            }, { threshold: 0.1 });

            const quizContainer = document.getElementById('quizContainer');
            if (quizContainer) {
                quizObserver.observe(quizContainer);
            }

            // Initialize 3D Globe when it becomes visible
            const globeObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting && typeof THREE !== 'undefined') {
                        initGlobe();
                        globeObserver.disconnect(); // Only init once
                    }
                });
            }, { threshold: 0.1 });

            const globeContainer = document.getElementById('globeContainer');
            if (globeContainer) {
                globeObserver.observe(globeContainer);
            }
            
            // Optional: Add typing effect to boot sequence
            // enhancedBootSequence();
        });

        // Add achievement viewer (hidden command)
        let cmdSequence = [];
        document.addEventListener('keypress', (e) => {
            cmdSequence.push(e.key);
            if (cmdSequence.length > 12) cmdSequence.shift();
            
            if (cmdSequence.join('').includes('achievements')) {
                const unlockedCount = Object.values(achievements).filter(a => a.unlocked).length;
                const achievementList = Object.entries(achievements)
                    .map(([key, ach]) => `${ach.unlocked ? '‚úÖ' : 'üîí'} ${ach.name} - ${ach.description}`)
                    .join('<br>');
                
                showEasterEgg('ACHIEVEMENTS', 
                    `<strong>YOUR ACHIEVEMENTS (${unlockedCount}/6)</strong><br><br>` +
                    achievementList +
                    '<br><br><em>Keep exploring to unlock them all!</em>'
                );
                cmdSequence = [];
            }
        });
    </script>
</body>
</html>